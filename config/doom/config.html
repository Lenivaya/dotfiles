<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <!-- 2023-07-16 Sun 17:30 -->
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Emacs Configuration</title>
    <meta name="author" content="leniviy" />
    <meta name="generator" content="Org Mode" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script
      type="text/javascript"
      src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"
    ></script>
  </head>
  <body>
    <div id="content" class="content">
      <h1 class="title">Emacs Configuration</h1>
      <div id="table-of-contents" role="doc-toc">
        <h2>Table of Contents</h2>
        <div id="text-table-of-contents" role="doc-toc">
          <ul>
            <li>
              <a href="#org67482a1">1. Config</a>
              <ul>
                <li><a href="#org4e708db">1.1. Personal information</a></li>
                <li>
                  <a href="#org6dd6034">1.2. Better defaults</a>
                  <ul>
                    <li><a href="#org4e246cd">1.2.1. Simple settings</a></li>
                    <li><a href="#org37bf738">1.2.2. Frame sizing</a></li>
                    <li>
                      <a href="#orgb1ad7e4">1.2.3. Auto-customisations</a>
                    </li>
                    <li><a href="#orgb4f6044">1.2.4. Windows</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#orgb1eb86a">1.3. Doom configuration</a>
                  <ul>
                    <li>
                      <a href="#org33b9223">1.3.1. Modules</a>
                      <ul>
                        <li><a href="#org3d777e9">1.3.1.1. Structure</a></li>
                        <li><a href="#org7c2c3a1">1.3.1.2. Interface</a></li>
                        <li>
                          <a href="#orga0e4e6b">1.3.1.3. Language support</a>
                        </li>
                        <li>
                          <a href="#orgfe1e063">1.3.1.4. Everything in Emacs</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#org609c739">1.3.2. Visual settings</a>
                      <ul>
                        <li><a href="#org3b71662">1.3.2.1. Font Face</a></li>
                        <li>
                          <a href="#orge2d015e">1.3.2.2. Theme and modeline</a>
                        </li>
                        <li>
                          <a href="#org91805eb">1.3.2.3. Miscellaneous</a>
                        </li>
                        <li><a href="#orgc66c08b">1.3.2.4. Ligatures</a></li>
                        <li><a href="#orga0e0d9b">1.3.2.5. Scrolling</a></li>
                        <li>
                          <a href="#org2fae20f"
                            >1.3.2.6. Prettier page breaks</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#org4f9b492"
                        >1.3.3. Allow babel execution in CLI actions</a
                      >
                    </li>
                  </ul>
                </li>
                <li><a href="#org99e5d54">1.4. Performance</a></li>
                <li>
                  <a href="#org8919c85">1.5. Other Things</a>
                  <ul>
                    <li>
                      <a href="#org088c595">1.5.1. Editor interaction</a>
                      <ul>
                        <li>
                          <a href="#org003a069">1.5.1.1. Mouse buttons</a>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#org7fc617b">1.5.2. Splash screen</a></li>
                    <li>
                      <a href="#org139369a">1.5.3. Daemon</a>
                      <ul>
                        <li><a href="#org4104ee6">1.5.3.1. Dashboard</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="#org116981c">2. Package loading</a>
              <ul>
                <li>
                  <a href="#orgf823c52">2.1. General packages</a>
                  <ul>
                    <li><a href="#orgebadd40">2.1.1. Fun</a></li>
                    <li>
                      <a href="#orgc4c419d">2.1.2. Features</a>
                      <ul>
                        <li><a href="#org65c2b71">2.1.2.1. CalcTeX</a></li>
                        <li><a href="#orgd1a1fab">2.1.2.2. Info colors</a></li>
                        <li>
                          <a href="#orgbb3eb80"
                            >2.1.2.3. Calibre and ebook reading</a
                          >
                        </li>
                        <li><a href="#org06f5371">2.1.2.4. Screenshots</a></li>
                        <li>
                          <a href="#orgede6dc9">2.1.2.5. Theme schedule</a>
                        </li>
                        <li>
                          <a href="#orgc714a0b"
                            >2.1.2.6. Non-default keyboard layouts support</a
                          >
                        </li>
                        <li><a href="#orgd87c73b">2.1.2.7. Kdeconnect</a></li>
                        <li><a href="#org73d2b5d">2.1.2.8. Imenu</a></li>
                        <li><a href="#orgda41a4c">2.1.2.9. Deadgrep</a></li>
                        <li>
                          <a href="#orgf99a976">2.1.2.10. Company</a>
                          <ul>
                            <li>
                              <a href="#orgda75a4d">2.1.2.10.1. Prescient</a>
                            </li>
                            <li><a href="#org6131ecf">2.1.2.10.2. Fuzzy</a></li>
                            <li><a href="#orgf6b9c3f">2.1.2.10.3. Math</a></li>
                          </ul>
                        </li>
                        <li>
                          <a href="#org2be4301">2.1.2.11. Top in emacs</a>
                        </li>
                        <li>
                          <a href="#orgce1550a">2.1.2.12. Google-translate</a>
                        </li>
                        <li><a href="#org4727326">2.1.2.13. Timesheet</a></li>
                        <li><a href="#org3c8d5e4">2.1.2.14. Wakatime</a></li>
                        <li><a href="#orgc1d4913">2.1.2.15. iscroll</a></li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#org67392f0">2.2. Language packages</a>
                  <ul>
                    <li><a href="#org4acc851">2.2.1. LaTeX</a></li>
                    <li>
                      <a href="#orgaa2aa55">2.2.2. Org Mode</a>
                      <ul>
                        <li>
                          <a href="#org18b2205"
                            >2.2.2.1. Improve agenda/capture</a
                          >
                        </li>
                        <li><a href="#org043de87">2.2.2.2. Visuals</a></li>
                        <li>
                          <a href="#orgf13ec19">2.2.2.3. Extra functionality</a>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#org806cd22">2.2.3. Systemd</a></li>
                    <li><a href="#orgf7bc9f8">2.2.4. Graphviz</a></li>
                    <li><a href="#org7067be3">2.2.5. Authinfo</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="#org01eab99">3. Package configuration</a>
              <ul>
                <li><a href="#org5a94f54">3.1. Abbrev mode</a></li>
                <li><a href="#org409f122">3.2. Avy</a></li>
                <li><a href="#orga4a772b">3.3. Calc</a></li>
                <li>
                  <a href="#org7eaf276">3.4. Circadian (Theme schedule)</a>
                </li>
                <li>
                  <a href="#orgca65bb4">3.5. Company</a>
                  <ul>
                    <li><a href="#org87cedb7">3.5.1. ESS</a></li>
                  </ul>
                </li>
                <li><a href="#orgfc2bdc1">3.6. Deadgrep</a></li>
                <li><a href="#org42dfe0f">3.7. Direnv</a></li>
                <li><a href="#org3011cc4">3.8. Doom modeline</a></li>
                <li><a href="#org8096c4e">3.9. Emacs-everywhere</a></li>
                <li><a href="#org6fd1971">3.10. Eros-eval</a></li>
                <li><a href="#orgf68f359">3.11. EVIL</a></li>
                <li><a href="#org8275cfa">3.12. Gif-screencast</a></li>
                <li><a href="#org9d24fff">3.13. Google-translate</a></li>
                <li><a href="#org0efe1ee">3.14. Imenu</a></li>
                <li><a href="#orgbcd3aab">3.15. Info colours</a></li>
                <li><a href="#orgd02df21">3.16. Leetcode</a></li>
                <li><a href="#org78b408d">3.17. Kdeconnect</a></li>
                <li><a href="#org9a46a40">3.18. Keycast</a></li>
                <li><a href="#orgdb00831">3.19. Org Chef</a></li>
                <li>
                  <a href="#orgdbbe0c8">3.20. Reverse-im (Keyboard layouts)</a>
                </li>
                <li><a href="#org392c103">3.21. Which-key</a></li>
                <li><a href="#orgb59d72e">3.22. Writeroom</a></li>
                <li><a href="#orga989f01">3.23. Wakatime</a></li>
                <li><a href="#org3c7ee8e">3.24. YASnippet</a></li>
                <li><a href="#orgaa7e9fe">3.25. Fountain</a></li>
                <li><a href="#orga74b3bd">3.26. Open-With</a></li>
                <li><a href="#org29fd4c8">3.27. Spray</a></li>
                <li><a href="#orgea17a76">3.28. iscroll</a></li>
                <li><a href="#org5bb02aa">3.29. Git blame</a></li>
                <li>
                  <a href="#org0598239">3.30. Hydra</a>
                  <ul>
                    <li><a href="#org8e9f10c">3.30.1. Hydra Posframe</a></li>
                  </ul>
                </li>
                <li><a href="#org64d38a7">3.31. Terminal Here</a></li>
                <li><a href="#org065d423">3.32. Spell-fu</a></li>
              </ul>
            </li>
            <li>
              <a href="#org9a92f8b">4. Applications</a>
              <ul>
                <li><a href="#org41fc923">4.1. Ebooks</a></li>
                <li>
                  <a href="#orgf8870a4">4.2. File types</a>
                  <ul>
                    <li><a href="#orgf9df63d">4.2.1. Systemd</a></li>
                  </ul>
                </li>
                <li><a href="#org7fd4f72">4.3. Obsidian</a></li>
              </ul>
            </li>
            <li>
              <a href="#org595fa3e">5. Language configuration</a>
              <ul>
                <li><a href="#orgd58f8ac">5.1. Haskell</a></li>
                <li><a href="#org6750ad6">5.2. Rust</a></li>
                <li><a href="#org85d6c2a">5.3. Js</a></li>
                <li><a href="#org44a35fb">5.4. LaTeX</a></li>
                <li><a href="#orgf749833">5.5. Markdown</a></li>
                <li><a href="#orge85eeb8">5.6. Nix</a></li>
                <li>
                  <a href="#org">5.7. Org</a>
                  <ul>
                    <li>
                      <a href="#org89b8cba">5.7.1. Behavior</a>
                      <ul>
                        <li>
                          <a href="#orga6fc366">5.7.1.1. Tweaking defaults</a>
                        </li>
                        <li>
                          <a href="#org14cbf23">5.7.1.2. Latex snippets</a>
                        </li>
                        <li>
                          <a href="#org1987fff">5.7.1.3. Extra functionality</a>
                          <ul>
                            <li>
                              <a href="#org10a4c54"
                                >5.7.1.3.1. Org buffer creation</a
                              >
                            </li>
                            <li>
                              <a href="#org094600f"
                                >5.7.1.3.2. The utility of zero-width spaces</a
                              >
                            </li>
                            <li>
                              <a href="#orgc278a83"
                                >5.7.1.3.3. List bullet sequence</a
                              >
                            </li>
                            <li>
                              <a href="#orgdd84e9d">5.7.1.3.4. cdlatex</a>
                            </li>
                            <li>
                              <a href="#org6026632"
                                >5.7.1.3.5. View exported file</a
                              >
                            </li>
                            <li>
                              <a href="#org1ef68ca">5.7.1.3.6. Citation</a>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#orgabe94a7">5.7.1.4. Super agenda</a></li>
                        <li>
                          <a href="#org604eefd">5.7.1.5. Snippet Helpers</a>
                        </li>
                        <li>
                          <a href="#org344bb28"
                            >5.7.1.6. Translate capital keywords (old) to lower
                            case (new)</a
                          >
                        </li>
                        <li>
                          <a href="#org5c0e9d2"
                            >5.7.1.7. Fix problematic hooks</a
                          >
                        </li>
                        <li>
                          <a href="#orgbe5b5a4">5.7.1.8. Mermaid diagrams</a>
                        </li>
                        <li><a href="#orgd123597">5.7.1.9. Org-roam</a></li>
                        <li>
                          <a href="#org5364cb5">5.7.1.10. Org-transclusion</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#org6a9762f">5.7.2. Visuals</a>
                      <ul>
                        <li><a href="#org97b32db">5.7.2.1. Org Modern</a></li>
                        <li>
                          <a href="#org4001f82">5.7.2.2. Emphasis markers</a>
                        </li>
                        <li><a href="#org07c074c">5.7.2.3. Font Display</a></li>
                        <li>
                          <a href="#orgde97588">5.7.2.4. Reduced text indent</a>
                        </li>
                        <li>
                          <a href="#orgf662579"
                            >5.7.2.5. Fontifying inline src blocks</a
                          >
                        </li>
                        <li><a href="#org6004c2b">5.7.2.6. Symbols</a></li>
                        <li>
                          <a href="#orgd5bdaa5">5.7.2.7. LaTeX Fragments</a>
                          <ul>
                            <li>
                              <a href="#org5efe4fb"
                                >5.7.2.7.1. Prettier highlighting</a
                              >
                            </li>
                            <li>
                              <a href="#org3a00c44"
                                >5.7.2.7.2. More eager rendering</a
                              >
                            </li>
                            <li>
                              <a href="#org38e47cb"
                                >5.7.2.7.3. Prettier rendering</a
                              >
                            </li>
                            <li>
                              <a href="#org1aa67b3"
                                >5.7.2.7.4. Fixes for lualatex</a
                              >
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#orga10a1b2">5.7.3. Exporting</a>
                      <ul>
                        <li>
                          <a href="#org720d7d2">5.7.3.1. Exporting Org code</a>
                        </li>
                        <li>
                          <a href="#orgff2f5f4">5.7.3.2. General settings</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#orga71dd14">5.7.4. LaTeX Export</a>
                      <ul>
                        <li><a href="#org125401e">5.7.4.1. Compiling</a></li>
                        <li>
                          <a href="#org3a6e8da">5.7.4.2. Class templates</a>
                        </li>
                        <li>
                          <a href="#org4731cb0"
                            >5.7.4.3. Extra special strings</a
                          >
                        </li>
                        <li>
                          <a href="#org234d24a"
                            >5.7.4.4. Make verbatim different to code</a
                          >
                        </li>
                        <li>
                          <a href="#orgca1baec"
                            >5.7.4.5. Support images from URLs</a
                          >
                        </li>
                        <li>
                          <a href="#orga6f39c7">5.7.4.6. Pretty code blocks</a>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#orge407a3a">5.7.5. Beamer Export</a></li>
                    <li><a href="#org927af9b">5.7.6. ASCII export</a></li>
                    <li><a href="#org62987a8">5.7.7. Reveal export</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#org7bc8b15">5.8. Plaintext</a>
                  <ul>
                    <li><a href="#org83b97b8">5.8.1. Ansi colours</a></li>
                  </ul>
                </li>
                <li><a href="#org3fceeae">5.9. Python</a></li>
                <li><a href="#org5464b82">5.10. Rust</a></li>
                <li><a href="#org5155ff9">5.11. CSharp</a></li>
                <li><a href="#orgee917a7">5.12. HTML</a></li>
              </ul>
            </li>
            <li>
              <a href="#orgf82e89a">6. Functions</a>
              <ul>
                <li><a href="#org5091255">6.1. Org</a></li>
                <li><a href="#org715a587">6.2. Files</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <blockquote>
        <p>
          Let us change our traditional attitude to the construction of
          programs: Instead of imagining that our main task is to instruct a
          computer what to do, let us concentrate rather on explaining to human
          beings what we want a computer to do. &#x2014; Donald Knuth
        </p>
      </blockquote>

      <div id="outline-container-org67482a1" class="outline-2">
        <h2 id="org67482a1"><span class="section-number-2">1.</span> Config</h2>
        <div class="outline-text-2" id="text-1">
          <p>
            Make this file run (slightly) faster with lexical binding (see
            <a href="https://nullprogram.com/blog/2016/12/22/"
              >this blog post</a
            >
            for more info).
          </p>
          <div class="org-src-container">
            <pre
              class="src src-emacs-lisp"
            ><span style="color: #5a5b5a;">;;; </span><span style="color: #5a5b5a;">config.el -*- lexical-binding: t; -*-</span>
</pre>
          </div>
        </div>
        <div id="outline-container-org4e708db" class="outline-3">
          <h3 id="org4e708db">
            <span class="section-number-3">1.1.</span> Personal information
          </h3>
          <div class="outline-text-3" id="text-1-1">
            <p>Basic personal information</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">user-full-name</span> <span style="color: #b5bd68;">"Danylo Osipchuk"</span>
      <span style="color: #cc6666;">user-mail-address</span> <span style="color: #b5bd68;">"xocada@gmail.com"</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org6dd6034" class="outline-3">
          <h3 id="org6dd6034">
            <span class="section-number-3">1.2.</span> Better defaults
          </h3>
          <div class="outline-text-3" id="text-1-2"></div>
          <div id="outline-container-org4e246cd" class="outline-4">
            <h4 id="org4e246cd">
              <span class="section-number-4">1.2.1.</span> Simple settings
            </h4>
            <div class="outline-text-4" id="text-1-2-1">
              <p>Some better defaults from internet</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-default</span>
 <span style="color: #cc6666;">delete-by-moving-to-trash</span> t                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Delete files to trash</span>
 <span style="color: #cc6666;">window-combination-resize</span> t                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">take new window space from all other windows (not just current)</span>
 <span style="color: #cc6666;">x-stretch-cursor</span> t<span style="color: #b294bb;">)</span>                              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Stretch cursor to the glyph width</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">undo-limit</span> <span style="color: #de935f; font-weight: bold;">80000000</span>                         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Raise undo-limit to 80Mb</span>
      <span style="color: #cc6666;">evil-want-fine-undo</span> t                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">By default while in insert all changes are one big blob. Be more granular</span>
      <span style="color: #cc6666;">auto-save-default</span> t                         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Nobody likes to loose work, I certainly don't</span>
      <span style="color: #cc6666;">truncate-string-ellipsis</span> <span style="color: #b5bd68;">"&#8230;"</span><span style="color: #b294bb;">)</span>               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Unicode ellispis are nicer than "...", and also save /precious/ space</span>

<span style="color: #b294bb;">(</span><span style="color: #cc6666;">global-subword-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span>                           <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Iterate through CamelCase words</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-org37bf738" class="outline-4">
            <h4 id="org37bf738">
              <span class="section-number-4">1.2.2.</span> Frame sizing
            </h4>
            <div class="outline-text-4" id="text-1-2-2">
              <p>
                It&rsquo;s nice to control the size of new frames, when
                launching Emacs that can be done with
                <code>emacs -geometry 160x48</code>. After the font size
                adjustment during initialisation this works out to be
                <code>102x31</code>.
              </p>

              <p>
                Thanks to hotkeys, it&rsquo;s easy for me to expand a frame to
                half/full-screen, so it makes sense to be conservative with the
                sizing of new frames.
              </p>

              <p>
                Then, for creating new frames within the same Emacs instance,
                we&rsquo;ll just set the default to be something roughly 80% of
                that size.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">default-frame-alist</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>height . <span style="color: #de935f; font-weight: bold;">24</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">default-frame-alist</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>width . <span style="color: #de935f; font-weight: bold;">80</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-orgb1ad7e4" class="outline-4">
            <h4 id="orgb1ad7e4">
              <span class="section-number-4">1.2.3.</span> Auto-customisations
            </h4>
            <div class="outline-text-4" id="text-1-2-3">
              <p>
                By default changes made via a customisation interface are added
                to <code>init.el</code>. I prefer the idea of using a separate
                file for this. We just need to change a setting, and load it if
                it exists.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">custom-file</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">expand-file-name</span> <span style="color: #b5bd68;">".custom.el"</span> <span style="color: #cc6666;">doom-private-dir</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">when</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">file-exists-p</span> <span style="color: #cc6666;">custom-file</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">load</span> <span style="color: #cc6666;">custom-file</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-orgb4f6044" class="outline-4">
            <h4 id="orgb4f6044">
              <span class="section-number-4">1.2.4.</span> Windows
            </h4>
            <div class="outline-text-4" id="text-1-2-4">
              <p>
                I find it rather handy to be asked which buffer I want to see
                after splitting the window. Let&rsquo;s make that happen. First,
                we&rsquo;ll enter the new window
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">evil-vsplit-window-right</span> t
      <span style="color: #cc6666;">evil-split-window-below</span> t<span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>Then, we&rsquo;ll pull up a buffer prompt.</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> prompt-for-buffer <span style="color: #81a2be;">(</span><span style="color: #f0c674;">&amp;rest</span> _<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>evil-window-split evil-window-vsplit<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">consult-buffer</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>
                Window rotation is nice, and can be found under
                <code>SPC w r</code> and <code>SPC w R</code>.
                <i>Layout</i> rotation is also nice though. Let&rsquo;s stash
                this under <code>SPC w SPC</code>, inspired by Tmux&rsquo;s use
                of <code>C-b SPC</code> to rotate windows.
              </p>

              <p>
                We could also do with adding the missing arrow-key variants of
                the window navigation/swapping commands.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">evil-window-map</span>
      <span style="color: #b5bd68;">"SPC"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">rotate-layout</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Navigation</span>
      <span style="color: #b5bd68;">"&lt;left&gt;"</span>     <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-window-left</span>
      <span style="color: #b5bd68;">"&lt;down&gt;"</span>     <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-window-down</span>
      <span style="color: #b5bd68;">"&lt;up&gt;"</span>       <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-window-up</span>
      <span style="color: #b5bd68;">"&lt;right&gt;"</span>    <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-window-right</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Swapping windows</span>
      <span style="color: #b5bd68;">"C-&lt;left&gt;"</span>       <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+evil/window-move-left</span>
      <span style="color: #b5bd68;">"C-&lt;down&gt;"</span>       <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+evil/window-move-down</span>
      <span style="color: #b5bd68;">"C-&lt;up&gt;"</span>         <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+evil/window-move-up</span>
      <span style="color: #b5bd68;">"C-&lt;right&gt;"</span>      <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+evil/window-move-right</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>

        <div id="outline-container-orgb1eb86a" class="outline-3">
          <h3 id="orgb1eb86a">
            <span class="section-number-3">1.3.</span> Doom configuration
          </h3>
          <div class="outline-text-3" id="text-1-3"></div>
          <div id="outline-container-org33b9223" class="outline-4">
            <h4 id="org33b9223">
              <span class="section-number-4">1.3.1.</span> Modules
            </h4>
            <div class="outline-text-4" id="text-1-3-1">
              <p>
                Doom has this lovely <i>modular configuration base</i> that
                takes a lot of work out of configuring Emacs. Each module (when
                enabled) can provide a list of packages to install (on
                <code>doom sync</code>) and configuration to be applied. The
                modules can also have flags applied to tweak their behaviour.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                  id="org9a5e7f0"
                ><span style="color: #5a5b5a;">;;; </span><span style="color: #5a5b5a;">init.el -*- lexical-binding: t; -*-</span>

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">This file controls what Doom modules are enabled and what order they load in.</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Press '</span><span style="color: #de935f;">K</span><span style="color: #5a5b5a;">' on a module to view its documentation, and '</span><span style="color: #de935f;">gd</span><span style="color: #5a5b5a;">' to browse its directory.</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">doom!</span> <span style="color: #81a2be;">:completion</span>
       &lt;&lt;doom-completion&gt;&gt;

       <span style="color: #81a2be;">:ui</span>
       &lt;&lt;doom-ui&gt;&gt;

       <span style="color: #81a2be;">:editor</span>
       &lt;&lt;doom-editor&gt;&gt;

       <span style="color: #81a2be;">:emacs</span>
       &lt;&lt;doom-emacs&gt;&gt;

       <span style="color: #81a2be;">:term</span>
       &lt;&lt;doom-term&gt;&gt;

       <span style="color: #81a2be;">:checkers</span>
       &lt;&lt;doom-checkers&gt;&gt;

       <span style="color: #81a2be;">:tools</span>
       &lt;&lt;doom-tools&gt;&gt;

       <span style="color: #81a2be;">:os</span>
       &lt;&lt;doom-os&gt;&gt;

       <span style="color: #81a2be;">:lang</span>
       &lt;&lt;doom-lang&gt;&gt;

       <span style="color: #81a2be;">:email</span>
       &lt;&lt;doom-email&gt;&gt;

       <span style="color: #81a2be;">:app</span>
       &lt;&lt;doom-app&gt;&gt;

       <span style="color: #81a2be;">:config</span>
       &lt;&lt;doom-config&gt;&gt;
       <span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
            <div id="outline-container-org3d777e9" class="outline-5">
              <h5 id="org3d777e9">
                <span class="section-number-5">1.3.1.1.</span> Structure
              </h5>
              <div class="outline-text-5" id="text-1-3-1-1">
                <p>
                  As you may have noticed by this point, this is a
                  <a href="https://en.wikipedia.org/wiki/Literate_programming"
                    >literate</a
                  >
                  configuration. Doom has good support for this which we access
                  though the <code>literate</code> module.
                </p>

                <p>
                  While we&rsquo;re in the <code>:config</code> section,
                  we&rsquo;ll use Dooms nicer defaults, along with the bindings
                  and smartparens behaviour (the flags aren&rsquo;t documented,
                  but they exist).
                </p>
                <div class="org-src-container">
                  <pre class="src src-emacs-lisp" id="org0543366">literate
<span style="color: #b294bb;">(</span>default +bindings +smartparens<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org7c2c3a1" class="outline-5">
              <h5 id="org7c2c3a1">
                <span class="section-number-5">1.3.1.2.</span> Interface
              </h5>
              <div class="outline-text-5" id="text-1-3-1-2">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org5720ae4"
                  ><span style="color: #b294bb;">(</span>company                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">the ultimate code completion backend</span>
 +childframe<span style="color: #b294bb;">)</span>                <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">... when your children are better than you</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">helm                       ; the *other* search engine for love and life</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ido                        ; the other *other* search engine...</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(ivy                         ; a search engine for love and life</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">+icons                      ; ... icons are nice</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">+childframe                 ; ... when your children are better than you</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">+prescient)                 ; ... I know what I want(ed)</span>
<span style="color: #b294bb;">(</span>vertico +icons
         <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">+childframe</span>
         <span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="orge731e2e"
                  ><span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">deft                       ; notational velocity for Emacs</span>
doom                         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">what makes DOOM look the way it does</span>
doom-dashboard               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a nifty splash screen for Emacs</span>
doom-quit                    <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">DOOM quit-message prompts when you quit Emacs</span>
<span style="color: #b294bb;">(</span>emoji                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">&#128578;</span>
 +unicode
 +github<span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">fill-column                ; a `</span><span style="color: #de935f;">fill-column</span><span style="color: #5a5b5a;">' indicator</span>
hl-todo                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">highlight </span><span style="color: #f0c674; font-weight: bold;">TODO</span><span style="color: #5a5b5a;">/</span><span style="color: #cc6666; font-weight: bold;">FIXME</span><span style="color: #5a5b5a;">/</span><span style="color: #b5bd68; font-weight: bold;">NOTE</span><span style="color: #5a5b5a;">/</span><span style="color: #717171; font-weight: bold;">DEPRECATED</span><span style="color: #5a5b5a;">/</span><span style="color: #de935f; font-weight: bold;">HACK</span><span style="color: #5a5b5a;">/</span><span style="color: #b294bb; font-weight: bold;">REVIEW</span>
hydra                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">quick documentation for related commands</span>
indent-guides              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">highlighted indent columns, notoriously slow</span>
<span style="color: #b294bb;">(</span>ligatures
 +pragmata-pro
 +iosevka
 +extra
<span style="color: #b294bb;">)</span>           <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">ligatures and symbols to make your code pretty again</span>
minimap                    <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">show a map of the code on the side</span>
modeline                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">snazzy, Atom-inspired modeline, plus API</span>
nav-flash                    <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">blink the current line after jumping</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">neotree                    ; a project drawer, like NERDTree for vim</span>
ophints                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">highlight the region an operation acts on</span>
<span style="color: #b294bb;">(</span>popup                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">tame sudden yet inevitable temporary windows</span>
 +all                        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">catch all popups that start with an asterix</span>
 +defaults<span style="color: #b294bb;">)</span>                  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">default popup rules</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">(tabs                      ; an tab bar for Emacs</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">+centaur-tabs)           ; ... with prettier tabs</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">treemacs</span>                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a project drawer, like neotree but cooler</span>
 +lsp<span style="color: #b294bb;">)</span>
unicode                    <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">extended unicode support for various languages</span>
<span style="color: #b294bb;">(</span>vc-gutter                    <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">vcs diff in the fringe</span>
 +pretty
 +diff-hl
 <span style="color: #b294bb;">)</span>
vi-tilde-fringe              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">fringe tildes to mark beyond EOB</span>
window-select                <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">visually switch windows</span>
workspaces                   <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">tab emulation, persistence &amp; separate workspaces</span>
zen                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">distraction-free coding or writing</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org6a3a144"
                  ><span style="color: #b294bb;">(</span>evil +everywhere<span style="color: #b294bb;">)</span>           <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">come to the dark side, we have cookies</span>
file-templates               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">auto-snippets for empty files</span>
fold                         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">(nigh) universal code folding</span>
format             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">automated prettiness</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">god                        ; run Emacs commands without modifier keys</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">lispy                      ; vim for lisp, for people who don't like vim</span>
multiple-cursors             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">editing in many places at once</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">objed                      ; text object editing for the innocent</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">parinfer                   ; turn lisp into python, sort of</span>
rotate-text                  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">cycle region at point between text candidates</span>
snippets                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">my elves. They type so I don't have to</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">word-wrap                  ; soft wrapping with language-aware indent</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org83c02c1"
                  ><span style="color: #b294bb;">(</span><span style="color: #de935f;">dired</span>
 +icons
 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">+ranger</span>
 +dirvish
 <span style="color: #b294bb;">)</span>               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">making dired pretty [functional]</span>
electric                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">smarter, keyword-based electric-indent</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">ibuffer</span> +icons<span style="color: #b294bb;">)</span>             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">interactive buffer management</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">undo</span> +tree<span style="color: #b294bb;">)</span>                 <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">persistent, smarter undo for your inevitable mistakes</span>
vc                           <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">version-control and Emacs, sitting in a tree</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="orge29a3fe"
                  >eshell            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a consistent, cross-platform shell (WIP)</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">shell             ; a terminal REPL for Emacs</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">term              ; terminals in Emacs</span>
vterm             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">another terminals in Emacs</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org6edee11"
                  ><span style="color: #b294bb;">(</span>syntax                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">tasing you for every semicolon you forget</span>
 +childframe<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span>spell +aspell<span style="color: #b294bb;">)</span>                        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">tasing you for misspelling mispelling</span>
grammar                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">tasing grammar mistake every you make</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org2b07c85"
                  ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">ansible                      ; a crucible for infrastructure as code</span>
biblio
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(</span>
<span style="color: #cc6666;">debugger</span>                     <span style="color: #5a5b5a;">; </span><span style="color: #cc6666; font-weight: bold;">FIXME</span><span style="color: #5a5b5a;"> stepping through code, to help you add bugs</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">+lsp)</span>
direnv                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">be direct about your environment</span>
docker                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">port everything to containers</span>
editorconfig               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">let someone else argue about tabs vs spaces</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ein                        ; tame Jupyter notebooks with emacs</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">eval</span> +overlay<span style="color: #b294bb;">)</span>              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">run code, run (also, repls)</span>
gist                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">interacting with github gists</span>
<span style="color: #b294bb;">(</span>lookup                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">helps you navigate your code and documentation</span>
 +dictionary                 <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">dictionary/thesaurus is nice</span>
 +docsets<span style="color: #b294bb;">)</span>                   <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">...or in Dash docsets locally</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">lsp</span> +peek<span style="color: #b294bb;">)</span>                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Language Server Protocol</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">magit</span>                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a git porcelain for Emacs</span>
 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">+forge</span>
 <span style="color: #b294bb;">)</span>                     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">interface with git forges</span>
make                         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">run make tasks from Emacs</span>
pass                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">password manager for nerds</span>
pdf                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">pdf enhancements</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">prodigy                    ; </span><span style="color: #cc6666; font-weight: bold;">FIXME</span><span style="color: #5a5b5a;"> managing external services &amp; code builders</span>
rgb                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">creating color strings</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">taskrunner                 ; taskrunner for all your projects</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">terraform                  ; infrastructure as code</span>
tmux                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">an API for interacting with tmux</span>
upload                       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">map local to remote projects via ssh/ftp</span>
tree-sitter
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org4e3182b"
                  ><span style="color: #b294bb;">(</span><span style="color: #81a2be;">:if</span> <span style="color: #cc6666;">IS-MAC</span> macos<span style="color: #b294bb;">)</span>  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">improve compatibility with macOS</span>
<span style="color: #b294bb;">(</span>tty +osc<span style="color: #b294bb;">)</span>                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">improve the terminal Emacs experience</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orga0e4e6b" class="outline-5">
              <h5 id="orga0e4e6b">
                <span class="section-number-5">1.3.1.3.</span> Language support
              </h5>
              <div class="outline-text-5" id="text-1-3-1-3">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="orgbd78de8"
                  ><span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">agda              ; types of types of types of types...</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">assembly          ; assembly for fun or debugging</span>
<span style="color: #b294bb;">(</span>cc +lsp +tree-sitter<span style="color: #b294bb;">)</span>                <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">C/C++/Obj-C madness</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">clojure           ; java with a lisp</span>
common-lisp       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">if you've seen one lisp, you've seen them all</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">coq               ; proofs-as-programs</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">crystal           ; ruby at the speed of c</span>
<span style="color: #b294bb;">(</span>csharp
 +lsp
 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">+unity</span>
 +tree-sitter
 +dotnet<span style="color: #b294bb;">)</span>            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">unity, .NET, and mono shenanigans</span>
data              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">config/data formats</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(dart +flutter +lsp)   ; paint ui and not much else</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">erlang            ; an elegant language for a more civilized age</span>
ess                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">emacs speaks statistics</span>
<span style="color: #b294bb;">(</span>elixir
 +lsp
 <span style="color: #b294bb;">)</span>                                        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">erlang done right</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">elm               ; care for a cup of TEA?</span>
emacs-lisp        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">drown in parentheses</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ess               ; emacs speaks statistics</span>
<span style="color: #b294bb;">(</span>fsharp           <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">ML stands for Microsoft's Language</span>
 +lsp
 <span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span>go +lsp +tree-sitter<span style="color: #b294bb;">)</span>                <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">the hipster dialect</span>
<span style="color: #b294bb;">(</span>haskell             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a language that's lazier than I am</span>
 +lsp
 +tree-sitter
 <span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">hy                ; readability of scheme w/ speed of python</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">idris             ;</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">(java +meghanada) ; the poster child for carpal tunnel syndrome</span>
<span style="color: #b294bb;">(</span>javascript
 +lsp
 +tree-sitter
 <span style="color: #b294bb;">)</span>        <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">all(hope(abandon(ye(who(enter(here))))))</span>

<span style="color: #b294bb;">(</span>json +lsp +tree-sitter<span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">julia             ; a better, faster MATLAB</span>
<span style="color: #b294bb;">(</span>kotlin +lsp +tree-sitter<span style="color: #b294bb;">)</span>            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a better, slicker Java(Script)</span>
<span style="color: #b294bb;">(</span>latex
 +lsp
 +cdlatex
 +latexmk
 +fold<span style="color: #b294bb;">)</span>            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">writing papers in Emacs has never been so fun</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ledger            ; an accounting system in Emacs</span>
lua               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">one-based indices? one-based indices</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">markdown</span> +grip<span style="color: #b294bb;">)</span>         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">writing docs for people to ignore</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">nim               ; python + lisp at the speed of c</span>
<span style="color: #b294bb;">(</span>nix
 +tree-sitter
 <span style="color: #b294bb;">)</span>               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">I hereby declare "nix geht mehr!"</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ocaml             ; an objective camel</span>
<span style="color: #b294bb;">(</span>org              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">organize your plain life in plain text</span>
 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">+pretty       ; Disable since I use org-modern</span>
 +pandoc
 +dragndrop       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">file drag &amp; drop support</span>
 +noter                      <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">enhanced PDF notetaking</span>
 +present         <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">using Emacs for presentations</span>
 +gnuplot
 +journal
 +roam2
 <span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">perl              ; write code no one else can comprehend</span>
<span style="color: #b294bb;">(</span>php +lsp +tree-sitter<span style="color: #b294bb;">)</span>               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">perl's insecure younger brother</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">plantuml          ; diagrams for confusing people more</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">purescript        ; javascript, but functional</span>
<span style="color: #b294bb;">(</span>python
 +lsp
 +tree-sitter
 <span style="color: #b294bb;">)</span>           <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">beautiful is better than ugly</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">qt                ; the '</span><span style="color: #de935f;">cutest</span><span style="color: #5a5b5a;">' gui framework ever</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">racket            ; a DSL for DSLs</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">rest              ; Emacs as a REST client</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">ruby              ; 1.step {|i| p "Ruby is #{i.even? ? '</span><span style="color: #de935f;">love</span><span style="color: #5a5b5a;">' : '</span><span style="color: #de935f;">life</span><span style="color: #5a5b5a;">'}"}</span>
<span style="color: #b294bb;">(</span>rust
 +lsp
 +tree-sitter
 <span style="color: #b294bb;">)</span>            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Fe2O3.unwrap().unwrap().unwrap().unwrap()</span>
<span style="color: #b294bb;">(</span>scala +lsp<span style="color: #b294bb;">)</span>             <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">java, but good</span>
scheme            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">a fully conniving family of lisps</span>
<span style="color: #b294bb;">(</span>sh +lsp +tree-sitter<span style="color: #b294bb;">)</span>                <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">she sells {ba,z,fi}sh shells on the C xor</span>
solidity          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">do you need a blockchain? No.</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">swift             ; who asked for emoji variables?</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">terra             ; Earth and Moon in alignment for performance.</span>
<span style="color: #b294bb;">(</span>web +lsp +tree-sitter<span style="color: #b294bb;">)</span>              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">the tubes</span>
<span style="color: #b294bb;">(</span>yaml +lsp +tree-sitter<span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">graphql</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">vala              ; GObjective-C</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgfe1e063" class="outline-5">
              <h5 id="orgfe1e063">
                <span class="section-number-5">1.3.1.4.</span> Everything in
                Emacs
              </h5>
              <div class="outline-text-5" id="text-1-3-1-4">
                <p>
                  It&rsquo;s just too convenient being able to have everything
                  in Emacs. I couldn&rsquo;t resist the Email and Feed modules.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org0ccf299"
                  ><span style="color: #b294bb;">(</span><span style="color: #81a2be;">mu4e</span> +org +gmail<span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">notmuch</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">(wanderlust +gmail)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre class="src src-emacs-lisp" id="org314d66b">calendar
everywhere                   <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">*leave* Emacs!? You must be joking.</span>
irc                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">how neckbeards socialize</span>
<span style="color: #b294bb;">(</span>rss +org<span style="color: #b294bb;">)</span>                   <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">emacs as an RSS reader</span>
<span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">twitter                    ; twitter client https://twitter.com/vnought</span>
</pre>
                </div>
              </div>
            </div>
          </div>

          <div id="outline-container-org609c739" class="outline-4">
            <h4 id="org609c739">
              <span class="section-number-4">1.3.2.</span> Visual settings
            </h4>
            <div class="outline-text-4" id="text-1-3-2"></div>
            <div id="outline-container-org3b71662" class="outline-5">
              <h5 id="org3b71662">
                <span class="section-number-5">1.3.2.1.</span> Font Face
              </h5>
              <div class="outline-text-5" id="text-1-3-2-1">
                <p>Use font aliases defined in fontconfig.</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq!</span> <span style="color: #cc6666;">doom-font</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">font-spec</span> <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"monospace"</span> <span style="color: #81a2be;">:size</span> <span style="color: #de935f; font-weight: bold;">16</span><span style="color: #81a2be;">)</span>
       <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">doom-big-font (font-spec :family "monospace" :size 26)</span>
       <span style="color: #cc6666;">doom-variable-pitch-font</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">font-spec</span> <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"sans"</span> <span style="color: #81a2be;">:size</span> <span style="color: #de935f; font-weight: bold;">16</span><span style="color: #81a2be;">)</span>
       <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">doom-unicode-font (font-spec :family "JuliaMono")</span>
       <span style="color: #cc6666;">doom-unicode-font</span> <span style="color: #cc6666;">doom-variable-pitch-font</span>
       <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">doom-unicode-font doom-font</span>
       <span style="color: #cc6666;">doom-serif-font</span> <span style="color: #cc6666;">doom-variable-pitch-font</span>
       <span style="color: #b294bb;">)</span>

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Fix cyryllic fonts</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">if</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">display-graphic-p</span><span style="color: #81a2be;">)</span>

    <span style="color: #81a2be;">(</span><span style="color: #b294bb;">dolist</span> <span style="color: #de935f;">(</span>charset <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span>koi8<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
      <span style="color: #de935f;">(</span><span style="color: #de935f;">set-fontset-font</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">frame-parameter</span> nil <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">font</span><span style="color: #b5bd68;">)</span>
                        charset <span style="color: #b5bd68;">(</span><span style="color: #de935f;">font-spec</span> <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"sans"</span> <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">90</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">after!</span> unicode-fonts
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">dolist</span> <span style="color: #b5bd68;">(</span>unicode-block <span style="color: #c5c8c6;">'</span><span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"Cyrillic"</span>
                             <span style="color: #b5bd68;">"Cyrillic Supplement"</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">push</span> <span style="color: #b5bd68;">"sans"</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">cadr</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">assoc</span> unicode-block <span style="color: #cc6666;">unicode-fonts-block-font-mapping</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orge2d015e" class="outline-5">
              <h5 id="orge2d015e">
                <span class="section-number-5">1.3.2.2.</span> Theme and
                modeline
              </h5>
              <div class="outline-text-5" id="text-1-3-2-2">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-theme</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">doom-tomorrow-night</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>I don&rsquo;t need it to tell me its UTF-8</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">I don't need it to tell me its UTF-8</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-modeline-buffer-encoding</span> nil
      +modeline-encoding nil<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org91805eb" class="outline-5">
              <h5 id="org91805eb">
                <span class="section-number-5">1.3.2.3.</span> Miscellaneous
              </h5>
              <div class="outline-text-5" id="text-1-3-2-3">
                <p>
                  Relative line numbers are fantastic for knowing how far away
                  line numbers are, then <code>ESC 12 &lt;UP&gt;</code> gets you
                  exactly where you think.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">display-line-numbers-type</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">relative</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>Prevents some cases of Emacs flickering</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">default-frame-alist</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>inhibit-double-buffering . t<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>Don&rsquo;t blink the cursor, it&rsquo;s too distracting.</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">visible-cursor</span> nil
      <span style="color: #cc6666;">blink-cursor-mode</span> <span style="color: #de935f; font-weight: bold;">-1</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgc66c08b" class="outline-5">
              <h5 id="orgc66c08b">
                <span class="section-number-5">1.3.2.4.</span> Ligatures
              </h5>
              <div class="outline-text-5" id="text-1-3-2-4">
                <p>
                  I really don&rsquo;t like some ligatures so disabling them
                  here.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">plist-put!</span> <span style="color: #cc6666;">+ligatures-extra-symbols</span>
  <span style="color: #81a2be;">:int</span>           nil
  <span style="color: #81a2be;">:name</span>          nil
  <span style="color: #81a2be;">:composition</span>   nil
  <span style="color: #81a2be;">:map</span>           nil
  <span style="color: #81a2be;">:not</span>           nil
  <span style="color: #81a2be;">:and</span>           nil
  <span style="color: #81a2be;">:or</span>            nil
  <span style="color: #81a2be;">:for</span>           nil
  <span style="color: #81a2be;">:return</span>        nil
  <span style="color: #81a2be;">:yield</span>         nil
  <span style="color: #81a2be;">:diff</span>          nil
  <span style="color: #81a2be;">:tuple</span>         nil
  <span style="color: #81a2be;">:pipe</span>          nil
<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orga0e0d9b" class="outline-5">
              <h5 id="orga0e0d9b">
                <span class="section-number-5">1.3.2.5.</span> Scrolling
              </h5>
              <div class="outline-text-5" id="text-1-3-2-5">
                <p>Smooth scrolling in emacs</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> good-scroll<span style="color: #b294bb;">)</span>
</pre>
                </div>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> good-scroll
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">good-scroll-mode</span><span style="color: #81a2be;">)</span>
<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org2fae20f" class="outline-5">
              <h5 id="org2fae20f">
                <span class="section-number-5">1.3.2.6.</span> Prettier page
                breaks
              </h5>
              <div class="outline-text-5" id="text-1-3-2-6">
                <p>
                  In some files, <code>^L</code> appears as a page break
                  character. This isn&rsquo;t that visually appealing, and Steve
                  Purcell has been nice enough to make a package to display
                  these as horizontal rules.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> page-break-lines <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"purcell/page-break-lines"</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"79eca86e0634..."</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> page-break-lines
  <span style="color: #81a2be;">:commands</span> page-break-lines-mode
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">autoload</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">turn-on-page-break-lines-mode</span> <span style="color: #b5bd68;">"page-break-lines"</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> page-break-lines-max-width <span style="color: #cc6666;">fill-column</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"g"</span>
        <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Prev page break"</span> <span style="color: #81a2be;">:nv</span> <span style="color: #b5bd68;">"["</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">backward-page</span>
        <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Next page break"</span> <span style="color: #81a2be;">:nv</span> <span style="color: #b5bd68;">"]"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">forward-page</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>

          <div id="outline-container-org4f9b492" class="outline-4">
            <h4 id="org4f9b492">
              <span class="section-number-4">1.3.3.</span> Allow babel execution
              in CLI actions
            </h4>
            <div class="outline-text-4" id="text-1-3-3">
              <p>
                In this config I sometimes generate code to include in my
                config. This works nicely, but for it to work with
                <code>doom sync</code> et. al. I need to make sure that Org
                doesn&rsquo;t try to confirm that I want to allow evaluation (I
                do!).
              </p>

              <p>
                Thankfully Doom supports <code>$DOOMDIR/cli.el</code> file which
                is sourced every time a CLI command is run, so we can just
                enable evaluation by setting
                <code>org-confirm-babel-evaluate</code> to
                <code>nil</code> there. While we&rsquo;re at it, we should
                silence <code>org-babel-execute-src-block</code> to avoid
                polluting the output.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #5a5b5a;">;;; </span><span style="color: #5a5b5a;">cli.el -*- lexical-binding: t; -*-</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-confirm-babel-evaluate</span> nil<span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom-shut-up-a</span> <span style="color: #81a2be;">(</span>orig-fn <span style="color: #f0c674;">&amp;rest</span> args<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">quiet!</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">apply</span> orig-fn args<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">advice-add</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-babel-execute-src-block</span> <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">doom-shut-up-a</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>
        <div id="outline-container-org99e5d54" class="outline-3">
          <h3 id="org99e5d54">
            <span class="section-number-3">1.4.</span> Performance
          </h3>
          <div class="outline-text-3" id="text-1-4">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">gcmh-high-cons-threshold</span> <span style="color: #cc6666;">most-positive-fixnum</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">max-specpdl-size</span> <span style="color: #de935f; font-weight: bold;">100000</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org8919c85" class="outline-3">
          <h3 id="org8919c85">
            <span class="section-number-3">1.5.</span> Other Things
          </h3>
          <div class="outline-text-3" id="text-1-5"></div>
          <div id="outline-container-org088c595" class="outline-4">
            <h4 id="org088c595">
              <span class="section-number-4">1.5.1.</span> Editor interaction
            </h4>
            <div class="outline-text-4" id="text-1-5-1"></div>
            <div id="outline-container-org003a069" class="outline-5">
              <h5 id="org003a069">
                <span class="section-number-5">1.5.1.1.</span> Mouse buttons
              </h5>
              <div class="outline-text-5" id="text-1-5-1-1">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">[</span>mouse-8<span style="color: #81a2be;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">better-jumper-jump-backward</span>
      <span style="color: #81a2be;">:n</span> <span style="color: #81a2be;">[</span>mouse-9<span style="color: #81a2be;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">better-jumper-jump-forward</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>
          <div id="outline-container-org7fc617b" class="outline-4">
            <h4 id="org7fc617b">
              <span class="section-number-4">1.5.2.</span> Splash screen
            </h4>
            <div class="outline-text-4" id="text-1-5-2">
              <p>Splash image</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">fancy-splash-image</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">concat</span> <span style="color: #cc6666;">doom-private-dir</span> <span style="color: #b5bd68;">"splash.png"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>Hide modeline and cursor</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">+doom-dashboard-functions</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">doom-dashboard-widget-loaded</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">+doom-dashboard-mode-hook</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">hide-mode-line-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">hl-line-mode</span> <span style="color: #de935f; font-weight: bold;">-1</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">+doom-dashboard-mode-hook</span> <span style="color: #cc6666;">evil-normal-state-cursor</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">list</span> nil<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-org139369a" class="outline-4">
            <h4 id="org139369a">
              <span class="section-number-4">1.5.3.</span> Daemon
            </h4>
            <div class="outline-text-4" id="text-1-5-3"></div>
            <div id="outline-container-org4104ee6" class="outline-5">
              <h5 id="org4104ee6">
                <span class="section-number-5">1.5.3.1.</span> Dashboard
              </h5>
              <div class="outline-text-5" id="text-1-5-3-1">
                <p>
                  I&rsquo;m not sure quite why it happens, but after a bit it
                  seems that new Emacsclient frames start on the
                  <code>*scratch*</code> buffer instead of the dashboard. I
                  prefer the dashboard, so let&rsquo;s ensure that&rsquo;s
                  always switched to in new frames.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                    id="org84ff706"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">when</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">daemonp</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">server-after-make-frame-hook</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">switch-to-buffer</span> <span style="color: #cc6666;">+doom-dashboard-name</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="outline-container-org116981c" class="outline-2">
        <h2 id="org116981c">
          <span class="section-number-2">2.</span> Package loading
        </h2>
        <div class="outline-text-2" id="text-2">
          <p>This file shouldn&rsquo;t be byte compiled.</p>
          <div class="org-src-container">
            <pre
              class="src src-emacs-lisp"
            ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">-*- no-byte-compile: t; -*-</span>
</pre>
          </div>
        </div>
        <div id="outline-container-orgf823c52" class="outline-3">
          <h3 id="orgf823c52">
            <span class="section-number-3">2.1.</span> General packages
          </h3>
          <div class="outline-text-3" id="text-2-1"></div>
          <div id="outline-container-orgebadd40" class="outline-4">
            <h4 id="orgebadd40">
              <span class="section-number-4">2.1.1.</span> Fun
            </h4>
            <div class="outline-text-4" id="text-2-1-1">
              <p>
                Every so often, you want everyone else to <i>know</i> that
                you&rsquo;re typing, or just to amuse oneself. Introducing:
                typewriter sounds!
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> <span style="color: #cc6666;">selectric-mode</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>Practice typing speed</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> speed-type<span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>
                Why not flash words on the screen. Why not &#x2014; hey, it
                could be fun.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> spray<span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>
                For some reason, I find myself demoing Emacs every now and then.
                Showing what keyboard stuff I&rsquo;m doing on-screen seems
                helpful. While
                <a href="https://gitlab.com/screenkey/screenkey">screenkey</a>
                does exist, having something that doesn&rsquo;t cover up screen
                content is nice.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> keycast<span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>
                In a similar manner,
                <a href="https://gitlab.com/ambrevar/emacs-gif-screencast"
                  >gif-screencast</a
                >
                may come in handy.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> gif-screencast<span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>

          <div id="outline-container-orgc4c419d" class="outline-4">
            <h4 id="orgc4c419d">
              <span class="section-number-4">2.1.2.</span> Features
            </h4>
            <div class="outline-text-4" id="text-2-1-2"></div>
            <div id="outline-container-org65c2b71" class="outline-5">
              <h5 id="org65c2b71">
                <span class="section-number-5">2.1.2.1.</span> CalcTeX
              </h5>
              <div class="outline-text-5" id="text-2-1-2-1">
                <p>This is a nice extension to <code>calc</code></p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> calctex <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"johnbcoughlin/calctex"</span>
                           <span style="color: #81a2be;">:files</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"*.el"</span> <span style="color: #b5bd68;">"calctex/*.el"</span> <span style="color: #b5bd68;">"calctex-contrib/*.el"</span> <span style="color: #b5bd68;">"org-calctex/*.el"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgd1a1fab" class="outline-5">
              <h5 id="orgd1a1fab">
                <span class="section-number-5">2.1.2.2.</span> Info colors
              </h5>
              <div class="outline-text-5" id="text-2-1-2-2">
                <p>
                  This makes manual pages nicer to look at :) Variable pitch
                  fontification + colouring
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> info-colors <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"47ee73cc19b1..."</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-orgbb3eb80" class="outline-5">
              <h5 id="orgbb3eb80">
                <span class="section-number-5">2.1.2.3.</span> Calibre and ebook
                reading
              </h5>
              <div class="outline-text-5" id="text-2-1-2-3">
                <p>
                  For managing my ebooks, I&rsquo;ll hook into the
                  well-established ebook library manager
                  <a href="https://calibre-ebook.com/">calibre</a>. A number of
                  Emacs clients for this exist, but this seems like a good
                  option.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> calibredb<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Then for reading them, the only currently viable options seems
                  to be <a href="https://depp.brause.cc/nov.el/">nov.el</a>.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> nov<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Together these should give me a rather good experience reading
                  ebooks.
                </p>
              </div>
            </div>
            <div id="outline-container-org06f5371" class="outline-5">
              <h5 id="org06f5371">
                <span class="section-number-5">2.1.2.4.</span> Screenshots
              </h5>
              <div class="outline-text-5" id="text-2-1-2-4">
                <p>This makes it a breeze to take lovely screenshots.</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> screenshot <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"tecosaur/screenshot"</span> <span style="color: #81a2be;">:build</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">:not</span> compile<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgede6dc9" class="outline-5">
              <h5 id="orgede6dc9">
                <span class="section-number-5">2.1.2.5.</span> Theme schedule
              </h5>
              <div class="outline-text-5" id="text-2-1-2-5">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> circadian<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgc714a0b" class="outline-5">
              <h5 id="orgc714a0b">
                <span class="section-number-5">2.1.2.6.</span> Non-default
                keyboard layouts support
              </h5>
              <div class="outline-text-5" id="text-2-1-2-6">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> reverse-im<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgd87c73b" class="outline-5">
              <h5 id="orgd87c73b">
                <span class="section-number-5">2.1.2.7.</span> Kdeconnect
              </h5>
              <div class="outline-text-5" id="text-2-1-2-7">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> kdeconnect<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org73d2b5d" class="outline-5">
              <h5 id="org73d2b5d">
                <span class="section-number-5">2.1.2.8.</span> Imenu
              </h5>
              <div class="outline-text-5" id="text-2-1-2-8">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> imenu-list<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgda41a4c" class="outline-5">
              <h5 id="orgda41a4c">
                <span class="section-number-5">2.1.2.9.</span> Deadgrep
              </h5>
              <div class="outline-text-5" id="text-2-1-2-9">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> deadgrep<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgf99a976" class="outline-5">
              <h5 id="orgf99a976">
                <span class="section-number-5">2.1.2.10.</span> Company
              </h5>
              <div class="outline-text-5" id="text-2-1-2-10"></div>
              <div id="outline-container-orgda75a4d" class="outline-6">
                <h6 id="orgda75a4d">
                  <span class="section-number-6">2.1.2.10.1.</span> Prescient
                </h6>
                <div class="outline-text-6" id="text-2-1-2-10-1">
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> company-prescient<span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-org6131ecf" class="outline-6">
                <h6 id="org6131ecf">
                  <span class="section-number-6">2.1.2.10.2.</span> Fuzzy
                </h6>
                <div class="outline-text-6" id="text-2-1-2-10-2">
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> company-fuzzy<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> flx<span style="color: #b294bb;">)</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(package! flx-rs)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-orgf6b9c3f" class="outline-6">
                <h6 id="orgf6b9c3f">
                  <span class="section-number-6">2.1.2.10.3.</span> Math
                </h6>
                <div class="outline-text-6" id="text-2-1-2-10-3">
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> company-math<span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
            </div>
            <div id="outline-container-org2be4301" class="outline-5">
              <h5 id="org2be4301">
                <span class="section-number-5">2.1.2.11.</span> Top in emacs
              </h5>
              <div class="outline-text-5" id="text-2-1-2-11">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> <span style="color: #cc6666;">explain-pause-mode</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgce1550a" class="outline-5">
              <h5 id="orgce1550a">
                <span class="section-number-5">2.1.2.12.</span> Google-translate
              </h5>
              <div class="outline-text-5" id="text-2-1-2-12">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> go-translate<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org4727326" class="outline-5">
              <h5 id="org4727326">
                <span class="section-number-5">2.1.2.13.</span> Timesheet
              </h5>
              <div class="outline-text-5" id="text-2-1-2-13">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> timesheet<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org3c8d5e4" class="outline-5">
              <h5 id="org3c8d5e4">
                <span class="section-number-5">2.1.2.14.</span> Wakatime
              </h5>
              <div class="outline-text-5" id="text-2-1-2-14">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> <span style="color: #cc6666;">wakatime-mode</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgc1d4913" class="outline-5">
              <h5 id="orgc1d4913">
                <span class="section-number-5">2.1.2.15.</span> iscroll
              </h5>
              <div class="outline-text-5" id="text-2-1-2-15">
                <p>
                  Sometimes it&rsquo;s nice to have smooth scrolling over images
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> iscroll <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github
                           <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"casouri/iscroll"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="outline-container-org67392f0" class="outline-3">
          <h3 id="org67392f0">
            <span class="section-number-3">2.2.</span> Language packages
          </h3>
          <div class="outline-text-3" id="text-2-2"></div>
          <div id="outline-container-org4acc851" class="outline-4">
            <h4 id="org4acc851">
              <span class="section-number-4">2.2.1.</span> LaTeX
            </h4>
            <div class="outline-text-4" id="text-2-2-1">
              <p>For mathematical convenience, WIP</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> aas <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"ymarco/auto-activating-snippets"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> laas <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:local-repo</span> <span style="color: #b5bd68;">" tecosaur/LaTeX-auto-activating-snippets "</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
              <p>And some basic config</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> aas
  <span style="color: #81a2be;">:commands</span> <span style="color: #cc6666;">aas-mode</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> laas
  <span style="color: #81a2be;">:hook</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #de935f;">org-mode</span> . <span style="color: #cc6666;">laas-mode</span><span style="color: #de935f;">)</span>
         <span style="color: #de935f;">(</span><span style="color: #de935f;">org-mode</span> . aas-activate-for-major-mode<span style="color: #de935f;">)</span>
         <span style="color: #de935f;">(</span><span style="color: #de935f;">LaTeX-mode</span> . <span style="color: #cc6666;">laas-mode</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">laas-tex-fold-maybe</span> <span style="color: #de935f;">()</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">equal</span> <span style="color: #b5bd68;">"/"</span> <span style="color: #cc6666;">aas-transient-snippet-key</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">+latex-fold-last-macro-a</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">aas-post-snippet-expand-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">laas-tex-fold-maybe</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-orgaa2aa55" class="outline-4">
            <h4 id="orgaa2aa55">
              <span class="section-number-4">2.2.2.</span> Org Mode
            </h4>
            <div class="outline-text-4" id="text-2-2-2"></div>
            <div id="outline-container-org18b2205" class="outline-5">
              <h5 id="org18b2205">
                <span class="section-number-5">2.2.2.1.</span> Improve
                agenda/capture
              </h5>
              <div class="outline-text-5" id="text-2-2-2-1">
                <p>The agenda is nice, but a souped up version is nicer.</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-super-agenda<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Similarly <code>doct</code> (Declarative Org Capture
                  Templates) seems to be a nicer way to set up org-capture.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> doct
  <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"progfolio/doct"</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org043de87" class="outline-5">
              <h5 id="org043de87">
                <span class="section-number-5">2.2.2.2.</span> Visuals
              </h5>
              <div class="outline-text-5" id="text-2-2-2-2">
                <p>
                  For automatically toggling LaTeX fragment previews
                  there&rsquo;s this nice package
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-fragtog <span style="color: #81a2be;">:pin</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>Then for pretty markers</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-appear <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"awth13/org-appear"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  <code>org-superstar-mode</code> is great. While we&rsquo;re at
                  it we may as well make tags prettier as well :)
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-pretty-tags<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  There&rsquo;s this nice package that can provide nice syntax
                  highlighting with LaTeX exports.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> engrave-faces <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"tecosaur/engrave-faces"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> engrave-faces-latex
  <span style="color: #81a2be;">:after</span> ox-latex<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgf13ec19" class="outline-5">
              <h5 id="orgf13ec19">
                <span class="section-number-5">2.2.2.3.</span> Extra
                functionality
              </h5>
              <div class="outline-text-5" id="text-2-2-2-3">
                <p>
                  Because of the
                  <i
                    ><a
                      href="https://github.com/commonmark/commonmark-spec/wiki/markdown-flavors"
                      >lovely variety in markdown implementations</a
                    ></i
                  >
                  there isn&rsquo;t actually such a thing a standard table spec
                  &#x2026; or standard anything really. Because
                  <code>org-md</code> is a goody-two-shoes, it just uses HTML
                  for all these non-standardised elements (a lot of them). So
                  <code>ox-gfm</code> is handy for exporting markdown with all
                  the features that GitHub has.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> ox-gfm<span style="color: #b294bb;">)</span>
</pre>
                </div>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> ox-gfm
  <span style="color: #81a2be;">:after</span> org<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>Now and then citations need to happen</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-ref<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>Came across this and &#x2026; it&rsquo;s cool</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-graph-view <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"alphapapa/org-graph-view"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  I <b>need</b> this in my life. It take a URL to a recipe from
                  a common site, and inserts an org-ified version at point.
                  Isn&rsquo;t that just great.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-chef<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Sometimes I&rsquo;m given non-org files, that&rsquo;s very
                  sad. Luckily Pandoc offers a way to make that right again, and
                  this package makes that even easier to do.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-pandoc-import <span style="color: #81a2be;">:recipe</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"tecosaur/org-pandoc-import"</span> <span style="color: #81a2be;">:files</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"*.el"</span> <span style="color: #b5bd68;">"filters"</span> <span style="color: #b5bd68;">"preprocessors"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-pandoc-import
  <span style="color: #81a2be;">:after</span> org<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> ob-mermaid<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-modern<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-appear <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"awth13/org-appear"</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"60ba267c5da3..."</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>It&rsquo;s nice to have UI for org-roam</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-roam-ui<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> websocket<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-transclusion<span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>
          <div id="outline-container-org806cd22" class="outline-4">
            <h4 id="org806cd22">
              <span class="section-number-4">2.2.3.</span> Systemd
            </h4>
            <div class="outline-text-4" id="text-2-2-3">
              <p>For editing systemd unit files</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> systemd <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"b6ae63a23660..."</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-orgf7bc9f8" class="outline-4">
            <h4 id="orgf7bc9f8">
              <span class="section-number-4">2.2.4.</span> Graphviz
            </h4>
            <div class="outline-text-4" id="text-2-2-4">
              <p>
                Graphviz is a nice method of visualising simple graphs, based on
                plaintext
                <code>.dot</code> / <code>.gv</code> files.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> graphviz-dot-mode <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"3642a0a5f41a..."</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-org7067be3" class="outline-4">
            <h4 id="org7067be3">
              <span class="section-number-4">2.2.5.</span> Authinfo
            </h4>
            <div class="outline-text-4" id="text-2-2-5">
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> authinfo-color-mode
  <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span>  <span style="color: #b5bd68;">"tecosaur/authinfo-color-mode"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
              <p>Now we just need to load it appropriately.</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> authinfo-color-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"authinfo.gpg\\'"</span> . authinfo-color-mode<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:init</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">advice-add</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">authinfo-mode</span> <span style="color: #81a2be;">:override</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">authinfo-color-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="outline-container-org01eab99" class="outline-2">
        <h2 id="org01eab99">
          <span class="section-number-2">3.</span> Package configuration
        </h2>
        <div class="outline-text-2" id="text-3"></div>
        <div id="outline-container-org5a94f54" class="outline-3">
          <h3 id="org5a94f54">
            <span class="section-number-3">3.1.</span> Abbrev mode
          </h3>
          <div class="outline-text-3" id="text-3-1">
            <p>
              Thanks to
              <a
                href="https://emacs.stackexchange.com/questions/45462/use-a-single-abbrev-table-for-multiple-modes/45476#45476"
                >use a single abbrev-table for multiple modes? - Emacs Stack
                Exchange</a
              >
              I have the following.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package</span> abbrev
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">abbrev-mode</span> t<span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">a hook funtion that sets the abbrev-table to org-mode-abbrev-table</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">whenever the major mode is a text mode</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">tec/set-text-mode-abbrev-table</span> <span style="color: #de935f;">()</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">derived-mode-p</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">text-mode</span><span style="color: #b5bd68;">)</span>
        <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">local-abbrev-table</span> <span style="color: #cc6666;">org-mode-abbrev-table</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:commands</span> <span style="color: #cc6666;">abbrev-mode</span>
  <span style="color: #81a2be;">:hook</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">abbrev-mode</span> . tec/set-text-mode-abbrev-table<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">abbrev-file-name</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">expand-file-name</span> <span style="color: #b5bd68;">"abbrev.el"</span> <span style="color: #cc6666;">doom-private-dir</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">save-abbrevs</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">silently</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org409f122" class="outline-3">
          <h3 id="org409f122">
            <span class="section-number-3">3.2.</span> Avy
          </h3>
          <div class="outline-text-3" id="text-3-2">
            <p>
              I want avy to jump though windows and auto-jump when theres 1
              candidate
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span>
 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Avy can jump through windows</span>
 <span style="color: #cc6666;">avy-all-windows</span> t
 <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Avy can auto-jump when theres 1 candidate</span>
 <span style="color: #cc6666;">avy-single-candidate-jump</span> t<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orga4a772b" class="outline-3">
          <h3 id="orga4a772b">
            <span class="section-number-3">3.3.</span> Calc
          </h3>
          <div class="outline-text-3" id="text-3-3">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">calc-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calctex-mode</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org7eaf276" class="outline-3">
          <h3 id="org7eaf276">
            <span class="section-number-3">3.4.</span> Circadian (Theme
            schedule)
          </h3>
          <div class="outline-text-3" id="text-3-4">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> circadian
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">circadian-themes</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"8:00"</span> . doom-tomorrow-night<span style="color: #b5bd68;">)</span>
                           <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"20:30"</span> . doom-tomorrow-night<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">circadian-setup</span><span style="color: #81a2be;">)</span>
<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgca65bb4" class="outline-3">
          <h3 id="orgca65bb4">
            <span class="section-number-3">3.5.</span> Company
          </h3>
          <div class="outline-text-3" id="text-3-5">
            <p>Some settings</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> company
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span>
   <span style="color: #cc6666;">company-show-numbers</span> t
   <span style="color: #cc6666;">company-minimum-prefix-length</span> <span style="color: #de935f; font-weight: bold;">2</span>
   <span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>
              Now, the improvements from <code>precedent</code> are mostly from
              remembering history, so let&rsquo;s improve that memory.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">history-length</span> <span style="color: #de935f; font-weight: bold;">1000</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-default</span> <span style="color: #cc6666;">prescient-history-length</span> <span style="color: #de935f; font-weight: bold;">1000</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Use prescient sorting</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package</span> company-prescient
  <span style="color: #81a2be;">:after</span> company
  <span style="color: #81a2be;">:hook</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">company-mode</span> . <span style="color: #cc6666;">company-prescient-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Math support</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> company-math
  <span style="color: #81a2be;">:after</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:any</span> org-mode TeX-mode<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-math-symbols-latex</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">TeX-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-math-symbols-latex</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-latex-commands</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-company-backend!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">TeX-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">company-latex-commands</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">company-tooltip-align-annotations</span> t<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> company-math-allow-latex-symbols-in-faces t<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
          <div id="outline-container-org87cedb7" class="outline-4">
            <h4 id="org87cedb7">
              <span class="section-number-4">3.5.1.</span> ESS
            </h4>
          </div>
        </div>
        <div id="outline-container-orgfc2bdc1" class="outline-3">
          <h3 id="orgfc2bdc1">
            <span class="section-number-3">3.6.</span> Deadgrep
          </h3>
          <div class="outline-text-3" id="text-3-6">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> deadgrep
  <span style="color: #81a2be;">:defer</span> t
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span>
   <span style="color: #de935f;">(</span><span style="color: #81a2be;">:leader</span>
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Search via deadgrep"</span> <span style="color: #b5bd68;">"s &lt;f5&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">deadgrep</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org42dfe0f" class="outline-3">
          <h3 id="org42dfe0f">
            <span class="section-number-3">3.7.</span> Direnv
          </h3>
          <div class="outline-text-3" id="text-3-7">
            <p>Silence all that useless output</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> direnv-always-show-summary nil<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org3011cc4" class="outline-3">
          <h3 id="org3011cc4">
            <span class="section-number-3">3.8.</span> Doom modeline
          </h3>
          <div class="outline-text-3" id="text-3-8">
            <p>
              Very nice and pretty, however I think the PDF modeline could do
              with tweaking. I raised
              <a href="https://github.com/seagle0128/doom-modeline/pull/425"
                >an issue</a
              >
              on this, however the response was basically &ldquo;put your
              preferences in your personal config, the current default is
              sensible&rdquo; &#x2014; so here we are.
            </p>

            <p>
              First up I&rsquo;m going to want a segment for just the buffer
              file name, and a PDF icon. Then we&rsquo;ll redefine two functions
              used to generate the modeline.
            </p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> doom-modeline
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">doom-modeline-def-segment</span> <span style="color: #de935f;">buffer-name</span>
    <span style="color: #717171;">"Display the current buffer's name, without any other information."</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span>
     <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">doom-modeline-spc</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">doom-modeline--buffer-name</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">doom-modeline-def-segment</span> <span style="color: #de935f;">pdf-icon</span>
    <span style="color: #717171;">"PDF icon from all-the-icons."</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span>
     <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">doom-modeline-spc</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #cc6666;">doom-modeline-icon</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">octicon</span> <span style="color: #b5bd68;">"file-pdf"</span> nil nil
                         <span style="color: #81a2be;">:face</span> <span style="color: #b294bb;">(</span><span style="color: #b294bb;">if</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">doom-modeline--active</span><span style="color: #81a2be;">)</span>
                                   <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-red</span>
                                 <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mode-line-inactive</span><span style="color: #b294bb;">)</span>
                         <span style="color: #81a2be;">:v-adjust</span> <span style="color: #de935f; font-weight: bold;">0.02</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom-modeline-update-pdf-pages</span> <span style="color: #de935f;">()</span>
    <span style="color: #717171;">"Update PDF pages."</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">doom-modeline--pdf-pages</span>
          <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b294bb;">(</span><span style="color: #81a2be;">(</span>current-page-str <span style="color: #de935f;">(</span><span style="color: #de935f;">number-to-string</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eval</span> <span style="color: #c5c8c6;">`</span><span style="color: #b294bb;">(</span><span style="color: #b294bb;">pdf-view-current-page</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                <span style="color: #81a2be;">(</span>total-page-str <span style="color: #de935f;">(</span><span style="color: #de935f;">number-to-string</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">pdf-cache-number-of-pages</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
            <span style="color: #b294bb;">(</span><span style="color: #de935f;">concat</span>
             <span style="color: #81a2be;">(</span><span style="color: #de935f;">propertize</span>
              <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">make-string</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">-</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">length</span> total-page-str<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">length</span> current-page-str<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span> ? <span style="color: #b5bd68;">)</span>
                      <span style="color: #b5bd68;">" P"</span> current-page-str<span style="color: #de935f;">)</span>
              <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mode-line</span><span style="color: #81a2be;">)</span>
             <span style="color: #81a2be;">(</span><span style="color: #de935f;">propertize</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"/"</span> total-page-str<span style="color: #de935f;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">doom-modeline-buffer-minor-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">doom-modeline-def-segment</span> <span style="color: #de935f;">pdf-pages</span>
    <span style="color: #717171;">"Display PDF pages."</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">doom-modeline--active</span><span style="color: #b5bd68;">)</span> <span style="color: #cc6666;">doom-modeline--pdf-pages</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">propertize</span> <span style="color: #cc6666;">doom-modeline--pdf-pages</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mode-line-inactive</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #de935f;">doom-modeline-def-modeline</span> <span style="color: #de935f;">'pdf</span>
    <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span>bar window-number pdf-pages pdf-icon buffer-name<span style="color: #de935f;">)</span>
    <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span>misc-info matches <span style="color: #cc6666;">major-mode</span> process vcs<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org8096c4e" class="outline-3">
          <h3 id="org8096c4e">
            <span class="section-number-3">3.9.</span> Emacs-everywhere
          </h3>
          <div class="outline-text-3" id="text-3-9">
            <p>Configure it a bit</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> emacs-everywhere
  <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">Make it easier to match with xmonad rule</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">emacs-everywhere-frame-name-format</span> <span style="color: #b5bd68;">"emacs-anywhere"</span><span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(defun emacs-everywhere-set-frame-position ()</span>
  <span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">)</span>

  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">The modeline is not useful to me in the popup window. It looks much nicer</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">to hide it.</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">emacs-everywhere-init-hooks</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">hide-mode-line-mode</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">remove-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">emacs-everywhere-init-hooks</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">emacs-everywhere-set-frame-position</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org6fd1971" class="outline-3">
          <h3 id="org6fd1971">
            <span class="section-number-3">3.10.</span> Eros-eval
          </h3>
          <div class="outline-text-3" id="text-3-10">
            <p>
              This makes the result of evals with <code>gr</code> and
              <code>gR</code> just slightly prettier. Every bit counts right?
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">eros-eval-result-prefix</span> <span style="color: #b5bd68;">"&#10233; "</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgf68f359" class="outline-3">
          <h3 id="orgf68f359">
            <span class="section-number-3">3.11.</span> EVIL
          </h3>
          <div class="outline-text-3" id="text-3-11">
            <p>
              When I want to make a substitution, I want it to be global more
              often than not &#x2014; so let&rsquo;s make that the default.
            </p>

            <p>
              Now, EVIL cares a fair bit about keeping compatibility with
              Vim&rsquo;s default behaviour. I don&rsquo;t. There are some
              particular settings that I&rsquo;d rather be something else, so
              let&rsquo;s change them.
            </p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> evil
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">evil-ex-substitute-global</span> t     <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">I like my s/../.. to by global by default</span>
        <span style="color: #cc6666;">evil-move-cursor-back</span> nil       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Don't move the block cursor when toggling insert mode</span>
        <span style="color: #cc6666;">evil-kill-on-visual-paste</span> nil<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">Don't put overwritten text in the kill ring</span>
</pre>
            </div>

            <p>
              I don&rsquo;t use <code>evil-escape-mode</code>, so I may as well
              turn it off, I&rsquo;ve heard it contributes a typing delay.
              I&rsquo;m not sure it&rsquo;s much, but it is an extra
              <code>pre-command-hook</code> that I don&rsquo;t benefit from,
              so&#x2026; It seems that there&rsquo;s a dedicated package for
              this, so instead of just disabling the mode on startup,
              let&rsquo;s prevent installation of the package.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> evil-escape <span style="color: #81a2be;">:disable</span> t<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org8275cfa" class="outline-3">
          <h3 id="org8275cfa">
            <span class="section-number-3">3.12.</span> Gif-screencast
          </h3>
          <div class="outline-text-3" id="text-3-12">
            <p>We can lazy load this using the start/stop commands.</p>

            <p>
              I initially installed <code>scrot</code> for this, since it was
              the default capture program. However it raised
              <code>glib error: Saving to file ... failed</code> each time it
              was run. Google didn&rsquo;t reveal any easy fixed, so I switched
              to <a href="https://github.com/naelstrof/maim">maim</a>. We now
              need to pass it the window ID. This doesn&rsquo;t change
              throughout the lifetime of an emacs instance, so as long as a
              single window is used <code>xdotool getactivewindow</code> will
              give a satisfactory result.
            </p>

            <p>
              It seems that when new colours appear, that tends to make
              <code>gifsicle</code> introduce artefacts. To avoid this we
              pre-populate the colour map using the current doom theme.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> gif-screencast
  <span style="color: #81a2be;">:commands</span> gif-screencast-mode
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> gif-screencast-mode-map
        <span style="color: #81a2be;">:g</span> <span style="color: #b5bd68;">"&lt;f8&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">gif-screencast-toggle-pause</span>
        <span style="color: #81a2be;">:g</span> <span style="color: #b5bd68;">"&lt;f9&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">gif-screencast-stop</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> gif-screencast-program <span style="color: #b5bd68;">"maim"</span>
        gif-screencast-args <span style="color: #c5c8c6;">`</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"--quality"</span> <span style="color: #b5bd68;">"3"</span> <span style="color: #b5bd68;">"-i"</span> ,<span style="color: #b5bd68;">(</span><span style="color: #de935f;">string-trim-right</span>
                                                     <span style="color: #b294bb;">(</span><span style="color: #de935f;">shell-command-to-string</span>
                                                      <span style="color: #b5bd68;">"xdotool getactivewindow"</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
        gif-screencast-optimize-args <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"--batch"</span> <span style="color: #b5bd68;">"--optimize=3"</span> <span style="color: #b5bd68;">"--usecolormap=/tmp/doom-color-theme"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">gif-screencast-write-colormap</span> <span style="color: #de935f;">()</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">f-write-text</span>
     <span style="color: #b5bd68;">(</span><span style="color: #de935f;">replace-regexp-in-string</span>
      <span style="color: #b5bd68;">"\n+"</span> <span style="color: #b5bd68;">"\n"</span>
      <span style="color: #b294bb;">(</span><span style="color: #de935f;">mapconcat</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">lambda</span> <span style="color: #de935f;">(</span>c<span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">listp</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">cdr</span> c<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
                                 <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cadr</span> c<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span> <span style="color: #f0c674;">doom-themes--colors</span><span style="color: #f0c674;"> </span><span style="color: #f0c674;">"\n"</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">utf-8</span>
     <span style="color: #b5bd68;">"/tmp/doom-color-theme"</span> <span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span>gif-screencast-write-colormap<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">doom-load-theme-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">gif-screencast-write-colormap</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org9d24fff" class="outline-3">
          <h3 id="org9d24fff">
            <span class="section-number-3">3.13.</span> Google-translate
          </h3>
          <div class="outline-text-3" id="text-3-13">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> go-translate
  <span style="color: #81a2be;">:defer</span> t
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span>
   <span style="color: #cc6666;">gts-translate-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"en"</span> <span style="color: #b5bd68;">"ru"</span><span style="color: #b5bd68;">)</span> <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"ru"</span> <span style="color: #b5bd68;">"en"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #cc6666;">gts-buffer-follow-p</span> t
   <span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span>
   <span style="color: #de935f;">(</span><span style="color: #81a2be;">:leader</span>
    <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">:prefix-map</span> <span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"o g"</span> . <span style="color: #b5bd68;">"google"</span><span style="color: #b294bb;">)</span>
     <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Open google-translator"</span> <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">gts-do-translate</span><span style="color: #b5bd68;">)</span>
    <span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org0efe1ee" class="outline-3">
          <h3 id="org0efe1ee">
            <span class="section-number-3">3.14.</span> Imenu
          </h3>
          <div class="outline-text-3" id="text-3-14">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> imenu-list
  <span style="color: #81a2be;">:defer</span> t
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span>
   imenu-list-position <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">right</span>
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">just a tad lower than the default</span>
   imenu-list-size <span style="color: #de935f; font-weight: bold;">0.25</span>
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">That modeline is plain ugly. Treemacs &amp; neotree don't have a modeline either.</span>
   imenu-list-mode-line-format nil
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">imenu-list-auto-resize t</span>
   imenu-list-auto-resize nil
   <span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span>
   <span style="color: #de935f;">(</span><span style="color: #81a2be;">:leader</span>
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Toggle imenu-list"</span> <span style="color: #b5bd68;">"oi"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">imenu-list-smart-toggle</span><span style="color: #de935f;">)</span>
   <span style="color: #81a2be;">:map</span> imenu-list-major-mode-map
   <span style="color: #81a2be;">:g</span> <span style="color: #b5bd68;">"r"</span>   <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">imenu-list-refresh</span>
   <span style="color: #81a2be;">:g</span> <span style="color: #de935f;">[</span>tab<span style="color: #de935f;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">hs-toggle-hiding</span>
   <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"gr"</span>  <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">imenu-list-refresh</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgbcd3aab" class="outline-3">
          <h3 id="orgbcd3aab">
            <span class="section-number-3">3.15.</span> Info colours
          </h3>
          <div class="outline-text-3" id="text-3-15">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> info-colors
  <span style="color: #81a2be;">:commands</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">info-colors-fontify-node</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">Info-selection-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">info-colors-fontify-node</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">Info-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">mixed-pitch-mode</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgd02df21" class="outline-3">
          <h3 id="orgd02df21">
            <span class="section-number-3">3.16.</span> Leetcode
          </h3>
          <div class="outline-text-3" id="text-3-16">
            <p>It&rsquo;s nice to have leetcode in emacs</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(package! leetcode)</span>
</pre>
            </div>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(use-package! leetcode</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:config</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">(setq leetcode-save-solutions t</span>
<span style="color: #5a5b5a;">;;         </span><span style="color: #5a5b5a;">leetcode-directory "~/code/practice/leetcode"</span>
<span style="color: #5a5b5a;">;;         </span><span style="color: #5a5b5a;">leetcode-prefer-sql "sqlite3")</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org78b408d" class="outline-3">
          <h3 id="org78b408d">
            <span class="section-number-3">3.17.</span> Kdeconnect
          </h3>
          <div class="outline-text-3" id="text-3-17">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> kdeconnect
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">kdeconnect-devices</span> <span style="color: #b5bd68;">"2580ec370a27fbb7"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org9a46a40" class="outline-3">
          <h3 id="org9a46a40">
            <span class="section-number-3">3.18.</span> Keycast
          </h3>
          <div class="outline-text-3" id="text-3-18">
            <p>let&rsquo;s just make sure this is lazy-loaded appropriately.</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> keycast
  <span style="color: #81a2be;">:commands</span> keycast-mode
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">define-minor-mode</span> <span style="color: #81a2be;">keycast-mode</span>
    <span style="color: #717171;">"Show current command and its key binding in the mode line."</span>
    <span style="color: #81a2be;">:global</span> t
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> keycast-mode
        <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">progn</span>
          <span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">pre-command-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">keycast--update</span> t<span style="color: #b294bb;">)</span>
          <span style="color: #b294bb;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">global-mode-string</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">""</span> mode-line-keycast <span style="color: #b5bd68;">" "</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">remove-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">pre-command-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">keycast--update</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">global-mode-string</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">remove</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">""</span> mode-line-keycast <span style="color: #b5bd68;">" "</span><span style="color: #81a2be;">)</span> <span style="color: #cc6666;">global-mode-string</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">custom-set-faces!</span>
    <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span>keycast-command <span style="color: #81a2be;">:inherit</span> doom-modeline-debug
                      <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">0.9</span><span style="color: #de935f;">)</span>
    <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span>keycast-key <span style="color: #81a2be;">:inherit</span> custom-modified
                  <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.1</span>
                  <span style="color: #81a2be;">:weight</span> bold<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgdb00831" class="outline-3">
          <h3 id="orgdb00831">
            <span class="section-number-3">3.19.</span> Org Chef
          </h3>
          <div class="outline-text-3" id="text-3-19">
            <p>
              Loading after org seems a bit premature. Let&rsquo;s just load it
              when we try to use it, either by command or in a capture template.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-chef
  <span style="color: #81a2be;">:commands</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">org-chef-insert-recipe</span> org-chef-get-recipe-from-url<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgdbbe0c8" class="outline-3">
          <h3 id="orgdbbe0c8">
            <span class="section-number-3">3.20.</span> Reverse-im (Keyboard
            layouts)
          </h3>
          <div class="outline-text-3" id="text-3-20">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Needed for `:after char-fold' to work</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package</span> char-fold
  <span style="color: #81a2be;">:custom</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">char-fold-symmetric</span> t<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">search-default-mode</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">char-fold-to-regexp</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> reverse-im
  <span style="color: #81a2be;">:ensure</span> t
  <span style="color: #81a2be;">:demand</span> t
  <span style="color: #81a2be;">:after</span> char-fold <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">but only after `</span><span style="color: #de935f;">char-fold</span><span style="color: #5a5b5a;">' is loaded</span>
  <span style="color: #81a2be;">:bind</span>
  <span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"M-T"</span> . reverse-im-translate-word<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:custom</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">reverse-im-avy-action-char</span> nil<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">reverse-im-input-methods</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"russian-computer"</span> <span style="color: #b5bd68;">"ukrainian-computer"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">That breaks avy</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(reverse-im-read-char-advice-function #'reverse-im-read-char-exclude)</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">reverse-im-char-fold</span> t<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">reverse-im-mode</span> t<span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org392c103" class="outline-3">
          <h3 id="org392c103">
            <span class="section-number-3">3.21.</span> Which-key
          </h3>
          <div class="outline-text-3" id="text-3-21">
            <p>Let&rsquo;s make this popup a bit faster</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">which-key-idle-delay</span> <span style="color: #de935f; font-weight: bold;">0.5</span><span style="color: #b294bb;">)</span> <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">I need the help, I really do</span>
</pre>
            </div>

            <p>
              I also think that having <code>evil-</code> appear in so many
              popups is a bit too verbose, let&rsquo;s change that, and do a few
              other similar tweaks while we&rsquo;re at it.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">which-key-allow-multiple-replacements</span> t<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> which-key
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">pushnew!</span>
   <span style="color: #cc6666;">which-key-replacement-alist</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">""</span> . <span style="color: #b5bd68;">"\\`+?evil[-:]?</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(?:</span><span style="color: #b5bd68;">a-</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">?</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(</span><span style="color: #b5bd68;">.*</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">"</span><span style="color: #b5bd68;">)</span> . <span style="color: #b5bd68;">(</span>nil . <span style="color: #b5bd68;">"&#9666;\\1"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\`g s"</span> . <span style="color: #b5bd68;">"\\`evilem--?motion-</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(</span><span style="color: #b5bd68;">.*</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">"</span><span style="color: #b5bd68;">)</span> . <span style="color: #b5bd68;">(</span>nil . <span style="color: #b5bd68;">"&#9667;\\1"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgb59d72e" class="outline-3">
          <h3 id="orgb59d72e">
            <span class="section-number-3">3.22.</span> Writeroom
          </h3>
          <div class="outline-text-3" id="text-3-22">
            <blockquote>
              <p>From the <code>:ui zen</code> module.</p>
            </blockquote>

            <p>
              Then, when using Org it would be nice to make a number of other
              aesthetic tweaks. Namely:
            </p>
            <ul class="org-ul">
              <li>Use a serifed variable-pitch font</li>
              <li>Hiding headline leading stars</li>
              <li>Using fleurons as headline bullets</li>
              <li>Hiding line numbers</li>
              <li>Removing outline indentation</li>
              <li>Centring the text</li>
            </ul>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">+zen-serif-p</span> t
  <span style="color: #717171;">"Whether to use a serifed font with `</span><span style="color: #de935f;">mixed-pitch-mode</span><span style="color: #717171;">'."</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">+zen-org-starhide</span> t
  <span style="color: #717171;">"The value `</span><span style="color: #de935f;">org-modern-hide-stars</span><span style="color: #717171;">' is set to."</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> <span style="color: #cc6666;">writeroom-mode</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+zen-prose-org-h</span> <span style="color: #de935f;">()</span>
    <span style="color: #717171;">"Reformat the current Org buffer appearance for prose."</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">display-line-numbers</span> nil
            <span style="color: #cc6666;">visual-fill-column-width</span> <span style="color: #de935f; font-weight: bold;">60</span>
            <span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">featurep</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">org-modern</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">org-modern-star</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"&#128600;"</span> <span style="color: #b5bd68;">"&#128601;"</span> <span style="color: #b5bd68;">"&#128602;"</span> <span style="color: #b5bd68;">"&#128603;"</span><span style="color: #81a2be;">)</span>
                    <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">org-modern-star '("&#128592;" "&#128593;" "&#128594;" "&#128595;" "&#128596;" "&#128597;" "&#128598;" "&#128599;")</span>
                    <span style="color: #cc6666;">org-modern-hide-stars</span> <span style="color: #cc6666;">+zen-org-starhide</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #cc6666;">org-modern-mode</span> <span style="color: #de935f; font-weight: bold;">-1</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #cc6666;">org-modern-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq</span>
       +zen--original-org-indent-mode-p <span style="color: #cc6666;">org-indent-mode</span><span style="color: #b5bd68;">)</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(org-indent-mode -1)</span>
      <span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+zen-nonprose-org-h</span> <span style="color: #de935f;">()</span>
    <span style="color: #717171;">"Reverse the effect of `</span><span style="color: #de935f;">+zen-prose-org</span><span style="color: #717171;">'."</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b294bb;">(</span><span style="color: #b294bb;">bound-and-true-p</span> <span style="color: #cc6666;">org-modern-mode</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #cc6666;">org-modern-mode</span> <span style="color: #de935f; font-weight: bold;">-1</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #cc6666;">org-modern-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">when</span> +zen--original-org-indent-mode-p <span style="color: #b294bb;">(</span><span style="color: #cc6666;">org-indent-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">pushnew!</span> <span style="color: #cc6666;">writeroom--local-variables</span>
            <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">display-line-numbers</span>
            <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">visual-fill-column-width</span>
            <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-adapt-indentation</span>
            <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-modern-mode</span>
            <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-modern-star</span>
            <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-modern-hide-stars</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">writeroom-mode-enable-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+zen-prose-org-h</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">writeroom-mode-disable-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+zen-nonprose-org-h</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-orga989f01" class="outline-3">
          <h3 id="orga989f01">
            <span class="section-number-3">3.23.</span> Wakatime
          </h3>
          <div class="outline-text-3" id="text-3-23">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> <span style="color: #cc6666;">wakatime-mode</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org3c7ee8e" class="outline-3">
          <h3 id="org3c7ee8e">
            <span class="section-number-3">3.24.</span> YASnippet
          </h3>
          <div class="outline-text-3" id="text-3-24">
            <p>Nested snippets are good, enable that.</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">yas-triggers-in-field</span> t<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgaa7e9fe" class="outline-3">
          <h3 id="orgaa7e9fe">
            <span class="section-number-3">3.25.</span> Fountain
          </h3>
          <div class="outline-text-3" id="text-3-25">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> fountain-mode<span style="color: #b294bb;">)</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> fountain-mode<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orga74b3bd" class="outline-3">
          <h3 id="orga74b3bd">
            <span class="section-number-3">3.26.</span> Open-With
          </h3>
          <div class="outline-text-3" id="text-3-26">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> crux<span style="color: #b294bb;">)</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> crux
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">global-set-key</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">kbd</span> <span style="color: #b5bd68;">"C-c o"</span><span style="color: #de935f;">)</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">crux-open-with</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org29fd4c8" class="outline-3">
          <h3 id="org29fd4c8">
            <span class="section-number-3">3.27.</span> Spray
          </h3>
          <div class="outline-text-3" id="text-3-27">
            <p>
              Why not flash words on the screen. Why not &#x2014; hey, it could
              be fun.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> spray <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"74d9dcfa2e8b..."</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>
              It would be nice if Spray&rsquo;s default speed suited me better,
              and the keybindings worked in evil mode. Let&rsquo;s do that and
              make the display slightly nicer while we&rsquo;re at it.
            </p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> spray
  <span style="color: #81a2be;">:commands</span> spray-mode
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> spray-wpm <span style="color: #de935f; font-weight: bold;">600</span>
        spray-height <span style="color: #de935f; font-weight: bold;">800</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">spray-mode-hide-cursor</span> <span style="color: #de935f;">()</span>
    <span style="color: #717171;">"Hide or unhide the cursor as is appropriate."</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> spray-mode
        <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq-local</span> spray--last-evil-cursor-state <span style="color: #cc6666;">evil-normal-state-cursor</span>
                    <span style="color: #cc6666;">evil-normal-state-cursor</span> <span style="color: #c5c8c6;">'</span><span style="color: #b294bb;">(</span>nil<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">evil-normal-state-cursor</span> spray--last-evil-cursor-state<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">spray-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-mode-hide-cursor</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> spray-mode-map
        <span style="color: #b5bd68;">"&lt;return&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-start/stop</span>
        <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-faster</span>
        <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-slower</span>
        <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-time</span>
        <span style="color: #b5bd68;">"&lt;right&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-forward-word</span>
        <span style="color: #b5bd68;">"h"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-forward-word</span>
        <span style="color: #b5bd68;">"&lt;left&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-backward-word</span>
        <span style="color: #b5bd68;">"l"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-backward-word</span>
        <span style="color: #b5bd68;">"q"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">spray-quit</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgea17a76" class="outline-3">
          <h3 id="orgea17a76">
            <span class="section-number-3">3.28.</span> iscroll
          </h3>
          <div class="outline-text-3" id="text-3-28">
            <p>Enable image scrolling</p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> iscroll
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">iscroll-mode</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org5bb02aa" class="outline-3">
          <h3 id="org5bb02aa">
            <span class="section-number-3">3.29.</span> Git blame
          </h3>
          <div class="outline-text-3" id="text-3-29">
            <p>Visualize code authorship at a glance</p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> blamer <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"artawower/blamer.el"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> blamer
  <span style="color: #81a2be;">:defer</span> <span style="color: #de935f; font-weight: bold;">20</span>
  <span style="color: #81a2be;">:custom</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">blamer-idle-time</span> <span style="color: #de935f; font-weight: bold;">0.3</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">blamer-min-offset</span> <span style="color: #de935f; font-weight: bold;">70</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:custom-face</span>
  <span style="color: #81a2be;">(</span>blamer-face <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>t <span style="color: #81a2be;">:foreground</span> <span style="color: #b5bd68;">"#7a88cf"</span>
                   <span style="color: #81a2be;">:background</span> nil
                   <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">140</span>
                   <span style="color: #81a2be;">:italic</span> t<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span>
   <span style="color: #de935f;">(</span><span style="color: #81a2be;">:leader</span>
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Toggle authorship visualizer"</span> <span style="color: #b5bd68;">"gT"</span>
    <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">lambda</span> <span style="color: #b294bb;">()</span> <span style="color: #b294bb;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #b294bb;">)</span> <span style="color: #b294bb;">(</span><span style="color: #b294bb;">if</span>  <span style="color: #cc6666;">blamer-mode</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">blamer-mode</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">blamer-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span>
                                  <span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">blamer-mode</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;;</span><span style="color: #5a5b5a;">(global-blamer-mode 1)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org0598239" class="outline-3">
          <h3 id="org0598239">
            <span class="section-number-3">3.30.</span> Hydra
          </h3>
          <div class="outline-text-3" id="text-3-30"></div>
          <div id="outline-container-org8e9f10c" class="outline-4">
            <h4 id="org8e9f10c">
              <span class="section-number-4">3.30.1.</span> Hydra Posframe
            </h4>
            <div class="outline-text-4" id="text-3-30-1">
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> hydra-posframe <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"Ladicle/hydra-posframe"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> hydra-posframe
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">when</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">display-graphic-p</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">after-init-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">hydra-posframe-enable</span><span style="color: #de935f;">)</span>
    <span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>
        <div id="outline-container-org64d38a7" class="outline-3">
          <h3 id="org64d38a7">
            <span class="section-number-3">3.31.</span> Terminal Here
          </h3>
          <div class="outline-text-3" id="text-3-31">
            <p>It&rsquo;s convenient to open terminals for current dir</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> terminal-here<span style="color: #b294bb;">)</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> terminal-here
  <span style="color: #81a2be;">:custom</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">terminal-here-linux-terminal-command</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">alacritty</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span>
   <span style="color: #de935f;">(</span><span style="color: #81a2be;">:leader</span>
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Open folder with terminal"</span> <span style="color: #b5bd68;">"ft"</span>
    <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">terminal-here-launch</span>
    <span style="color: #de935f;">)</span>
   <span style="color: #de935f;">(</span>
    <span style="color: #81a2be;">:leader</span>
    <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Open folder with terminal"</span> <span style="color: #b5bd68;">"fT"</span>
    <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">terminal-here-project-launch</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org065d423" class="outline-3">
          <h3 id="org065d423">
            <span class="section-number-3">3.32.</span> Spell-fu
          </h3>
          <div class="outline-text-3" id="text-3-32">
            <p>More dictionaries</p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span>
 <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">spell-fu-mode-hook</span>
 <span style="color: #81a2be;">(</span><span style="color: #b294bb;">lambda</span> <span style="color: #de935f;">()</span>
   <span style="color: #de935f;">(</span><span style="color: #de935f;">spell-fu-dictionary-add</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">spell-fu-get-ispell-dictionary</span> <span style="color: #b5bd68;">"uk"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #de935f;">(</span><span style="color: #de935f;">spell-fu-dictionary-add</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">spell-fu-get-ispell-dictionary</span> <span style="color: #b5bd68;">"ru"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
      </div>
      <div id="outline-container-org9a92f8b" class="outline-2">
        <h2 id="org9a92f8b">
          <span class="section-number-2">4.</span> Applications
        </h2>
        <div class="outline-text-2" id="text-4"></div>
        <div id="outline-container-org41fc923" class="outline-3">
          <h3 id="org41fc923">
            <span class="section-number-3">4.1.</span> Ebooks
          </h3>
          <div class="outline-text-3" id="text-4-1">
            <p>
              For managing my ebooks, I&rsquo;ll hook into the well-established
              ebook library manager
              <a href="https://calibre-ebook.com/">calibre</a>. A number of
              Emacs clients for this exist, but this seems like a good option.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> calibredb <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"2f2cfc38f2d1..."</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>
              Then for reading them, the only currently viable options seems to
              be <a href="https://depp.brause.cc/nov.el/">nov.el</a>.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> nov <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"8f5b42e9d9f3..."</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>
              Together these should give me a rather good experience reading
              ebooks.
            </p>

            <p>
              <code>calibredb</code> lets us use calibre through Emacs, because
              who wouldn&rsquo;t want to use something through Emacs?
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> calibredb
  <span style="color: #81a2be;">:commands</span> calibredb
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> calibredb-root-dir <span style="color: #b5bd68;">"~/Documents/books"</span>
        calibredb-db-dir <span style="color: #de935f;">(</span><span style="color: #de935f;">expand-file-name</span> <span style="color: #b5bd68;">"metadata.db"</span> calibredb-root-dir<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> calibredb-show-mode-map
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"?"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-entry-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"o"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-find-file</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"O"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-find-file-other-frame</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"V"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-open-file-with-default-tool</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-export-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"q"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-entry-quit</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"."</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-open-dired</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #de935f;">[</span>tab<span style="color: #de935f;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-toggle-view-at-point</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-t"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--tags</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-a"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--author_sort</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-A"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--authors</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-T"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--title</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-c"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--comments</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> calibredb-search-mode-map
        <span style="color: #81a2be;">:ne</span> <span style="color: #de935f;">[</span>mouse-3<span style="color: #de935f;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-search-mouse</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"RET"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-find-file</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"?"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"a"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-add</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"A"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-add-dir</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"c"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-clone</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"d"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-remove</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"D"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-remove-marked-items</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"j"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-next-entry</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"k"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-previous-entry</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"l"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-virtual-library-list</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"L"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-library-list</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"n"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-virtual-library-next</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"N"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-library-next</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"p"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-virtual-library-previous</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"P"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-library-previous</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"s"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"S"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-switch-library</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"o"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-find-file</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"O"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-find-file-other-frame</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"v"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-view</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"V"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-open-file-with-default-tool</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"."</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-open-dired</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"b"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-catalog-bib-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"e"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-export-dispatch</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"r"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-search-refresh-and-clear-filter</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"R"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-search-clear-filter</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"q"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-search-quit</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"m"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-mark-and-forward</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"f"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-toggle-favorite-at-point</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"x"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-toggle-archive-at-point</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"h"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-toggle-highlight-at-point</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"u"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-unmark-and-forward</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"i"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-edit-annotation</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"DEL"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-unmark-and-backward</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #de935f;">[</span>backtab<span style="color: #de935f;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-toggle-view</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #de935f;">[</span>tab<span style="color: #de935f;">]</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-toggle-view-at-point</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-n"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-show-next-entry</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-p"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-show-previous-entry</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"/"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-search-live-filter</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-t"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--tags</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-a"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--author_sort</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-A"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--authors</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-T"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--title</span>
        <span style="color: #81a2be;">:ne</span> <span style="color: #b5bd68;">"M-c"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">calibredb-set-metadata--comments</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Then, to actually read the ebooks we use <code>nov</code>.</p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> nov
  <span style="color: #81a2be;">:mode</span> <span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"\\.epub\\'"</span> . nov-mode<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> nov-mode-map
        <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"RET"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">nov-scroll-up</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">doom-modeline-segment--nov-info</span> <span style="color: #de935f;">()</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span>
     <span style="color: #b5bd68;">" "</span>
     <span style="color: #b5bd68;">(</span><span style="color: #de935f;">propertize</span>
      <span style="color: #b294bb;">(</span><span style="color: #de935f;">cdr</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">assoc</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">creator</span> nov-metadata<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">doom-modeline-project-parent-dir</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">" "</span>
     <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cdr</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">assoc</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">title</span> nov-metadata<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">" "</span>
     <span style="color: #b5bd68;">(</span><span style="color: #de935f;">propertize</span>
      <span style="color: #b294bb;">(</span><span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"%d/%d"</span>
              <span style="color: #81a2be;">(</span><span style="color: #de935f;">1+</span> nov-documents-index<span style="color: #81a2be;">)</span>
              <span style="color: #81a2be;">(</span><span style="color: #de935f;">length</span> nov-documents<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">doom-modeline-info</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #de935f;">advice-add</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">nov-render-title</span> <span style="color: #81a2be;">:override</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">ignore</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+nov-mode-setup</span> <span style="color: #de935f;">()</span>
    <span style="color: #717171;">"Tweak nov-mode to our liking."</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">face-remap-add-relative</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">variable-pitch</span>
                             <span style="color: #81a2be;">:family</span> <span style="color: #b5bd68;">"Merriweather"</span>
                             <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.4</span>
                             <span style="color: #81a2be;">:width</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">semi-expanded</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">face-remap-add-relative</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">default</span> <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.3</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">line-spacing</span> <span style="color: #de935f; font-weight: bold;">0.2</span>
                <span style="color: #cc6666;">next-screen-context-lines</span> <span style="color: #de935f; font-weight: bold;">4</span>
                <span style="color: #cc6666;">shr-use-colors</span> nil<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">visual-fill-column</span> nil t<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">visual-fill-column-center-text</span> t
                <span style="color: #cc6666;">visual-fill-column-width</span> <span style="color: #de935f; font-weight: bold;">81</span>
                nov-text-width <span style="color: #de935f; font-weight: bold;">80</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #cc6666;">visual-fill-column-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #cc6666;">hl-line-mode</span> <span style="color: #de935f; font-weight: bold;">-1</span><span style="color: #de935f;">)</span>
    <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Re-render with new display settings</span>
    <span style="color: #de935f;">(</span>nov-render-document<span style="color: #de935f;">)</span>
    <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Look up words with the dictionary.</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">+lookup-definition-functions</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+lookup/dictionary-definition</span><span style="color: #de935f;">)</span>
    <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Customise the mode-line to make it more minimal and relevant.</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq-local</span>
     <span style="color: #cc6666;">mode-line-format</span>
     <span style="color: #c5c8c6;">`</span><span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span><span style="color: #81a2be;">:eval</span>
        <span style="color: #81a2be;">(</span><span style="color: #de935f;">doom-modeline-segment--workspace-name</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
       <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:eval</span>
        <span style="color: #81a2be;">(</span><span style="color: #de935f;">doom-modeline-segment--window-number</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
       <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:eval</span>
        <span style="color: #81a2be;">(</span>doom-modeline-segment--nov-info<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
       ,<span style="color: #b294bb;">(</span><span style="color: #de935f;">propertize</span>
         <span style="color: #b5bd68;">" %P "</span>
         <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">doom-modeline-buffer-minor-mode</span><span style="color: #b294bb;">)</span>
       ,<span style="color: #b294bb;">(</span><span style="color: #de935f;">propertize</span>
         <span style="color: #b5bd68;">" "</span>
         <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">doom-modeline--active</span><span style="color: #de935f;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mode-line</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mode-line-inactive</span><span style="color: #81a2be;">)</span>
         <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">display</span> <span style="color: #c5c8c6;">`</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span>space
                     <span style="color: #81a2be;">:align-to</span>
                     <span style="color: #b5bd68;">(</span><span style="color: #de935f;">-</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">+</span> right right-fringe right-margin<span style="color: #b294bb;">)</span>
                        ,<span style="color: #b294bb;">(</span><span style="color: #de935f;">*</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>width <span style="color: #b294bb;">(</span><span style="color: #de935f;">doom-modeline--font-width</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
                              <span style="color: #de935f;">(</span><span style="color: #b294bb;">or</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">and</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">=</span> width <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b5bd68;">)</span>
                                  <span style="color: #b5bd68;">(</span><span style="color: #de935f;">/</span> width <span style="color: #b294bb;">(</span><span style="color: #de935f;">frame-char-width</span><span style="color: #b294bb;">)</span> <span style="color: #de935f; font-weight: bold;">1.0</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                            <span style="color: #81a2be;">(</span><span style="color: #de935f;">string-width</span>
                             <span style="color: #de935f;">(</span><span style="color: #de935f;">format-mode-line</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cons</span> <span style="color: #b5bd68;">""</span> <span style="color: #c5c8c6;">'</span><span style="color: #b294bb;">(</span><span style="color: #81a2be;">:eval</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">doom-modeline-segment--major-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
       <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:eval</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">doom-modeline-segment--major-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">nov-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+nov-mode-setup</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgf8870a4" class="outline-3">
          <h3 id="orgf8870a4">
            <span class="section-number-3">4.2.</span> File types
          </h3>
          <div class="outline-text-3" id="text-4-2"></div>
          <div id="outline-container-orgf9df63d" class="outline-4">
            <h4 id="orgf9df63d">
              <span class="section-number-4">4.2.1.</span> Systemd
            </h4>
            <div class="outline-text-4" id="text-4-2-1">
              <p>For editing systemd unit files</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> systemd <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"b6ae63a23660..."</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> systemd
  <span style="color: #81a2be;">:defer</span> t<span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>
        <div id="outline-container-org7fd4f72" class="outline-3">
          <h3 id="org7fd4f72">
            <span class="section-number-3">4.3.</span> Obsidian
          </h3>
          <div class="outline-text-3" id="text-4-3">
            <p>
              It&rsquo;s nice to have some integration with obsidian in emacs
            </p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> obsidian<span style="color: #b294bb;">)</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package</span> obsidian
  <span style="color: #81a2be;">:ensure</span> t
  <span style="color: #81a2be;">:demand</span> t
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">obsidian-specify-path</span> <span style="color: #b5bd68;">"~/Knowledge base"</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">global-obsidian-mode</span> t<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:bind</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">obsidian-mode-map</span>
              <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Replace C-c C-o with Obsidian.el's implementation. It's ok to use another key binding.</span>
              <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"C-c C-o"</span> . obsidian-follow-link-at-point<span style="color: #de935f;">)</span>
              <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Jump to backlinks</span>
              <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"C-c C-b"</span> . obsidian-backlink-jump<span style="color: #de935f;">)</span>
              <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">If you prefer you can use `</span><span style="color: #de935f;">obsidian-insert-link</span><span style="color: #5a5b5a;">'</span>
              <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"C-c C-l"</span> . obsidian-insert-wikilink<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-org595fa3e" class="outline-2">
        <h2 id="org595fa3e">
          <span class="section-number-2">5.</span> Language configuration
        </h2>
        <div class="outline-text-2" id="text-5"></div>
        <div id="outline-container-orgd58f8ac" class="outline-3">
          <h3 id="orgd58f8ac">
            <span class="section-number-3">5.1.</span> Haskell
          </h3>
          <div class="outline-text-3" id="text-5-1">
            <p>Set formatter</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> lsp-haskell
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">lsp-haskell-formatting-provider</span> <span style="color: #b5bd68;">"fourmolu"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-org6750ad6" class="outline-3">
          <h3 id="org6750ad6">
            <span class="section-number-3">5.2.</span> Rust
          </h3>
          <div class="outline-text-3" id="text-5-2">
            <p>Disable lsp formatter</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">rustic-mode-hook</span> <span style="color: #cc6666;">+format-with-lsp</span> nil<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org85d6c2a" class="outline-3">
          <h3 id="org85d6c2a"><span class="section-number-3">5.3.</span> Js</h3>
          <div class="outline-text-3" id="text-5-3">
            <p>Prefer prettier formatter.</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">js2-mode-hook</span> <span style="color: #cc6666;">+format-with-lsp</span> nil<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">typescript-mode-hook</span> <span style="color: #cc6666;">+format-with-lsp</span> nil<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">typescript-tsx-mode-hook</span> <span style="color: #cc6666;">+format-with-lsp</span> nil<span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Show eslint help</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:and</span> <span style="color: #cc6666;">lsp-mode</span> <span style="color: #cc6666;">flycheck-mode</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">flycheck-add-next-checker</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">lsp</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">javascript-eslint</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org44a35fb" class="outline-3">
          <h3 id="org44a35fb">
            <span class="section-number-3">5.4.</span> LaTeX
          </h3>
          <div class="outline-text-3" id="text-5-4">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">TeX-save-query</span> nil
      <span style="color: #cc6666;">TeX-show-compilation</span> t
      <span style="color: #cc6666;">TeX-command-extra-options</span> <span style="color: #b5bd68;">"-shell-escape"</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> latex
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">TeX-command-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"XeLaTeX"</span> <span style="color: #b5bd68;">"%`xelatex%(mode)%' %t"</span> TeX-run-TeX nil t<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Let&rsquo;s re-order the preferences.</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">+latex-viewers</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>zathura pdf-tools evince okular skim sumatrapdf<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgf749833" class="outline-3">
          <h3 id="orgf749833">
            <span class="section-number-3">5.5.</span> Markdown
          </h3>
          <div class="outline-text-3" id="text-5-5">
            <p>Let&rsquo;s use mixed pitch, because it&rsquo;s great</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">gfm-mode</span> markdown-mode<span style="color: #81a2be;">)</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">mixed-pitch-mode</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>
              Most of the time when I write markdown, it&rsquo;s going into some
              app/website which will do it&rsquo;s own line wrapping, hence we
              <i>only</i> want to use visual line wrapping. No hard stuff.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">gfm-mode</span> markdown-mode<span style="color: #81a2be;">)</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">visual-line-mode</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">turn-off-auto-fill</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>
              Since markdown is often seen as rendered HTML, let&rsquo;s try to
              somewhat mirror the style or markdown renderers.
            </p>

            <p>
              Most markdown renders seem to make the first three headings levels
              larger than normal text, the first two much so. Then the fourth
              level tends to be the same as body text, while the fifth and sixth
              are (increasingly) smaller, with the sixth greyed out. Since the
              sixth level is so small, I&rsquo;ll turn up the boldness a notch.
            </p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">custom-set-faces!</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown-header-face-1 <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.25</span> <span style="color: #81a2be;">:weight</span> extra-bold <span style="color: #81a2be;">:inherit</span> markdown-header-face<span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown-header-face-2 <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.15</span> <span style="color: #81a2be;">:weight</span> bold       <span style="color: #81a2be;">:inherit</span> markdown-header-face<span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown-header-face-3 <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.08</span> <span style="color: #81a2be;">:weight</span> bold       <span style="color: #81a2be;">:inherit</span> markdown-header-face<span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown-header-face-4 <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.00</span> <span style="color: #81a2be;">:weight</span> bold       <span style="color: #81a2be;">:inherit</span> markdown-header-face<span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown-header-face-5 <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">0.90</span> <span style="color: #81a2be;">:weight</span> bold       <span style="color: #81a2be;">:inherit</span> markdown-header-face<span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown-header-face-6 <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">0.75</span> <span style="color: #81a2be;">:weight</span> extra-bold <span style="color: #81a2be;">:inherit</span> markdown-header-face<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orge85eeb8" class="outline-3">
          <h3 id="orge85eeb8">
            <span class="section-number-3">5.6.</span> Nix
          </h3>
          <div class="outline-text-3" id="text-5-6">
            <p>Turn off company for nix</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">nix-mode-hook</span> <span style="color: #cc6666;">company-idle-delay</span> nil<span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Use alejandra formatter</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #81a2be;">set-formatter!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">alejandra</span> <span style="color: #b5bd68;">"alejandra --quiet"</span> <span style="color: #81a2be;">:modes</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>nix-mode<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org" class="outline-3">
          <h3 id="org"><span class="section-number-3">5.7.</span> Org</h3>
          <div class="outline-text-3" id="text-org">
            <p>
              Finally, because this section is fairly expensive to initialise,
              we&rsquo;ll wrap it in an
              <code class="src src-elisp"
                ><span style="color: #b294bb">(</span
                ><span style="color: #b294bb">after!</span> ...<span
                  style="color: #b294bb"
                  >)</span
                ></code
              >
              block.
            </p>

            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> org
  &lt;&lt;org-conf&gt;&gt;<span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>

          <div id="outline-container-org89b8cba" class="outline-4">
            <h4 id="org89b8cba">
              <span class="section-number-4">5.7.1.</span> Behavior
            </h4>
            <div class="outline-text-4" id="text-5-7-1"></div>
            <div id="outline-container-orga6fc366" class="outline-5">
              <h5 id="orga6fc366">
                <span class="section-number-5">5.7.1.1.</span> Tweaking defaults
              </h5>
              <div class="outline-text-5" id="text-5-7-1-1">
                <p>Some simple settings</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-directory</span> <span style="color: #b5bd68;">"~/org/"</span>
      <span style="color: #cc6666;">org-archive-location</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">concat</span> <span style="color: #cc6666;">org-directory</span> <span style="color: #b5bd68;">".archive/%s::"</span><span style="color: #81a2be;">)</span>
      <span style="color: #cc6666;">org-roam-directory</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">concat</span> <span style="color: #cc6666;">org-directory</span> <span style="color: #b5bd68;">"notes/"</span><span style="color: #81a2be;">)</span>
      <span style="color: #cc6666;">org-journal-encrypt-journal</span> t
      <span style="color: #cc6666;">org-journal-file-format</span> <span style="color: #b5bd68;">"%Y%m%d.org"</span>
      <span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">add-hook!</span> org-mode <span style="color: #81a2be;">:append</span>
           <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">org-fragtog-mode</span>
           <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">variable-pitch-mode</span>
           <span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span>
 <span style="color: #cc6666;">org-use-property-inheritance</span> t              <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">it's convenient to have properties inherited</span>
 <span style="color: #cc6666;">org-log-done</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">time</span>                          <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">having the time a item is done sounds convininet</span>
 <span style="color: #cc6666;">org-list-allow-alphabetical</span> t               <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">have a. A. a) A) list bullets</span>
 <span style="color: #cc6666;">org-export-in-background</span> t                  <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">run export processes in external emacs process</span>
 <span style="color: #cc6666;">org-catch-invisible-edits</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">smart</span>            <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">try not to accidently do weird stuff in invisible regions</span>
 <span style="color: #cc6666;">org-export-with-sub-superscripts</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">{}</span>       <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">don't treat lone _ / ^ as sub/superscripts, require _{} / ^{}</span>
 <span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  I also like the <code>:comments</code> header-argument, so
                  let&rsquo;s make that a default.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-babel-default-header-args</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #81a2be;">:session</span> . <span style="color: #b5bd68;">"none"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:results</span> . <span style="color: #b5bd68;">"replace"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:exports</span> . <span style="color: #b5bd68;">"code"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:cache</span> . <span style="color: #b5bd68;">"no"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:noweb</span> . <span style="color: #b5bd68;">"no"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:hlines</span> . <span style="color: #b5bd68;">"no"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:tangle</span> . <span style="color: #b5bd68;">"no"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #81a2be;">:comments</span> . <span style="color: #b5bd68;">"link"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  There also seem to be a few keybindings which use
                  <code>hjkl</code>, but miss arrow key equivalents.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">evil-org-mode-map</span>
      <span style="color: #81a2be;">:after</span> evil-org
      <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"g &lt;up&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-backward-heading-same-level</span>
      <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"g &lt;down&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-forward-heading-same-level</span>
      <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"g &lt;left&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-up-element</span>
      <span style="color: #81a2be;">:n</span> <span style="color: #b5bd68;">"g &lt;right&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-down-element</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org14cbf23" class="outline-5">
              <h5 id="org14cbf23">
                <span class="section-number-5">5.7.1.2.</span> Latex snippets
              </h5>
              <div class="outline-text-5" id="text-5-7-1-2">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span>
          <span style="color: #81a2be;">(</span><span style="color: #b294bb;">&#955;!</span> <span style="color: #de935f;">(</span><span style="color: #cc6666;">yas-minor-mode</span><span style="color: #de935f;">)</span>
              <span style="color: #de935f;">(</span><span style="color: #de935f;">yas-activate-extra-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">latex-mode</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org1987fff" class="outline-5">
              <h5 id="org1987fff">
                <span class="section-number-5">5.7.1.3.</span> Extra
                functionality
              </h5>
              <div class="outline-text-5" id="text-5-7-1-3"></div>
              <div id="outline-container-org10a4c54" class="outline-6">
                <h6 id="org10a4c54">
                  <span class="section-number-6">5.7.1.3.1.</span> Org buffer
                  creation
                </h6>
                <div class="outline-text-6" id="text-5-7-1-3-1">
                  <p>
                    Let&rsquo;s also make creating an org buffer just that
                    little bit easier.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">evil-define-command</span> <span style="color: #81a2be;">evil-buffer-org-new</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">count</span> file<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Creates a new ORG buffer replacing the current window, optionally</span>
<span style="color: #717171;">   editing a certain FILE"</span>
  <span style="color: #81a2be;">:repeat</span> nil
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span> <span style="color: #b5bd68;">"P&lt;f&gt;"</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> file
      <span style="color: #de935f;">(</span><span style="color: #de935f;">evil-edit</span> file<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>buffer <span style="color: #81a2be;">(</span><span style="color: #de935f;">generate-new-buffer</span> <span style="color: #b5bd68;">"*new org*"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">set-window-buffer</span> nil buffer<span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">with-current-buffer</span> buffer
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-mode</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:leader</span>
      <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"b"</span>
       <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"New empty ORG buffer"</span> <span style="color: #b5bd68;">"o"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">evil-buffer-org-new</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-org094600f" class="outline-6">
                <h6 id="org094600f">
                  <span class="section-number-6">5.7.1.3.2.</span> The utility
                  of zero-width spaces
                </h6>
                <div class="outline-text-6" id="text-5-7-1-3-2">
                  <p>
                    Occasionally in Org you run into annoyances where you want
                    to have two seperate blocks right together without a space.
                    For example, to <b>emph</b>asise part of a word, or put a
                    currency symbol immediately before an inline source block.
                    There is a solution to this, it just sounds slightly hacky
                    &#x2014; zero width spaces. Because this is Emacs, we can
                    make this feel much less hacky by making a minor addition to
                    the Org key map 🙂.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">org-mode-map</span>
      <span style="color: #81a2be;">:nie</span> <span style="color: #b5bd68;">"M-SPC M-SPC"</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">cmd!</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">insert</span> <span style="color: #b5bd68;">"\u200B"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    We then want to stop the space from being included in
                    exports, which can be done with a little filter.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+org-export-remove-zero-width-space</span> <span style="color: #81a2be;">(</span>text _backend _info<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Remove zero width spaces from TEXT."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">org-export-derived-backend-p</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">replace-regexp-in-string</span> <span style="color: #b5bd68;">"\u200B"</span> <span style="color: #b5bd68;">""</span> text<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-export-filter-plain-text-functions</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+org-export-remove-zero-width-space</span> t<span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-orgc278a83" class="outline-6">
                <h6 id="orgc278a83">
                  <span class="section-number-6">5.7.1.3.3.</span> List bullet
                  sequence
                </h6>
                <div class="outline-text-6" id="text-5-7-1-3-3">
                  <p>
                    I think it makes sense to have list bullets change with
                    depth
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-list-demote-modify-bullet</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"+"</span> . <span style="color: #b5bd68;">"-"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"-"</span> . <span style="color: #b5bd68;">"+"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"*"</span> . <span style="color: #b5bd68;">"+"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"1."</span> . <span style="color: #b5bd68;">"a."</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-orgdd84e9d" class="outline-6">
                <h6 id="orgdd84e9d">
                  <span class="section-number-6">5.7.1.3.4.</span> cdlatex
                </h6>
                <div class="outline-text-6" id="text-5-7-1-3-4">
                  <p>
                    It&rsquo;s also nice to be able to use <code>cdlatex</code>.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">turn-on-org-cdlatex</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    It&rsquo;s handy to be able to quickly insert environments
                    with <code>C-c }</code>. I almost always want to edit them
                    afterwards though, so let&rsquo;s make that happen by
                    default.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> org-edit-latex-emv-after-insert <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-cdlatex-environment-indent</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-edit-latex-environment</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    At some point in the future it could be good to investigate
                    <a
                      href="https://scripter.co/splitting-an-org-block-into-two/"
                      >splitting org blocks</a
                    >. Likewise
                    <a
                      href="https://archive.casouri.cat/note/2020/insert-math-symbol-in-emacs/"
                      >this</a
                    >
                    looks good for symbols.
                  </p>
                </div>
              </div>
              <div id="outline-container-org6026632" class="outline-6">
                <h6 id="org6026632">
                  <span class="section-number-6">5.7.1.3.5.</span> View exported
                  file
                </h6>
                <div class="outline-text-6" id="text-5-7-1-3-5">
                  <p>
                    <code>'localeader v</code> has no pre-existing binding, so I
                    may as well use it with the same functionality as in LaTeX.
                    Let&rsquo;s try viewing possible output files with this.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">org-mode-map</span>
      <span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"View exported file"</span> <span style="color: #b5bd68;">"v"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-view-output-file</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-view-output-file</span> <span style="color: #81a2be;">(</span><span style="color: #f0c674;">&amp;optional</span> org-file-path<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Visit buffer open on the first output file (if any) found, using `</span><span style="color: #de935f;">org-view-output-file-extensions</span><span style="color: #717171;">'"</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let*</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>org-file-path <span style="color: #b294bb;">(</span><span style="color: #b294bb;">or</span> org-file-path <span style="color: #81a2be;">(</span><span style="color: #cc6666;">buffer-file-name</span><span style="color: #81a2be;">)</span> <span style="color: #b5bd68;">""</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         <span style="color: #b5bd68;">(</span>dir <span style="color: #b294bb;">(</span><span style="color: #de935f;">file-name-directory</span> org-file-path<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         <span style="color: #b5bd68;">(</span>basename <span style="color: #b294bb;">(</span><span style="color: #de935f;">file-name-base</span> org-file-path<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         <span style="color: #b5bd68;">(</span>output-file nil<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">dolist</span> <span style="color: #b5bd68;">(</span>ext <span style="color: #cc6666;">org-view-output-file-extensions</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">unless</span> output-file
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">when</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">file-exists-p</span>
               <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span> dir basename <span style="color: #b5bd68;">"."</span> ext<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> output-file <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span> dir basename <span style="color: #b5bd68;">"."</span> ext<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> output-file
        <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">member</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">file-name-extension</span> output-file<span style="color: #81a2be;">)</span> <span style="color: #cc6666;">org-view-external-file-extensions</span><span style="color: #b294bb;">)</span>
            <span style="color: #b294bb;">(</span><span style="color: #de935f;">browse-url-xdg-open</span> output-file<span style="color: #b294bb;">)</span>
          <span style="color: #b294bb;">(</span><span style="color: #de935f;">pop-to-buffer</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">or</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">find-buffer-visiting</span> output-file<span style="color: #de935f;">)</span>
                             <span style="color: #de935f;">(</span><span style="color: #de935f;">find-file-noselect</span> output-file<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">message</span> <span style="color: #b5bd68;">"No exported file found"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">org-view-output-file-extensions</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"pdf"</span> <span style="color: #b5bd68;">"md"</span> <span style="color: #b5bd68;">"rst"</span> <span style="color: #b5bd68;">"txt"</span> <span style="color: #b5bd68;">"tex"</span> <span style="color: #b5bd68;">"html"</span><span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Search for output files with these extensions, in order, viewing the first that matches"</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">org-view-external-file-extensions</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"html"</span><span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"File formats that should be opened externally."</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-org1ef68ca" class="outline-6">
                <h6 id="org1ef68ca">
                  <span class="section-number-6">5.7.1.3.6.</span> Citation
                </h6>
                <div class="outline-text-6" id="text-5-7-1-3-6">
                  <blockquote>
                    <p>Extending the <code>:tools biblio</code> module.</p>
                  </blockquote>

                  <p>
                    References in Org are fairly easy now, thanks to
                    <code>org-cite</code>. The <code>:tools biblio</code>
                    module gives a fairly decent basic setup, but it would be
                    nice to take it a bit further. This mostly consists of
                    tweaking settings, but there is one extra package I&rsquo;ll
                    grab for prettier in-buffer citations.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> org-cite-csl-activate <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:host</span> github <span style="color: #81a2be;">:repo</span> <span style="color: #b5bd68;">"andras-simonyi/org-cite-csl-activate"</span><span style="color: #81a2be;">)</span> <span style="color: #81a2be;">:pin</span> <span style="color: #b5bd68;">"9e68d9204469..."</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    In particular, by setting
                    <code>org-cite-csl-activate-use-document-style</code>, we
                    can have the in-buffer displayed citations be the same as
                    the exported form. Isn&rsquo;t that lovely!
                  </p>

                  <p>
                    Unfortunately, there&rsquo;s currently a potential for
                    undesirable buffer modifications, so we&rsquo;ll put all the
                    activation code behind a function we can call when we want
                    it.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> oc-csl-activate
  <span style="color: #81a2be;">:after</span> oc
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cite-csl-activate-use-document-style</span> t
        <span style="color: #cc6666;">org-cite-csl-activate-use-document-locale</span> t
    <span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+org-cite-csl-activate/enable</span> <span style="color: #de935f;">()</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cite-activate-processor</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">csl-activate</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span><span style="color: #b294bb;">lambda</span> <span style="color: #81a2be;">()</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">cursor-sensor-mode</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span> org-cite-csl-activate-render-all<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">defadvice!</span> +org-cite-csl-activate-render-all-silent <span style="color: #b5bd68;">(</span>orig-fn<span style="color: #b5bd68;">)</span>
      <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-cite-csl-activate-render-all</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">with-silent-modifications</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">funcall</span> orig-fn<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">with-silent-modifications</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">save-excursion</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">point-min</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-cite-activate</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">point-max</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-cite-csl-activate-render-all</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">fmakunbound</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+org-cite-csl-activate/enable</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    Now that <code>oc-csl-activate</code> is set up, let&rsquo;s
                    go ahead and customise some of the packages already loaded.
                    For starters, we can make use of the my Zotero files with
                    <code>citar</code>, and make the symbols a bit prettier.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> citar
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cite-global-bibliography</span>
        <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>libfile-search-names <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"library.json"</span> <span style="color: #b5bd68;">"Library.json"</span> <span style="color: #b5bd68;">"library.bib"</span> <span style="color: #b5bd68;">"Library.bib"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
              <span style="color: #b294bb;">(</span>libfile-dir <span style="color: #b5bd68;">"~/Zotero"</span><span style="color: #b294bb;">)</span>
              paths<span style="color: #b5bd68;">)</span>
          <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">dolist</span> <span style="color: #b294bb;">(</span>libfile libfile-search-names<span style="color: #b294bb;">)</span>
            <span style="color: #b294bb;">(</span><span style="color: #b294bb;">when</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">and</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">not</span> paths<span style="color: #de935f;">)</span>
                       <span style="color: #de935f;">(</span><span style="color: #de935f;">file-exists-p</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">expand-file-name</span> libfile libfile-dir<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
              <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> paths <span style="color: #de935f;">(</span><span style="color: #de935f;">list</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">expand-file-name</span> libfile libfile-dir<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
          paths<span style="color: #de935f;">)</span>
        citar-bibliography <span style="color: #cc6666;">org-cite-global-bibliography</span>
        citar-symbols
        <span style="color: #c5c8c6;">`</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>file ,<span style="color: #b294bb;">(</span><span style="color: #de935f;">all-the-icons-faicon</span> <span style="color: #b5bd68;">"file-o"</span> <span style="color: #81a2be;">:face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-green</span> <span style="color: #81a2be;">:v-adjust</span> <span style="color: #de935f; font-weight: bold;">-0.1</span><span style="color: #b294bb;">)</span> . <span style="color: #b5bd68;">" "</span><span style="color: #b5bd68;">)</span>
          <span style="color: #b5bd68;">(</span>note ,<span style="color: #b294bb;">(</span><span style="color: #de935f;">all-the-icons-material</span> <span style="color: #b5bd68;">"speaker_notes"</span> <span style="color: #81a2be;">:face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-blue</span> <span style="color: #81a2be;">:v-adjust</span> <span style="color: #de935f; font-weight: bold;">-0.3</span><span style="color: #b294bb;">)</span> . <span style="color: #b5bd68;">" "</span><span style="color: #b5bd68;">)</span>
          <span style="color: #b5bd68;">(</span>link ,<span style="color: #b294bb;">(</span><span style="color: #de935f;">all-the-icons-octicon</span> <span style="color: #b5bd68;">"link"</span> <span style="color: #81a2be;">:face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-orange</span> <span style="color: #81a2be;">:v-adjust</span> <span style="color: #de935f; font-weight: bold;">0.01</span><span style="color: #b294bb;">)</span> . <span style="color: #b5bd68;">" "</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    We can also make the Zotero CSL styles available to use.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> oc-csl
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cite-csl-styles-dir</span> <span style="color: #b5bd68;">"~/Zotero/styles"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    Since CSL works so nicely everywhere, we might as well use
                    it as the default citation export processor for everything.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> oc
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cite-export-processors</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>t csl<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    Then, for convenience we&rsquo;ll cap things off by putting
                    the citation command under Org&rsquo;s localleader.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">map!</span> <span style="color: #81a2be;">:after</span> org
      <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">org-mode-map</span>
      <span style="color: #81a2be;">:localleader</span>
      <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Insert citation"</span> <span style="color: #b5bd68;">"@"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-cite-insert</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    Lastly, just in case I come across any old citations of
                    mine, I think it would be nice to have a function to convert
                    <code>org-ref</code> citations to
                    <code>org-cite</code> forms.
                  </p>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> oc
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-ref-to-org-cite</span> <span style="color: #de935f;">()</span>
    <span style="color: #717171;">"Attempt to convert org-ref citations to org-cite syntax."</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let*</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>cite-conversions <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"cite"</span> . <span style="color: #b5bd68;">"//b"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Cite"</span> . <span style="color: #b5bd68;">"//bc"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"nocite"</span> . <span style="color: #b5bd68;">"/n"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"citep"</span> . <span style="color: #b5bd68;">""</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"citep*"</span> . <span style="color: #b5bd68;">"//f"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"parencite"</span> . <span style="color: #b5bd68;">""</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Parencite"</span> . <span style="color: #b5bd68;">"//c"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"citeauthor"</span> . <span style="color: #b5bd68;">"/a/f"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"citeauthor*"</span> . <span style="color: #b5bd68;">"/a"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"citeyear"</span> . <span style="color: #b5bd68;">"/na/b"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Citep"</span> . <span style="color: #b5bd68;">"//c"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Citealp"</span> . <span style="color: #b5bd68;">"//bc"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Citeauthor"</span> . <span style="color: #b5bd68;">"/a/cf"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Citeauthor*"</span> . <span style="color: #b5bd68;">"/a/c"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"autocite"</span> . <span style="color: #b5bd68;">""</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Autocite"</span> . <span style="color: #b5bd68;">"//c"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"notecite"</span> . <span style="color: #b5bd68;">"/l/b"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Notecite"</span> . <span style="color: #b5bd68;">"/l/bc"</span><span style="color: #de935f;">)</span>
                               <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"pnotecite"</span> . <span style="color: #b5bd68;">"/l"</span><span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Pnotecite"</span> . <span style="color: #b5bd68;">"/l/bc"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
           <span style="color: #b294bb;">(</span>cite-regexp <span style="color: #81a2be;">(</span><span style="color: #b294bb;">rx</span> <span style="color: #de935f;">(</span>regexp <span style="color: #b5bd68;">(</span><span style="color: #de935f;">regexp-opt</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">mapcar</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">car</span> cite-conversions<span style="color: #b294bb;">)</span> t<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
                            <span style="color: #b5bd68;">":"</span> <span style="color: #de935f;">(</span>group <span style="color: #b5bd68;">(</span><span style="color: #de935f;">+</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">not</span> <span style="color: #81a2be;">(</span>any <span style="color: #b5bd68;">"\n         ,.)]}"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">save-excursion</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">point-min</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">while</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">re-search-forward</span> cite-regexp nil t<span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">message</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"[cite%s:@%s]"</span>
                                 <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cdr</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span> cite-conversions<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
                                 <span style="color: #b5bd68;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">2</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">replace-match</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"[cite%s:@%s]"</span>
                                 <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cdr</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">assoc</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span> cite-conversions<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
                                 <span style="color: #b5bd68;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">2</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-cite-csl-locales-dir</span> <span style="color: #b5bd68;">"~/code/cloned/csl-locales"</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
            </div>

            <div id="outline-container-orgabe94a7" class="outline-5">
              <h5 id="orgabe94a7">
                <span class="section-number-5">5.7.1.4.</span> Super agenda
              </h5>
              <div class="outline-text-5" id="text-5-7-1-4">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-super-agenda
  <span style="color: #81a2be;">:commands</span> <span style="color: #81a2be;">(</span><span style="color: #cc6666;">org-super-agenda-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> org-agenda
  <span style="color: #81a2be;">(</span><span style="color: #cc6666;">org-super-agenda-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-agenda-skip-scheduled-if-done</span> t
      <span style="color: #cc6666;">org-agenda-skip-deadline-if-done</span> t
      <span style="color: #cc6666;">org-agenda-include-deadlines</span> t
      <span style="color: #cc6666;">org-agenda-block-separator</span> nil
      <span style="color: #cc6666;">org-agenda-tags-column</span> <span style="color: #de935f; font-weight: bold;">100</span> <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">from testing this seems to be a good value</span>
      <span style="color: #cc6666;">org-agenda-compact-blocks</span> t<span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-agenda-custom-commands</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"o"</span> <span style="color: #b5bd68;">"Overview"</span>
         <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>agenda <span style="color: #b5bd68;">""</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #cc6666;">org-agenda-span</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">day</span><span style="color: #de935f;">)</span>
                      <span style="color: #de935f;">(</span><span style="color: #cc6666;">org-super-agenda-groups</span>
                       <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Today"</span>
                          <span style="color: #81a2be;">:time-grid</span> t
                          <span style="color: #81a2be;">:date</span> today
                          <span style="color: #81a2be;">:todo</span> <span style="color: #b5bd68;">"TODAY"</span>
                          <span style="color: #81a2be;">:scheduled</span> today
                          <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
          <span style="color: #b294bb;">(</span>alltodo <span style="color: #b5bd68;">""</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #cc6666;">org-agenda-overriding-header</span> <span style="color: #b5bd68;">""</span><span style="color: #de935f;">)</span>
                       <span style="color: #de935f;">(</span><span style="color: #cc6666;">org-super-agenda-groups</span>
                        <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Next to do"</span>
                           <span style="color: #81a2be;">:todo</span> <span style="color: #b5bd68;">"NEXT"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Work"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"work"</span>
                           <span style="color: #81a2be;">:priority</span> <span style="color: #b5bd68;">"A"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">3</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Important"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Important"</span>
                           <span style="color: #81a2be;">:priority</span> <span style="color: #b5bd68;">"A"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">6</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Due Today"</span>
                           <span style="color: #81a2be;">:deadline</span> today
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">2</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Due Soon"</span>
                           <span style="color: #81a2be;">:deadline</span> future
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">8</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Overdue"</span>
                           <span style="color: #81a2be;">:deadline</span> past
                           <span style="color: #81a2be;">:face</span> error
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">7</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Assignments"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Assignment"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">10</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Issues"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Issue"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">12</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Emacs"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Emacs"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">13</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Projects"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Project"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">14</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Research"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Research"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">15</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"To read"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Read"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">30</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"To watch"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"Watch"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">30</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Waiting"</span>
                           <span style="color: #81a2be;">:todo</span> <span style="color: #b5bd68;">"WAITING"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">20</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"University"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #b5bd68;">"uni"</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">32</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:name</span> <span style="color: #b5bd68;">"Trivial"</span>
                           <span style="color: #81a2be;">:priority&lt;=</span> <span style="color: #b5bd68;">"E"</span>
                           <span style="color: #81a2be;">:tag</span> <span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"Trivial"</span> <span style="color: #b5bd68;">"Unimportant"</span><span style="color: #81a2be;">)</span>
                           <span style="color: #81a2be;">:todo</span> <span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"SOMEDAY"</span> <span style="color: #81a2be;">)</span>
                           <span style="color: #81a2be;">:order</span> <span style="color: #de935f; font-weight: bold;">90</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #81a2be;">:discard</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:tag</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"Chore"</span> <span style="color: #b5bd68;">"Routine"</span> <span style="color: #b5bd68;">"Daily"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org604eefd" class="outline-5">
              <h5 id="org604eefd">
                <span class="section-number-5">5.7.1.5.</span> Snippet Helpers
              </h5>
              <div class="outline-text-5" id="text-5-7-1-5">
                <p>
                  I often want to set <code>src-block</code> headers, and
                  it&rsquo;s a pain to
                </p>
                <ul class="org-ul">
                  <li>type them out</li>
                  <li>remember what the accepted values are</li>
                  <li>oh, and specifying the same language again and again</li>
                </ul>

                <p>We can solve this in three steps</p>
                <ul class="org-ul">
                  <li>
                    having one-letter snippets, conditioned on
                    <code>(point)</code> being within a src header
                  </li>
                  <li>
                    creating a nice prompt showing accepted values and the
                    current default
                  </li>
                  <li>
                    pre-filling the <code>src-block</code> language with the
                    last language used
                  </li>
                </ul>

                <p>For header args, the keys I&rsquo;ll use are</p>
                <ul class="org-ul">
                  <li><code>r</code> for <code>:results</code></li>
                  <li><code>e</code> for <code>:exports</code></li>
                  <li><code>v</code> for <code>:eval</code></li>
                  <li><code>s</code> for <code>:session</code></li>
                  <li><code>d</code> for <code>:dir</code></li>
                </ul>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+yas/org-src-header-p</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Determine whether `</span><span style="color: #de935f;">point</span><span style="color: #717171;">' is within a src-block header or header-args."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">pcase</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-element-type</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-element-context</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">src-block</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">&lt;</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point</span><span style="color: #b294bb;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">before code part of the src-block</span>
                   <span style="color: #b294bb;">(</span><span style="color: #b294bb;">save-excursion</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:begin</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-element-context</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                                   <span style="color: #81a2be;">(</span><span style="color: #de935f;">forward-line</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span>
                                   <span style="color: #81a2be;">(</span><span style="color: #de935f;">point</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">inline-src-block</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">&lt;</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point</span><span style="color: #b294bb;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">before code part of the inline-src-block</span>
                          <span style="color: #b294bb;">(</span><span style="color: #b294bb;">save-excursion</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:begin</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-element-context</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                                          <span style="color: #81a2be;">(</span><span style="color: #de935f;">search-forward</span> <span style="color: #b5bd68;">"]{"</span><span style="color: #81a2be;">)</span>
                                          <span style="color: #81a2be;">(</span><span style="color: #de935f;">point</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">keyword</span> <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">string-match-p</span> <span style="color: #b5bd68;">"^header-args"</span> <span style="color: #b294bb;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:value</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-element-context</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Now let&rsquo;s write a function we can reference in
                  yasnippets to produce a nice interactive way to specify header
                  args.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+yas/org-prompt-header-arg</span> <span style="color: #81a2be;">(</span>arg question values<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Prompt the user to set ARG header property to one of VALUES with QUESTION.</span>
<span style="color: #717171;">The default value is identified and indicated. If either default is selected,</span>
<span style="color: #717171;">or no selection is made: nil is returned."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let*</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>src-block-p <span style="color: #b294bb;">(</span><span style="color: #de935f;">not</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">looking-back</span> <span style="color: #b5bd68;">"^#\\+property:[ \t]+header-args:.*"</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">line-beginning-position</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         <span style="color: #b5bd68;">(</span>default
           <span style="color: #b294bb;">(</span><span style="color: #b294bb;">or</span>
            <span style="color: #81a2be;">(</span><span style="color: #de935f;">cdr</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">assoc</span> arg
                        <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">if</span> src-block-p
                            <span style="color: #b294bb;">(</span><span style="color: #de935f;">nth</span> <span style="color: #de935f; font-weight: bold;">2</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-babel-get-src-block-info</span> t<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
                          <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-babel-merge-params</span>
                           <span style="color: #cc6666;">org-babel-default-header-args</span>
                           <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>lang-headers
                                  <span style="color: #b294bb;">(</span><span style="color: #de935f;">intern</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"org-babel-default-header-args:"</span>
                                                  <span style="color: #de935f;">(</span><span style="color: #81a2be;">+yas/org-src-lang</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
                             <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">boundp</span> lang-headers<span style="color: #b5bd68;">)</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eval</span> lang-headers t<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
            <span style="color: #b5bd68;">""</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         default-value<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> values <span style="color: #b5bd68;">(</span><span style="color: #de935f;">mapcar</span>
                  <span style="color: #b294bb;">(</span><span style="color: #b294bb;">lambda</span> <span style="color: #81a2be;">(</span>value<span style="color: #81a2be;">)</span>
                    <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">string-match-p</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">regexp-quote</span> value<span style="color: #b5bd68;">)</span> default<span style="color: #de935f;">)</span>
                        <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> default-value
                              <span style="color: #b5bd68;">(</span><span style="color: #de935f;">concat</span> value <span style="color: #b5bd68;">" "</span>
                                      <span style="color: #b294bb;">(</span><span style="color: #de935f;">propertize</span> <span style="color: #b5bd68;">"(default)"</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">font-lock-doc-face</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
                      value<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
                  values<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>selection <span style="color: #81a2be;">(</span><span style="color: #de935f;">consult--read</span> values <span style="color: #81a2be;">:prompt</span> question <span style="color: #81a2be;">:default</span> default-value<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #b294bb;">(</span><span style="color: #b294bb;">or</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">string-match-p</span> <span style="color: #b5bd68;">"(default)$"</span> selection<span style="color: #81a2be;">)</span>
                  <span style="color: #81a2be;">(</span><span style="color: #de935f;">string=</span> <span style="color: #b5bd68;">""</span> selection<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        selection<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Finally, we fetch the language information for new source
                  blocks.
                </p>

                <p>
                  Since we&rsquo;re getting this info, we might as well go a
                  step further and also provide the ability to determine the
                  most popular language in the buffer that doesn&rsquo;t have
                  any <code>header-args</code> set for it (with
                  <code>#+properties</code>).
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+yas/org-src-lang</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Try to find the current language of the src/header at `</span><span style="color: #de935f;">point</span><span style="color: #717171;">'.</span>
<span style="color: #717171;">Return nil otherwise."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>context <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-element-context</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">pcase</span> <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">org-element-type</span> context<span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">src-block</span> <span style="color: #b294bb;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:language</span> context<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">inline-src-block</span> <span style="color: #b294bb;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:language</span> context<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">keyword</span> <span style="color: #b294bb;">(</span><span style="color: #b294bb;">when</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">string-match</span> <span style="color: #b5bd68;">"^header-args:</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(</span><span style="color: #b5bd68;">[</span><span style="color: #c5c8c6; font-weight: bold;">^</span><span style="color: #b5bd68;"> ]+</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">"</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:value</span> context<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                  <span style="color: #81a2be;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:value</span> context<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+yas/org-last-src-lang</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Return the language of the last src-block, if it exists."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">save-excursion</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">beginning-of-line</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">re-search-backward</span> <span style="color: #b5bd68;">"^[ \t]*#\\+begin_src"</span> nil t<span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:language</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-element-context</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+yas/org-most-common-no-property-lang</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Find the lang with the most source blocks that has no global header-args, else nil."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span>src-langs header-langs<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">save-excursion</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point-min</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">while</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">re-search-forward</span> <span style="color: #b5bd68;">"^[ \t]*#\\+begin_src"</span> nil t<span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">push</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">+yas/org-src-lang</span><span style="color: #81a2be;">)</span> src-langs<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point-min</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">while</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">re-search-forward</span> <span style="color: #b5bd68;">"^[ \t]*#\\+property: +header-args"</span> nil t<span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">push</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">+yas/org-src-lang</span><span style="color: #81a2be;">)</span> header-langs<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>

    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> src-langs
          <span style="color: #b5bd68;">(</span><span style="color: #de935f;">mapcar</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">car</span>
                  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">sort alist by frequency (desc.)</span>
                  <span style="color: #b294bb;">(</span><span style="color: #de935f;">sort</span>
                   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">generate alist with form (value . frequency)</span>
                   <span style="color: #81a2be;">(</span><span style="color: #b294bb;">cl-loop</span> for <span style="color: #de935f;">(</span>n . m<span style="color: #de935f;">)</span> in <span style="color: #de935f;">(</span><span style="color: #81a2be;">seq-group-by</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">identity</span> src-langs<span style="color: #de935f;">)</span>
                            collect <span style="color: #de935f;">(</span><span style="color: #de935f;">cons</span> n <span style="color: #b5bd68;">(</span><span style="color: #de935f;">length</span> m<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                   <span style="color: #81a2be;">(</span><span style="color: #b294bb;">lambda</span> <span style="color: #de935f;">(</span>a b<span style="color: #de935f;">)</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">&gt;</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cdr</span> a<span style="color: #b5bd68;">)</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cdr</span> b<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>

    <span style="color: #de935f;">(</span><span style="color: #de935f;">car</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cl-set-difference</span> src-langs header-langs <span style="color: #81a2be;">:test</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">string=</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org344bb28" class="outline-5">
              <h5 id="org344bb28">
                <span class="section-number-5">5.7.1.6.</span> Translate capital
                keywords (old) to lower case (new)
              </h5>
              <div class="outline-text-5" id="text-5-7-1-6">
                <p>
                  Everyone used to use <code>#+CAPITAL</code> keywords. Then
                  people realised that <code>#+lowercase</code>
                  is actually both marginally easier and visually nicer, so now
                  the capital version is just used in the manual.
                </p>
                <blockquote>
                  <p>
                    Org is standardized on lower case. Uppercase is used in the
                    manual as a poor man&rsquo;s bold, and supported for
                    historical reasons. &#x2014;
                    <a
                      href="https://orgmode.org/list/87tuuw3n15.fsf@nicolasgoaziou.fr"
                      >Nicolas Goaziou on the Org ML</a
                    >
                  </p>
                </blockquote>

                <p>
                  To avoid sometimes having to choose between the hassle out of
                  updating old documents and using mixed syntax, I&rsquo;ll whip
                  up a basic transcode-y function. It likely misses some edge
                  cases, but should mostly work.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-syntax-convert-keyword-case-to-lower</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Convert all #+KEYWORDS to #+keywords."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">save-excursion</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">goto-char</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point-min</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span><span style="color: #de935f;">count</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b294bb;">)</span>
          <span style="color: #b294bb;">(</span><span style="color: #cc6666;">case-fold-search</span> nil<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">while</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">re-search-forward</span> <span style="color: #b5bd68;">"^[ \t]*#\\+[A-Z_]+"</span> nil t<span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">s-matches-p</span> <span style="color: #b5bd68;">"RESULTS"</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">replace-match</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">downcase</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">match-string</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span> t<span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> count <span style="color: #de935f;">(</span><span style="color: #de935f;">1+</span> count<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">message</span> <span style="color: #b5bd68;">"Replaced %d occurances"</span> count<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org5c0e9d2" class="outline-5">
              <h5 id="org5c0e9d2">
                <span class="section-number-5">5.7.1.7.</span> Fix problematic
                hooks
              </h5>
              <div class="outline-text-5" id="text-5-7-1-7">
                <p>
                  When one of the
                  <code class="src src-elisp"
                    ><span style="color: #cc6666">org-mode-hook</span></code
                  >
                  functions errors, it halts the hook execution. This is
                  problematic, and there are two hooks in particular which cause
                  issues. Let&rsquo;s make their failure less eventful.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> shut-up-org-problematic-hooks <span style="color: #81a2be;">(</span>orig-fn <span style="color: #f0c674;">&amp;rest</span> args<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-fancy-priorities-mode</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">ignore-errors</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">apply</span> orig-fn args<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgbe5b5a4" class="outline-5">
              <h5 id="orgbe5b5a4">
                <span class="section-number-5">5.7.1.8.</span> Mermaid diagrams
              </h5>
              <div class="outline-text-5" id="text-5-7-1-8">
                <p>Diagram can be generated using something like this</p>

                <pre class="example" id="org415dc0c">
#+begin_src mermaid :file test.png
sequenceDiagram
 A--&gt;B: Works!
#+end_src
</pre
                >

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> ob-mermaid
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-babel-do-load-languages</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-babel-load-languages</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>mermaid . t<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(setq ob-mermaid-cli-path (executable-find "mmdc"))</span>
  <span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgd123597" class="outline-5">
              <h5 id="orgd123597">
                <span class="section-number-5">5.7.1.9.</span> Org-roam
              </h5>
              <div class="outline-text-5" id="text-5-7-1-9">
                <p>Add ui for org-roam</p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> websocket
  <span style="color: #81a2be;">:after</span> org-roam<span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-roam-ui
  <span style="color: #81a2be;">:after</span> org-roam
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-roam-ui-sync-theme</span> t
        <span style="color: #cc6666;">org-roam-ui-follow</span> t
        <span style="color: #cc6666;">org-roam-ui-update-on-save</span> t
        <span style="color: #cc6666;">org-roam-ui-open-on-start</span> t<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org5364cb5" class="outline-5">
              <h5 id="org5364cb5">
                <span class="section-number-5">5.7.1.10.</span> Org-transclusion
              </h5>
              <div class="outline-text-5" id="text-5-7-1-10">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-transclusion
  <span style="color: #81a2be;">:after</span> org
  <span style="color: #81a2be;">:init</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">map!</span>
   <span style="color: #81a2be;">:map</span> <span style="color: #cc6666;">global-map</span> <span style="color: #b5bd68;">"&lt;f12&gt;"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-transclusion-add</span>
   <span style="color: #81a2be;">:leader</span>
   <span style="color: #81a2be;">:prefix</span> <span style="color: #b5bd68;">"n"</span>
   <span style="color: #81a2be;">:desc</span> <span style="color: #b5bd68;">"Org Transclusion Mode"</span> <span style="color: #b5bd68;">"t"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-transclusion-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>
          <div id="outline-container-org6a9762f" class="outline-4">
            <h4 id="org6a9762f">
              <span class="section-number-4">5.7.2.</span> Visuals
            </h4>
            <div class="outline-text-4" id="text-5-7-2"></div>
            <div id="outline-container-org97b32db" class="outline-5">
              <h5 id="org97b32db">
                <span class="section-number-5">5.7.2.1.</span> Org Modern
              </h5>
              <div class="outline-text-5" id="text-5-7-2-1">
                <p>
                  Fontifying <code>org-mode</code> buffers to be as pretty as
                  possible is of paramount importance, and Minad&rsquo;s lovely
                  <code>org-modern</code> goes a long way in this regard.
                </p>

                <p>&#x2026;with a touch of configuration&#x2026;</p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-modern
  <span style="color: #81a2be;">:hook</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-mode</span> . <span style="color: #cc6666;">org-modern-mode</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span>
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">org-modern-star '("&#9673;" "&#9675;" "&#10040;" "&#10047;" "&#10020;" "&#10012;" "&#9670;" "&#9654;")</span>
   <span style="color: #cc6666;">org-modern-table-vertical</span> <span style="color: #de935f; font-weight: bold;">1</span>
   <span style="color: #cc6666;">org-modern-table-horizontal</span> <span style="color: #de935f; font-weight: bold;">0.2</span>
   <span style="color: #cc6666;">org-modern-todo-faces</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"</span><span style="color: #f0c674; font-weight: bold;">TODO</span><span style="color: #b5bd68;">"</span> <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> org-todo<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"PROJ"</span> <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-project<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"STRT"</span> <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-active<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"[-]"</span>  <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-active<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"HOLD"</span> <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-onhold<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"WAIT"</span> <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-onhold<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"[?]"</span>  <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-onhold<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"KILL"</span> <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-cancel<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"NO"</span>   <span style="color: #81a2be;">:inverse-video</span> t <span style="color: #81a2be;">:inherit</span> +org-todo-cancel<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #cc6666;">org-modern-footnote</span>
   <span style="color: #de935f;">(</span><span style="color: #de935f;">cons</span> nil <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cadr</span> <span style="color: #cc6666;">org-script-display</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #cc6666;">org-modern-block-fringe</span> t
   <span style="color: #cc6666;">org-modern-block-name</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>t . t<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"src"</span> <span style="color: #b5bd68;">"&#187;"</span> <span style="color: #b5bd68;">"&#171;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"example"</span> <span style="color: #b5bd68;">"&#187;&#8211;"</span> <span style="color: #b5bd68;">"&#8211;&#171;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"quote"</span> <span style="color: #b5bd68;">"&#10077;"</span> <span style="color: #b5bd68;">"&#10078;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"export"</span> <span style="color: #b5bd68;">"&#9193;"</span> <span style="color: #b5bd68;">"&#9194;"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
   <span style="color: #cc6666;">org-modern-progress</span> nil
   <span style="color: #cc6666;">org-modern-priority</span> nil
   <span style="color: #cc6666;">org-modern-horizontal-rule</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">make-string</span> <span style="color: #de935f; font-weight: bold;">36</span> ?&#9472;<span style="color: #de935f;">)</span>
   <span style="color: #cc6666;">org-modern-keyword</span>
   <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>t . t<span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"title"</span> . <span style="color: #b5bd68;">"&#120399;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"subtitle"</span> . <span style="color: #b5bd68;">"&#120425;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"author"</span> . <span style="color: #b5bd68;">"&#120380;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"email"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#57569;"</span> <span style="color: #de935f; font-weight: bold;">0</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.14</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"date"</span> . <span style="color: #b5bd68;">"&#120383;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"property"</span> . <span style="color: #b5bd68;">"&#9784;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"options"</span> . <span style="color: #b5bd68;">"&#8997;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"startup"</span> . <span style="color: #b5bd68;">"&#9211;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"macro"</span> . <span style="color: #b5bd68;">"&#120028;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"bind"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#57687;"</span> <span style="color: #de935f; font-weight: bold;">0</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.1</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"bibliography"</span> . <span style="color: #b5bd68;">"&#62469;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"print_bibliography"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#58699;"</span> <span style="color: #de935f; font-weight: bold;">0</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.1</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"cite_export"</span> . <span style="color: #b5bd68;">"&#62469;&#11181;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"print_glossary"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#58699;&#7468;&#7611;"</span> <span style="color: #de935f; font-weight: bold;">0</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.1</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"glossary_sources"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#57427;"</span> <span style="color: #de935f; font-weight: bold;">0</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.14</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"include"</span> . <span style="color: #b5bd68;">"&#8676;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"setupfile"</span> . <span style="color: #b5bd68;">"&#8666;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"html_head"</span> . <span style="color: #b5bd68;">"&#127351;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"html"</span> . <span style="color: #b5bd68;">"&#127319;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex_class"</span> . <span style="color: #b5bd68;">"&#127291;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex_class_options"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#127291;&#59576;"</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #de935f; font-weight: bold;">2</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.14</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex_header"</span> . <span style="color: #b5bd68;">"&#127355;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex_header_extra"</span> . <span style="color: #b5bd68;">"&#127355;&#8314;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex"</span> . <span style="color: #b5bd68;">"&#127323;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"beamer_theme"</span> . <span style="color: #b5bd68;">"&#127281;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"beamer_color_theme"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#127281;&#58378;"</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #de935f; font-weight: bold;">2</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.12</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"beamer_font_theme"</span> . <span style="color: #b5bd68;">"&#127281;&#119808;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"beamer_header"</span> . <span style="color: #b5bd68;">"&#127345;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"beamer"</span> . <span style="color: #b5bd68;">"&#127313;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"attr_latex"</span> . <span style="color: #b5bd68;">"&#127259;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"attr_html"</span> . <span style="color: #b5bd68;">"&#127255;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"attr_org"</span> . <span style="color: #b5bd68;">"&#9386;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"call"</span> . #<span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"&#58726;"</span> <span style="color: #de935f; font-weight: bold;">0</span> <span style="color: #de935f; font-weight: bold;">1</span> <span style="color: #81a2be;">(</span>display <span style="color: #de935f;">(</span>raise <span style="color: #de935f; font-weight: bold;">-0.15</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"name"</span> . <span style="color: #b5bd68;">"&#8269;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"header"</span> . <span style="color: #b5bd68;">"&#8250;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"caption"</span> . <span style="color: #b5bd68;">"&#9776;"</span><span style="color: #b5bd68;">)</span>
     <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"RESULTS"</span> . <span style="color: #b5bd68;">"&#129078;"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">custom-set-faces!</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #cc6666;">org-modern-statistics</span> <span style="color: #81a2be;">:inherit</span> org-checkbox-statistics-todo<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Since <code>org-modern</code>&rsquo;s tag face supplants
                  Org&rsquo;s tag face, we need to adjust the spell-check face
                  ignore list
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> spell-fu
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">cl-pushnew</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-modern-tag</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">alist-get</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span> <span style="color: #cc6666;">+spell-excluded-faces-alist</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org4001f82" class="outline-5">
              <h5 id="org4001f82">
                <span class="section-number-5">5.7.2.2.</span> Emphasis markers
              </h5>
              <div class="outline-text-5" id="text-5-7-2-2">
                <p>
                  While <code>org-hide-emphasis-markers</code> is very nice, it
                  can sometimes make edits which occur at the border a bit more
                  fiddley. We can improve this situation without sacrificing
                  visual amenities with the <code>org-appear</code> package.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-appear
  <span style="color: #81a2be;">:hook</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-mode</span> . <span style="color: #cc6666;">org-appear-mode</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-appear-autoemphasis</span> t
        <span style="color: #cc6666;">org-appear-autosubmarkers</span> t
        <span style="color: #cc6666;">org-appear-autolinks</span> nil<span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">for proper first-time setup, `</span><span style="color: #de935f;">org-appear--set-elements</span><span style="color: #5a5b5a;">'</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">needs to be run after other hooks have acted.</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">run-at-time</span> nil nil <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-appear--set-elements</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org07c074c" class="outline-5">
              <h5 id="org07c074c">
                <span class="section-number-5">5.7.2.3.</span> Font Display
              </h5>
              <div class="outline-text-5" id="text-5-7-2-3">
                <p>
                  Mixed pitch is great. As is <code>+org-pretty-mode</code>,
                  let&rsquo;s use them.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">+org-pretty-mode</span> <span style="color: #c5c8c6;">#'</span><span style="color: #cc6666;">mixed-pitch-mode</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>Let&rsquo;s make headings a bit bigger</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">custom-set-faces!</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-1 <span style="color: #81a2be;">:weight</span> extra-bold <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.25</span><span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-2 <span style="color: #81a2be;">:weight</span> bold <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.15</span><span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-3 <span style="color: #81a2be;">:weight</span> bold <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.12</span><span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-4 <span style="color: #81a2be;">:weight</span> semi-bold <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.09</span><span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-5 <span style="color: #81a2be;">:weight</span> semi-bold <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.06</span><span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-6 <span style="color: #81a2be;">:weight</span> semi-bold <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.03</span><span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-8 <span style="color: #81a2be;">:weight</span> semi-bold<span style="color: #81a2be;">)</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>outline-9 <span style="color: #81a2be;">:weight</span> semi-bold<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>And the same with the title.</p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">custom-set-faces!</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>org-document-title <span style="color: #81a2be;">:height</span> <span style="color: #de935f; font-weight: bold;">1.2</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  It seems reasonable to have deadlines in the error face when
                  they&rsquo;re passed.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-agenda-deadline-faces</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #de935f; font-weight: bold;">1.001</span> . error<span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #de935f; font-weight: bold;">1.0</span> . org-warning<span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #de935f; font-weight: bold;">0.5</span> . org-upcoming-deadline<span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span><span style="color: #de935f; font-weight: bold;">0.0</span> . org-upcoming-distant-deadline<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  We can then have quote blocks stand out a bit more by making
                  them <i>italic</i>.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-fontify-quote-and-verse-blocks</span> t<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  While <code>org-hide-emphasis-markers</code> is very nice, it
                  can sometimes make edits which occur at the border a bit more
                  fiddley. We can improve this situation without sacrificing
                  visual amenities with the <code>org-appear</code> package.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-appear
  <span style="color: #81a2be;">:hook</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-mode</span> . <span style="color: #cc6666;">org-appear-mode</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-appear-autoemphasis</span> t
        <span style="color: #cc6666;">org-appear-autosubmarkers</span> t
        <span style="color: #cc6666;">org-appear-autolinks</span> nil<span style="color: #81a2be;">)</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">for proper first-time setup, `</span><span style="color: #de935f;">org-appear--set-elements</span><span style="color: #5a5b5a;">'</span>
  <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">needs to be run after other hooks have acted.</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">run-at-time</span> nil nil <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-appear--set-elements</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Org files can be rather nice to look at, particularly with
                  some of the customisations here. This comes at a cost however,
                  expensive font-lock. Feeling like you&rsquo;re typing through
                  molasses in large files is no fun, but there is a way I can
                  defer font-locking when typing to make the experience more
                  responsive.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">locally-defer-font-lock</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Set jit-lock defer and stealth, when buffer is over a certain size."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">when</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">&gt;</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">buffer-size</span><span style="color: #b5bd68;">)</span> <span style="color: #de935f; font-weight: bold;">50000</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">jit-lock-defer-time</span> <span style="color: #de935f; font-weight: bold;">0.05</span>
                <span style="color: #cc6666;">jit-lock-stealth-time</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-mode-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">locally-defer-font-lock</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
                <p>
                  Apparently this causes issues with some people, but I
                  haven&rsquo;t noticed anything problematic beyond the expected
                  slight delay in some fontification, so until I do I&rsquo;ll
                  use the above.
                </p>
              </div>
            </div>

            <div id="outline-container-orgde97588" class="outline-5">
              <h5 id="orgde97588">
                <span class="section-number-5">5.7.2.4.</span> Reduced text
                indent
              </h5>
              <div class="outline-text-5" id="text-5-7-2-4">
                <p>
                  Thanks to the various bits and bobs of setup we have here, the
                  non-heading lines tend to appear over-indented in
                  <code>org-indent-mode</code>. We can adjust this by modifying
                  the generated text prefixes.
                </p>

                <p>
                  There&rsquo;s another issue we can have when using mixed-pitch
                  mode, where the line height is set by the indent prefix
                  displayed with the fixed-pitch font. This means that on
                  0-indent lines the line spacing can be different, which
                  doesn&rsquo;t look very good. We can also solve this problem
                  by modifying the generated text prefixes to but a fixed-pitch
                  zero width space at the start of 0-indent lines instead of
                  nothing.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> +org-indent--reduced-text-prefixes <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-indent--compute-prefixes</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-indent--text-line-prefixes</span>
        <span style="color: #de935f;">(</span><span style="color: #de935f;">make-vector</span> <span style="color: #cc6666;">org-indent--deepest-level</span> nil<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">when</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">&gt;</span> <span style="color: #cc6666;">org-indent-indentation-per-level</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">dotimes</span> <span style="color: #b5bd68;">(</span>n <span style="color: #cc6666;">org-indent--deepest-level</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">aset</span> <span style="color: #cc6666;">org-indent--text-line-prefixes</span>
            n
            <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-add-props</span>
                <span style="color: #81a2be;">(</span><span style="color: #de935f;">concat</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">make-string</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">*</span> n <span style="color: #b294bb;">(</span><span style="color: #de935f;">1-</span> <span style="color: #cc6666;">org-indent-indentation-per-level</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
                                     ?\s<span style="color: #de935f;">)</span>
                        <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">&gt;</span> n <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b5bd68;">)</span>
                             <span style="color: #b5bd68;">(</span><span style="color: #de935f;">char-to-string</span> <span style="color: #cc6666;">org-indent-boundary-char</span><span style="color: #b5bd68;">)</span>
                          <span style="color: #b5bd68;">"\u200b"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                nil <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-indent</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-orgf662579" class="outline-5">
              <h5 id="orgf662579">
                <span class="section-number-5">5.7.2.5.</span> Fontifying inline
                src blocks
              </h5>
              <div class="outline-text-5" id="text-5-7-2-5">
                <p>
                  Org does lovely things with <code>#+begin_src</code> blocks,
                  like using font-lock for language&rsquo;s major-mode behind
                  the scenes and pulling out the lovely colourful results. By
                  contrast, inline <code>src_</code> blocks are somewhat
                  neglected.
                </p>

                <p>
                  I am not the first person to feel this way, thankfully others
                  have
                  <a
                    href="https://stackoverflow.com/questions/20309842/how-to-syntax-highlight-for-org-mode-inline-source-code-src-lang/28059832"
                    >taken to stackexchange</a
                  >
                  to voice their desire for inline src fontification. I was
                  going to steal their work, but unfortunately they didn&rsquo;t
                  perform <i>true</i> source code fontification, but simply
                  applied the <code>org-code</code> face to the content.
                </p>

                <p>
                  We can do better than that, and we shall! Using
                  <code>org-src-font-lock-fontify-block</code>
                  we can apply language-appropriate syntax highlighting. Then,
                  continuing on to
                  <code>{{{results(...)}}}</code> , it can have the
                  <code>org-block</code> face applied to match, and then the
                  value-surrounding constructs hidden by mimicking the behaviour
                  of <code>prettify-symbols-mode</code>.
                </p>

                <div class="warning" id="orgab7702b">
                  <p>
                    This currently only highlights a single inline src block per
                    line. I have no idea why it stops, but I&rsquo;d rather it
                    didn&rsquo;t. If you have any idea what&rsquo;s going on or
                    how to fix this <i>please</i> get in touch.
                  </p>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">org-prettify-inline-results</span> t
  <span style="color: #717171;">"Whether to use (ab)use prettify-symbols-mode on {{{results(...)}}}.</span>
<span style="color: #717171;">Either t or a cons cell of strings which are used as substitutions</span>
<span style="color: #717171;">for the start and end of inline results, respectively."</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">org-fontify-inline-src-blocks-max-length</span> <span style="color: #de935f; font-weight: bold;">200</span>
  <span style="color: #717171;">"Maximum content length of an inline src block that will be fontified."</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-fontify-inline-src-blocks</span> <span style="color: #81a2be;">(</span>limit<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Try to apply `</span><span style="color: #de935f;">org-fontify-inline-src-blocks-1</span><span style="color: #717171;">'."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">condition-case</span> nil
      <span style="color: #de935f;">(</span><span style="color: #de935f;">org-fontify-inline-src-blocks-1</span> limit<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">error</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">message</span> <span style="color: #b5bd68;">"Org mode fontification error in %S at %d"</span>
                    <span style="color: #b294bb;">(</span><span style="color: #de935f;">current-buffer</span><span style="color: #b294bb;">)</span>
                    <span style="color: #b294bb;">(</span><span style="color: #de935f;">line-number-at-pos</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-fontify-inline-src-blocks-1</span> <span style="color: #81a2be;">(</span>limit<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Fontify inline src_LANG blocks, from `</span><span style="color: #de935f;">point</span><span style="color: #717171;">' up to LIMIT."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #cc6666;">case-fold-search</span> t<span style="color: #b5bd68;">)</span>
        <span style="color: #b5bd68;">(</span>initial-point <span style="color: #b294bb;">(</span><span style="color: #de935f;">point</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">while</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">re-search-forward</span> <span style="color: #b5bd68;">"\\_&lt;src_</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(</span><span style="color: #b5bd68;">[</span><span style="color: #c5c8c6; font-weight: bold;">^</span><span style="color: #b5bd68;"> \t\n[{]+</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">[{[]?"</span> limit t<span style="color: #b5bd68;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">stolen from `</span><span style="color: #de935f;">org-element-inline-src-block-parser</span><span style="color: #5a5b5a;">'</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b294bb;">(</span><span style="color: #81a2be;">(</span>beg <span style="color: #de935f;">(</span><span style="color: #de935f;">match-beginning</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
            pt
            <span style="color: #81a2be;">(</span>lang-beg <span style="color: #de935f;">(</span><span style="color: #de935f;">match-beginning</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
            <span style="color: #81a2be;">(</span>lang-end <span style="color: #de935f;">(</span><span style="color: #de935f;">match-end</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">remove-text-properties</span> beg lang-end <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>face nil<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> lang-beg lang-end <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-meta-line</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> beg lang-beg <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">shadow</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> beg lang-end <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-block</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> pt <span style="color: #81a2be;">(</span><span style="color: #de935f;">goto-char</span> lang-end<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">`</span><span style="color: #de935f;">org-element--parse-paired-brackets</span><span style="color: #5a5b5a;">' doesn't take a limit, so to</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">prevent it searching the entire rest of the buffer we temporarily</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">narrow the active region.</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">save-restriction</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">narrow-to-region</span> beg <span style="color: #de935f;">(</span><span style="color: #de935f;">min</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point-max</span><span style="color: #b5bd68;">)</span> limit <span style="color: #b5bd68;">(</span><span style="color: #de935f;">+</span> lang-end <span style="color: #cc6666;">org-fontify-inline-src-blocks-max-length</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #b294bb;">when</span> <span style="color: #de935f;">(</span><span style="color: #b294bb;">ignore-errors</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-element--parse-paired-brackets</span> ?\[<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #de935f;">remove-text-properties</span> pt <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span>face nil<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> pt <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-block</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> pt <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #b294bb;">when</span> <span style="color: #de935f;">(</span><span style="color: #b294bb;">ignore-errors</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-element--parse-paired-brackets</span> ?\{<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #de935f;">remove-text-properties</span> pt <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span>face nil<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> pt <span style="color: #b5bd68;">(</span><span style="color: #de935f;">1+</span> pt<span style="color: #b5bd68;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span>org-block shadow<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">=</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">1+</span> pt<span style="color: #b294bb;">)</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">1-</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">point</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
              <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">if</span> <span style="color: #cc6666;">org-src-fontify-natively</span>
                  <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-src-font-lock-fontify-block</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">buffer-substring-no-properties</span> lang-beg lang-end<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">1+</span> pt<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">1-</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">point</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
                <span style="color: #b294bb;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">1+</span> pt<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">1-</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">point</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-block</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">1-</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span>org-block shadow<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
            <span style="color: #de935f;">(</span><span style="color: #b294bb;">setq</span> pt <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">when</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">and</span> <span style="color: #cc6666;">org-prettify-inline-results</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">re-search-forward</span> <span style="color: #b5bd68;">"\\= {{{results("</span> limit t<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> pt <span style="color: #de935f;">(</span><span style="color: #de935f;">1+</span> pt<span style="color: #de935f;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-block</span><span style="color: #81a2be;">)</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">goto-char</span> pt<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #cc6666;">org-prettify-inline-results</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">goto-char</span> initial-point<span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">org-fontify-inline-src-results</span> limit<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-fontify-inline-src-results</span> <span style="color: #81a2be;">(</span>limit<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">while</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">re-search-forward</span> <span style="color: #b5bd68;">"{{{results(</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">(</span><span style="color: #b5bd68;">.+?</span><span style="color: #c5c8c6; font-weight: bold;">\\</span><span style="color: #c5c8c6; font-weight: bold;">)</span><span style="color: #b5bd68;">)}}}"</span> limit t<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">remove-list-of-text-properties</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">match-beginning</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b5bd68;">)</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">point</span><span style="color: #b5bd68;">)</span>
                                    <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span>composition
                                      prettify-symbols-start
                                      prettify-symbols-end<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">font-lock-append-text-property</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">match-beginning</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b5bd68;">)</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">match-end</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b5bd68;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">face</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-block</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>start <span style="color: #81a2be;">(</span><span style="color: #de935f;">match-beginning</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span> <span style="color: #b294bb;">(</span>end <span style="color: #81a2be;">(</span><span style="color: #de935f;">match-beginning</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">with-silent-modifications</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">compose-region</span> start end <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">org-prettify-inline-results</span> t<span style="color: #de935f;">)</span> <span style="color: #b5bd68;">"&#10216;"</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">car</span> <span style="color: #cc6666;">org-prettify-inline-results</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">add-text-properties</span> start end <span style="color: #c5c8c6;">`</span><span style="color: #81a2be;">(</span>prettify-symbols-start ,start prettify-symbols-end ,end<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>start <span style="color: #81a2be;">(</span><span style="color: #de935f;">match-end</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span> <span style="color: #b294bb;">(</span>end <span style="color: #81a2be;">(</span><span style="color: #de935f;">point</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">with-silent-modifications</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">compose-region</span> start end <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">org-prettify-inline-results</span> t<span style="color: #de935f;">)</span> <span style="color: #b5bd68;">"&#10217;"</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">cdr</span> <span style="color: #cc6666;">org-prettify-inline-results</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">add-text-properties</span> start end <span style="color: #c5c8c6;">`</span><span style="color: #81a2be;">(</span>prettify-symbols-start ,start prettify-symbols-end ,end<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-fontify-inline-src-blocks-enable</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Add inline src fontification to font-lock in Org.</span>
<span style="color: #717171;">Must be run as part of `</span><span style="color: #de935f;">org-font-lock-set-keywords-hook</span><span style="color: #717171;">'."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-font-lock-extra-keywords</span>
        <span style="color: #de935f;">(</span><span style="color: #de935f;">append</span> <span style="color: #cc6666;">org-font-lock-extra-keywords</span> <span style="color: #c5c8c6;">'</span><span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span><span style="color: #de935f;">org-fontify-inline-src-blocks</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-font-lock-set-keywords-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-fontify-inline-src-blocks-enable</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org6004c2b" class="outline-5">
              <h5 id="org6004c2b">
                <span class="section-number-5">5.7.2.6.</span> Symbols
              </h5>
              <div class="outline-text-5" id="text-5-7-2-6">
                <p>
                  It&rsquo;s also nice to change the character used for
                  collapsed items (by default <code>…</code>), I think
                  <code>▾</code> is better for indicating &rsquo;collapsed
                  section&rsquo;. and add an extra <code>org-bullet</code> to
                  the default list of four. I&rsquo;ve also added some fun
                  alternatives, just commented out.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(use-package org-pretty-tags</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:config</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">(setq org-pretty-tags-surrogate-strings</span>
<span style="color: #5a5b5a;">;;        </span><span style="color: #5a5b5a;">`(("uni"        . ,(all-the-icons-faicon   "graduation-cap" :face 'all-the-icons-purple  :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("ucc"        . ,(all-the-icons-material "computer"       :face 'all-the-icons-silver  :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("assignment" . ,(all-the-icons-material "library_books"  :face 'all-the-icons-orange  :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("test"       . ,(all-the-icons-material "timer"          :face 'all-the-icons-red     :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("lecture"    . ,(all-the-icons-fileicon "keynote"        :face 'all-the-icons-orange  :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("email"      . ,(all-the-icons-faicon   "envelope"       :face 'all-the-icons-blue    :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("read"       . ,(all-the-icons-octicon  "book"           :face 'all-the-icons-lblue   :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("article"    . ,(all-the-icons-octicon  "file-text"      :face 'all-the-icons-yellow  :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("web"        . ,(all-the-icons-faicon   "globe"          :face 'all-the-icons-green   :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("info"       . ,(all-the-icons-faicon   "info-circle"    :face 'all-the-icons-blue    :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("issue"      . ,(all-the-icons-faicon   "bug"            :face 'all-the-icons-red     :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("someday"    . ,(all-the-icons-faicon   "calendar-o"     :face 'all-the-icons-cyan    :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("idea"       . ,(all-the-icons-octicon  "light-bulb"     :face 'all-the-icons-yellow  :v-adjust 0.01))</span>
<span style="color: #5a5b5a;">;;          </span><span style="color: #5a5b5a;">("emacs"      . ,(all-the-icons-fileicon "emacs"          :face 'all-the-icons-lpurple :v-adjust 0.01))))</span>
<span style="color: #5a5b5a;">;;  </span><span style="color: #5a5b5a;">(org-pretty-tags-global-mode))</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> org-superstar
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">org-superstar-headline-bullets-list '("&#9673;" "&#9675;" "&#10040;" "&#10047;" "&#10020;" "&#10012;" "&#9670;" "&#9654;")</span>
        <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">org-superstar-headline-bullets-list '("&#8544;" "&#8545;" "&#8546;" "&#8547;" "&#8548;" "&#8549;" "&#8550;" "&#8551;" "&#8552;" "&#8553;")</span>
        org-superstar-prettify-item-bullets t <span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-ellipsis</span> <span style="color: #b5bd68;">" &#9662; "</span>
      <span style="color: #cc6666;">org-hide-leading-stars</span> t
      <span style="color: #cc6666;">org-priority-highest</span> ?A
      <span style="color: #cc6666;">org-priority-lowest</span> ?E
      <span style="color: #cc6666;">org-priority-faces</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span>?A . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-red</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>?B . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-orange</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>?C . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-yellow</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>?D . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-green</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>?E . <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">all-the-icons-blue</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
                <p>
                  It&rsquo;s also nice to make use of the Unicode characters for
                  check boxes, and other commands.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">appendq!</span> <span style="color: #cc6666;">+ligatures-extra-symbols</span>
          <span style="color: #81a2be;">(</span><span style="color: #de935f;">list</span>
           <span style="color: #81a2be;">:list_property</span> <span style="color: #b5bd68;">"&#8759;"</span>
           <span style="color: #81a2be;">:em_dash</span>       <span style="color: #b5bd68;">"&#8212;"</span>
           <span style="color: #81a2be;">:ellipses</span>      <span style="color: #b5bd68;">"&#8230;"</span>
           <span style="color: #81a2be;">:arrow_right</span>   <span style="color: #b5bd68;">"&#8594;"</span>
           <span style="color: #81a2be;">:arrow_left</span>    <span style="color: #b5bd68;">"&#8592;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:title         "&#120399;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:subtitle      "&#120425;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:author        "&#120380;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:date          "&#120383;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:latex_class   "&#127282;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:attr_latex    "&#127259;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:attr_html     "&#127255;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:begin_quote   "&#10077;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:end_quote     "&#10078;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:caption       "&#9776;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:header        "&#8250;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:bibliography  "&#62469;"</span>
           <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">:print_biblio  "&#58699;"</span>
           <span style="color: #81a2be;">)</span>
          <span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> +org-init-appearance-h--no-ligatures-a <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+org-init-appearance-h</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-ligatures!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span> nil<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-ligatures!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span>
    <span style="color: #81a2be;">:list_property</span> <span style="color: #b5bd68;">"::"</span>
    <span style="color: #81a2be;">:em_dash</span>       <span style="color: #b5bd68;">"---"</span>
    <span style="color: #81a2be;">:ellipsis</span>      <span style="color: #b5bd68;">"..."</span>
    <span style="color: #81a2be;">:arrow_right</span>   <span style="color: #b5bd68;">"-&gt;"</span>
    <span style="color: #81a2be;">:arrow_left</span>    <span style="color: #b5bd68;">"&lt;-"</span>
    <span style="color: #81a2be;">:arrow_lr</span>      <span style="color: #b5bd68;">"&lt;-&gt;"</span>
    <span style="color: #81a2be;">:properties</span>    <span style="color: #b5bd68;">":PROPERTIES:"</span>
    <span style="color: #81a2be;">:end</span>           <span style="color: #b5bd68;">":END:"</span>
    <span style="color: #81a2be;">:priority_a</span>    <span style="color: #b5bd68;">"[#A]"</span>
    <span style="color: #81a2be;">:priority_b</span>    <span style="color: #b5bd68;">"[#B]"</span>
    <span style="color: #81a2be;">:priority_c</span>    <span style="color: #b5bd68;">"[#C]"</span>
    <span style="color: #81a2be;">:priority_d</span>    <span style="color: #b5bd68;">"[#D]"</span>
    <span style="color: #81a2be;">:priority_e</span>    <span style="color: #b5bd68;">"[#E]"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(set-ligatures! 'org-mode</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:merge t</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:list_property "::"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:em_dash       "---"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:ellipsis      "..."</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:arrow_right   "-&gt;"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">:arrow_left    "&lt;-"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :title         "#+title:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :subtitle      "#+subtitle:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :author        "#+author:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :date          "#+date:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :latex_class   "#+latex_class:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :attr_latex    "#+attr_latex:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :attr_html     "#+attr_html:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :begin_quote   "#+begin_quote"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :end_quote     "#+end_quote"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :caption       "#+caption:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :header        "#+header:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :bibliography  "#+bibliography:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">;; :print-biblio  "#+print_bibliography:"</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">)</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(plist-put +ligatures-extra-symbols :name "&#8269;")</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-orgd5bdaa5" class="outline-5">
              <h5 id="orgd5bdaa5">
                <span class="section-number-5">5.7.2.7.</span> LaTeX Fragments
              </h5>
              <div class="outline-text-5" id="text-5-7-2-7"></div>
              <div id="outline-container-org5efe4fb" class="outline-6">
                <h6 id="org5efe4fb">
                  <span class="section-number-6">5.7.2.7.1.</span> Prettier
                  highlighting
                </h6>
                <div class="outline-text-6" id="text-5-7-2-7-1">
                  <p>First off, we want those fragments to look good.</p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-highlight-latex-and-related</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>native script entities<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>

                  <p>
                    However, by using <code>native</code> highlighting the
                    <code>org-block</code> face is added, and that doesn&rsquo;t
                    look too great &#x2014; particularly when the fragments are
                    previewed.
                  </p>

                  <p>
                    Ideally
                    <code>org-src-font-lock-fontify-block</code> wouldn&rsquo;t
                    add the <code>org-block</code> face, but we can avoid
                    advising that entire function by just adding another face
                    with <code>:inherit default</code> which will override the
                    background colour.
                  </p>

                  <p>
                    Inspecting <code>org-do-latex-and-related</code> shows that
                    <code>"latex"</code> is the language argument passed, and so
                    we can override the background as discussed above.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">org-src</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-src-block-faces</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"latex"</span> <span style="color: #de935f;">(</span><span style="color: #81a2be;">:inherit</span> default <span style="color: #81a2be;">:extend</span> t<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>

              <div id="outline-container-org3a00c44" class="outline-6">
                <h6 id="org3a00c44">
                  <span class="section-number-6">5.7.2.7.2.</span> More eager
                  rendering
                </h6>
                <div class="outline-text-6" id="text-5-7-2-7-2">
                  <p>
                    What&rsquo;s better than syntax-highlighted LaTeX is
                    <i>rendered</i> LaTeX though, and we can have this be
                    performed automatically with <code>org-fragtog</code>.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> org-fragtog
  <span style="color: #81a2be;">:hook</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">org-mode</span> . <span style="color: #cc6666;">org-fragtog-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-org38e47cb" class="outline-6">
                <h6 id="org38e47cb">
                  <span class="section-number-6">5.7.2.7.3.</span> Prettier
                  rendering
                </h6>
                <div class="outline-text-6" id="text-5-7-2-7-3">
                  <p>
                    Since we can, instead of making the background colour match
                    the <code>default</code> face, let&rsquo;s make it
                    transparent.
                  </p>
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-format-latex-options</span>
      <span style="color: #81a2be;">(</span><span style="color: #de935f;">plist-put</span> <span style="color: #cc6666;">org-format-latex-options</span> <span style="color: #81a2be;">:background</span> <span style="color: #b5bd68;">"Transparent"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
              <div id="outline-container-org1aa67b3" class="outline-6">
                <h6 id="org1aa67b3">
                  <span class="section-number-6">5.7.2.7.4.</span> Fixes for
                  lualatex
                </h6>
                <div class="outline-text-6" id="text-5-7-2-7-4">
                  <div class="org-src-container">
                    <pre
                      class="src src-emacs-lisp"
                    ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-preview-latex-default-process</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">dvisvgm</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-preview-latex-process-alist</span>
       <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span>dvipng <span style="color: #81a2be;">:programs</span>
         <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"lualatex"</span> <span style="color: #b5bd68;">"dvipng"</span><span style="color: #b5bd68;">)</span>
         <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"dvi &gt; png"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: latex and dvipng."</span> <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"dvi"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"png"</span> <span style="color: #81a2be;">:image-size-adjust</span>
         <span style="color: #b5bd68;">(</span><span style="color: #de935f; font-weight: bold;">1.0</span> . <span style="color: #de935f; font-weight: bold;">1.0</span><span style="color: #b5bd68;">)</span>
         <span style="color: #81a2be;">:latex-compiler</span>
         <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"lualatex -output-format dvi -interaction nonstopmode -output-directory %o %f"</span><span style="color: #b5bd68;">)</span>
         <span style="color: #81a2be;">:image-converter</span>
         <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"dvipng -fg %F -bg %B -D %D -T tight -o %O %f"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
       <span style="color: #de935f;">(</span>dvisvgm <span style="color: #81a2be;">:programs</span>
          <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex"</span> <span style="color: #b5bd68;">"dvisvgm"</span><span style="color: #b5bd68;">)</span>
          <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"dvi &gt; svg"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: latex and dvisvgm."</span> <span style="color: #81a2be;">:use-xcolor</span> t <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"xdv"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"svg"</span> <span style="color: #81a2be;">:image-size-adjust</span>
          <span style="color: #b5bd68;">(</span><span style="color: #de935f; font-weight: bold;">1.7</span> . <span style="color: #de935f; font-weight: bold;">1.5</span><span style="color: #b5bd68;">)</span>
          <span style="color: #81a2be;">:latex-compiler</span>
          <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"xelatex -no-pdf -interaction nonstopmode -output-directory %o %f"</span><span style="color: #b5bd68;">)</span>
          <span style="color: #81a2be;">:image-converter</span>
          <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"dvisvgm %f -n -b min -c %S -o %O"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
       <span style="color: #de935f;">(</span>imagemagick <span style="color: #81a2be;">:programs</span>
              <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"latex"</span> <span style="color: #b5bd68;">"convert"</span><span style="color: #b5bd68;">)</span>
              <span style="color: #81a2be;">:description</span> <span style="color: #b5bd68;">"pdf &gt; png"</span> <span style="color: #81a2be;">:message</span> <span style="color: #b5bd68;">"you need to install the programs: latex and imagemagick."</span> <span style="color: #81a2be;">:use-xcolor</span> t <span style="color: #81a2be;">:image-input-type</span> <span style="color: #b5bd68;">"pdf"</span> <span style="color: #81a2be;">:image-output-type</span> <span style="color: #b5bd68;">"png"</span> <span style="color: #81a2be;">:image-size-adjust</span>
              <span style="color: #b5bd68;">(</span><span style="color: #de935f; font-weight: bold;">1.0</span> . <span style="color: #de935f; font-weight: bold;">1.0</span><span style="color: #b5bd68;">)</span>
              <span style="color: #81a2be;">:latex-compiler</span>
              <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"xelatex -no-pdf -interaction nonstopmode -output-directory %o %f"</span><span style="color: #b5bd68;">)</span>
              <span style="color: #81a2be;">:image-converter</span>
              <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"convert -density %D -trim -antialias %f -quality 100 %O"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="outline-container-orga10a1b2" class="outline-4">
            <h4 id="orga10a1b2">
              <span class="section-number-4">5.7.3.</span> Exporting
            </h4>
            <div class="outline-text-4" id="text-5-7-3"></div>
            <div id="outline-container-org720d7d2" class="outline-5">
              <h5 id="org720d7d2">
                <span class="section-number-5">5.7.3.1.</span> Exporting Org
                code
              </h5>
              <div class="outline-text-5" id="text-5-7-3-1">
                <p>
                  With all our Org config and hooks, exporting an Org code block
                  when using a font-lock based method can produce undesirable
                  results. To address this, we can tweak
                  <code>+org-babel-mode-alist</code> when exporting.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+org-mode--fontlock-only-mode</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Just apply org-mode's font-lock once."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #cc6666;">org-mode-hook</span>
        <span style="color: #cc6666;">org-hide-leading-stars</span>
        <span style="color: #cc6666;">org-hide-emphasis-markers</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">org-set-font-lock-defaults</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">font-lock-ensure</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">fundamental-mode</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">+org-export-babel-mask-org-config</span> <span style="color: #81a2be;">(</span>_backend<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Use `</span><span style="color: #de935f;">+org-mode--fontlock-only-mode</span><span style="color: #717171;">' instead of `</span><span style="color: #de935f;">org-mode</span><span style="color: #717171;">'."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq-local</span> <span style="color: #cc6666;">org-src-lang-modes</span>
              <span style="color: #de935f;">(</span><span style="color: #de935f;">append</span> <span style="color: #cc6666;">org-src-lang-modes</span>
                      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">list</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">cons</span> <span style="color: #b5bd68;">"org"</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+org-mode--fontlock-only</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #de935f;">add-hook</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-export-before-processing-hook</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">+org-export-babel-mask-org-config</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-orgff2f5f4" class="outline-5">
              <h5 id="orgff2f5f4">
                <span class="section-number-5">5.7.3.2.</span> General settings
              </h5>
              <div class="outline-text-5" id="text-5-7-3-2">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-export-headline-levels</span> <span style="color: #de935f; font-weight: bold;">5</span><span style="color: #b294bb;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">I like nesting</span>
</pre>
                </div>
                <p>
                  I&rsquo;m also going to make use of an item in
                  <code>ox-extra</code> so that I can add an
                  <code>:ignore:</code> tag to headings for the content to be
                  kept, but the heading itself ignored (unlike
                  <code>:noexport:</code> which ignored both heading and
                  content). This is useful when I want to use headings to
                  provide a structure for writing that doesn&rsquo;t appear in
                  the final documents.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #de935f;">require</span> <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">ox-extra</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #de935f;">ox-extras-activate</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>ignore-headlines<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
          </div>

          <div id="outline-container-orga71dd14" class="outline-4">
            <h4 id="orga71dd14">
              <span class="section-number-4">5.7.4.</span> LaTeX Export
            </h4>
            <div class="outline-text-4" id="text-5-7-4"></div>
            <div id="outline-container-org125401e" class="outline-5">
              <h5 id="org125401e">
                <span class="section-number-5">5.7.4.1.</span> Compiling
              </h5>
              <div class="outline-text-5" id="text-5-7-4-1">
                <p>
                  By default Org uses <code>pdflatex</code> &times; 3 +
                  <code>bibtex</code>. This simply won&rsquo;t do in our modern
                  world. <code>latexmk</code> + <code>biber</code> (which is
                  used automatically with <code>latexmk</code>) is a simply
                  superior combination.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">org-latex-compilers = ("pdflatex" "xelatex" "lualatex"), which are the possible values for %latex</span>
<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(setq org-latex-pdf-process '("latexmk -f -pdf -%latex -shell-escape -interaction=nonstopmode -output-directory=%o %f"))</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-pdf-process</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #b5bd68;">"LC_ALL=en_US.UTF-8 latexmk -f -pdf -%latex -shell-escape -interaction=nonstopmode -output-directory=%o %f"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  While <code>org-latex-pdf-process</code> does support a
                  function, and we could use that instead, this would no longer
                  use the log buffer &#x2014; it&rsquo;s a bit blind, you give
                  it the file name and expect it to do its thing.
                </p>

                <p>
                  The default values of <code>org-latex-compilers</code> is
                  given in commented form to see how
                  <code>org-latex-pdf-process</code> works with them.
                </p>

                <p>
                  While the <code>-%latex</code> above is slightly hacky (<code
                    >-pdflatex</code
                  >
                  expects to be given a value) it allows us to leave
                  <code>org-latex-compilers</code> unmodified. This is nice in
                  case I open an org file that uses
                  <code>#+LATEX_COMPILER</code> for example, it should still
                  work.
                </p>
              </div>
            </div>

            <div id="outline-container-org3a6e8da" class="outline-5">
              <h5 id="org3a6e8da">
                <span class="section-number-5">5.7.4.2.</span> Class templates
              </h5>
              <div class="outline-text-5" id="text-5-7-4-2">
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> ox-latex
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"scr-article"</span>
                 <span style="color: #b5bd68;">"\\documentclass{scrartcl}"</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"blank"</span>
                 <span style="color: #b5bd68;">"[NO-DEFAULT-PACKAGES]\n[NO-PACKAGES]\n[EXTRA]"</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"bmc-article"</span>
                 <span style="color: #b5bd68;">"\\documentclass[article,code,maths]{bmc}\n[NO-DEFAULT-PACKAGES]\n[NO-PACKAGES]\n[EXTRA]"</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"bmc"</span>
                 <span style="color: #b5bd68;">"\\documentclass[code,maths]{bmc}\n[NO-DEFAULT-PACKAGES]\n[NO-PACKAGES]\n[EXTRA]"</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\chapter{%s}"</span> . <span style="color: #b5bd68;">"\\chapter*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"memoir"</span> <span style="color: #b5bd68;">"\\documentclass{memoir}"</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">add-to-list</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">org-latex-classes</span>
               <span style="color: #c5c8c6;">'</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"scrlttr2"</span> <span style="color: #b5bd68;">"\\documentclass{scrlttr2}"</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\section{%s}"</span> . <span style="color: #b5bd68;">"\\section*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subsubsection{%s}"</span> . <span style="color: #b5bd68;">"\\subsubsection*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\paragraph{%s}"</span> . <span style="color: #b5bd68;">"\\paragraph*{%s}"</span><span style="color: #b5bd68;">)</span>
                 <span style="color: #b5bd68;">(</span><span style="color: #b5bd68;">"\\subparagraph{%s}"</span> . <span style="color: #b5bd68;">"\\subparagraph*{%s}"</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-default-class</span> <span style="color: #b5bd68;">"scr-article"</span>
      <span style="color: #cc6666;">org-latex-tables-booktabs</span> t
      <span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-org4731cb0" class="outline-5">
              <h5 id="org4731cb0">
                <span class="section-number-5">5.7.4.3.</span> Extra special
                strings
              </h5>
              <div class="outline-text-5" id="text-5-7-4-3">
                <p>
                  LaTeX already recognises <code>---</code> and
                  <code>--</code> as em/en-dashes, <code>\-</code> as a shy
                  hyphen, and the conversion of <code>...</code> to
                  <code>\ldots{}</code> is hardcoded into
                  <code>org-latex-plain-text</code> (unlike
                  <code>org-html-plain-text</code>).
                </p>

                <p>
                  I&rsquo;d quite like to also recognise <code>-&gt;</code> and
                  <code>&lt;-</code>, so let&rsquo;s set come up with some
                  advice.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">org-latex-extra-special-string-regexps</span>
  <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span><span style="color: #b5bd68;">"-&gt;"</span> . <span style="color: #b5bd68;">"\\\\textrightarrow{}"</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b5bd68;">"&lt;-"</span> . <span style="color: #b5bd68;">"\\\\textleftarrow{}"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-latex-convert-extra-special-strings</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">string</span><span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Convert special characters in STRING to LaTeX."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">dolist</span> <span style="color: #de935f;">(</span>a <span style="color: #cc6666;">org-latex-extra-special-string-regexps</span> string<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">let</span> <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">(</span>re <span style="color: #81a2be;">(</span><span style="color: #de935f;">car</span> a<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
          <span style="color: #b294bb;">(</span>rpl <span style="color: #81a2be;">(</span><span style="color: #de935f;">cdr</span> a<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq</span> string <span style="color: #b294bb;">(</span><span style="color: #de935f;">replace-regexp-in-string</span> re rpl string t<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> org-latex-plain-text-extra-special-a <span style="color: #81a2be;">(</span>orig-fn text info<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Make `</span><span style="color: #de935f;">org-latex-plain-text</span><span style="color: #717171;">' handle some extra special strings."</span>
  <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-latex-plain-text</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>output <span style="color: #b294bb;">(</span><span style="color: #de935f;">funcall</span> orig-fn text info<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:with-special-strings</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">setq</span> output <span style="color: #b294bb;">(</span><span style="color: #81a2be;">org-latex-convert-extra-special-strings</span> output<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    output<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>

            <div id="outline-container-org234d24a" class="outline-5">
              <h5 id="org234d24a">
                <span class="section-number-5">5.7.4.4.</span> Make verbatim
                different to code
              </h5>
              <div class="outline-text-5" id="text-5-7-4-4">
                <p>
                  Since have just gone to so much effort above let&rsquo;s make
                  the most of it by making
                  <code>verbatim</code> use <code>verb</code> instead of
                  <code>protectedtexttt</code> (default).
                </p>

                <p>
                  This gives the same advantages as mentioned in the
                  <a href="#org234d24a">HTML export section</a>.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-text-markup-alist</span>
      <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span><span style="color: #de935f;">(</span>bold . <span style="color: #b5bd68;">"\\textbf{%s}"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>code . protectedtexttt<span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>italic . <span style="color: #b5bd68;">"\\emph{%s}"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>strike-through . <span style="color: #b5bd68;">"\\sout{%s}"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>underline . <span style="color: #b5bd68;">"\\uline{%s}"</span><span style="color: #de935f;">)</span>
        <span style="color: #de935f;">(</span>verbatim . verb<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orgca1baec" class="outline-5">
              <h5 id="orgca1baec">
                <span class="section-number-5">5.7.4.5.</span> Support images
                from URLs
              </h5>
              <div class="outline-text-5" id="text-5-7-4-5">
                <p>
                  You can link to remote images easily, and they work nicely
                  with HTML-based exports. However, LaTeX can only include local
                  files, and so the current behaviour of
                  <code>org-latex-link</code> is just to insert a URL to the
                  image.
                </p>

                <p>
                  We can do better than that by downloading the image to a
                  predictable location, and using that. By making the filename
                  predictable as opposed to just another tempfile, this can
                  provide a caching mechanism.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> +org-latex-link <span style="color: #81a2be;">(</span>orig-fn link desc info<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Acts as `</span><span style="color: #de935f;">org-latex-link</span><span style="color: #717171;">', but supports remote images."</span>
  <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-latex-link</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> o-link link
        o-desc desc
        o-info info<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #b294bb;">and</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">member</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-get</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">cadr</span> link<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">:type</span><span style="color: #b294bb;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"http"</span> <span style="color: #b5bd68;">"https"</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
           <span style="color: #b5bd68;">(</span><span style="color: #de935f;">member</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">file-name-extension</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">plist-get</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">cadr</span> link<span style="color: #de935f;">)</span> <span style="color: #81a2be;">:path</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
                   <span style="color: #c5c8c6;">'</span><span style="color: #b294bb;">(</span><span style="color: #b5bd68;">"png"</span> <span style="color: #b5bd68;">"jpg"</span> <span style="color: #b5bd68;">"jpeg"</span> <span style="color: #b5bd68;">"pdf"</span> <span style="color: #b5bd68;">"svg"</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
      <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-latex-link--remote</span> link desc info<span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">funcall</span> orig-fn link desc info<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">org-latex-link--remote</span> <span style="color: #81a2be;">(</span>link _desc info<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let*</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>url <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-get</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">cadr</span> link<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">:raw-link</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         <span style="color: #b5bd68;">(</span>ext <span style="color: #b294bb;">(</span><span style="color: #de935f;">file-name-extension</span> url<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
         <span style="color: #b5bd68;">(</span>target <span style="color: #b294bb;">(</span><span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"%s%s.%s"</span>
                         <span style="color: #81a2be;">(</span><span style="color: #cc6666;">temporary-file-directory</span><span style="color: #81a2be;">)</span>
                         <span style="color: #81a2be;">(</span><span style="color: #de935f;">replace-regexp-in-string</span> <span style="color: #b5bd68;">"[./]"</span> <span style="color: #b5bd68;">"-"</span>
                                                   <span style="color: #de935f;">(</span><span style="color: #de935f;">file-name-sans-extension</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">substring</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-get</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">cadr</span> link<span style="color: #81a2be;">)</span> <span style="color: #81a2be;">:path</span><span style="color: #b294bb;">)</span> <span style="color: #de935f; font-weight: bold;">2</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
                         ext<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">file-exists-p</span> target<span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">url-copy-file</span> url target<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">setcdr</span> link <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">--&gt;</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">cadr</span> link<span style="color: #b294bb;">)</span>
                   <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-put</span> it <span style="color: #81a2be;">:type</span> <span style="color: #b5bd68;">"file"</span><span style="color: #b294bb;">)</span>
                   <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-put</span> it <span style="color: #81a2be;">:path</span> target<span style="color: #b294bb;">)</span>
                   <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-put</span> it <span style="color: #81a2be;">:raw-link</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"file:"</span> target<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
                   <span style="color: #b294bb;">(</span><span style="color: #de935f;">list</span> it<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">concat</span> <span style="color: #b5bd68;">"% fetched from "</span> url <span style="color: #b5bd68;">"\n"</span>
            <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-latex--inline-image</span> link info<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>
              </div>
            </div>
            <div id="outline-container-orga6f39c7" class="outline-5">
              <h5 id="orga6f39c7">
                <span class="section-number-5">5.7.4.6.</span> Pretty code
                blocks
              </h5>
              <div class="outline-text-5" id="text-5-7-4-6">
                <p>
                  We could just use minted for syntax highlighting &#x2014;
                  however, we can do better! The
                  <code>engrave-faces</code> package lets us use Emacs&rsquo;
                  font-lock for syntax highlighting, exporting that as LaTeX
                  commands.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">package!</span> engrave-faces <span style="color: #81a2be;">:recipe</span> <span style="color: #81a2be;">(</span><span style="color: #81a2be;">:local-repo</span> <span style="color: #b5bd68;">"tecosaur/engrave-faces"</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> engrave-faces-latex
  <span style="color: #81a2be;">:config</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">engrave-faces-preset-styles</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">engrave-faces-generate-preset</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:after</span> ox-latex<span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  We&rsquo;ll modify the way listings are generated to make
                  using this as easy as:
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-latex-listings</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">engraved</span><span style="color: #b294bb;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #b5bd68; font-weight: bold;">NOTE</span><span style="color: #5a5b5a;"> non-standard value</span>
</pre>
                </div>

                <p>
                  Thanks to <code>org-latex-conditional-features</code> and some
                  copy-paste with the <code>minted</code> entry in
                  <code>org-latex-scr-block</code> we can easily add this as a
                  recognised <code>org-latex-listings</code> value.
                </p>

                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defvar-local</span> <span style="color: #cc6666;">org-export-has-code-p</span> nil<span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> org-export-expect-no-code <span style="color: #81a2be;">(</span><span style="color: #f0c674;">&amp;rest</span> _<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:before</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-export-as</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-export-has-code-p</span> nil<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> org-export-register-code <span style="color: #81a2be;">(</span><span style="color: #f0c674;">&amp;rest</span> _<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-latex-src-block</span>
  <span style="color: #81a2be;">:after</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-latex-inline-src-block-engraved</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-export-has-code-p</span> t<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  Whenever this is used, in order for it to actually work (and
                  look a little better) we add bit to the preamble:
                </p>

                <p>
                  At some point it would be nice to make the box colours easily
                  customisable. At the moment it&rsquo;s fairly easy to change
                  the syntax highlighting colours with
                  <code class="src src-elisp"
                    ><span style="color: #b294bb">(</span
                    ><span style="color: #b294bb">setq</span>
                    <span style="color: #cc6666"
                      >engrave-faces-preset-styles</span
                    >
                    <span style="color: #81a2be">(</span
                    ><span style="color: #de935f"
                      >engrave-faces-generate-preset</span
                    ><span style="color: #81a2be">)</span
                    ><span style="color: #b294bb">)</span></code
                  >, but perhaps a toggle which specifies whether to use the
                  default values, the current theme, or any named theme could be
                  a good idea. It should also possible to set the box background
                  dynamically to match. The named theme could work by looking
                  for a style definition with a certain name in a cache dir, and
                  then switching to that theme and producing (and saving) the
                  style definition if it doesn&rsquo;t exist.
                </p>

                <p>
                  Now let&rsquo;s have the example block be styled similarly.
                </p>
                <div class="org-src-container">
                  <pre
                    class="src src-emacs-lisp"
                  ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defadvice!</span> org-latex-example-block-engraved <span style="color: #81a2be;">(</span>orig-fn example-block contents info<span style="color: #81a2be;">)</span>
  <span style="color: #717171;">"Like `</span><span style="color: #de935f;">org-latex-example-block</span><span style="color: #717171;">', but supporting an engraved backend"</span>
  <span style="color: #81a2be;">:around</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-latex-example-block</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>output-block <span style="color: #b294bb;">(</span><span style="color: #de935f;">funcall</span> orig-fn example-block contents info<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eq</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">engraved</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:latex-listings</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
        <span style="color: #b5bd68;">(</span><span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"\\begin{Code}[alt]\n%s\n\\end{Code}"</span> output-block<span style="color: #b5bd68;">)</span>
      output-block<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
                </div>

                <p>
                  In addition to the vastly superior visual output, this should
                  also be much faster to compile for code-heavy documents (like
                  this config).
                </p>

                <p>
                  Performing a little benchmark with this document, I find that
                  this is indeed the case.
                </p>

                <table
                  border="2"
                  cellspacing="0"
                  cellpadding="6"
                  rules="groups"
                  frame="hsides"
                >
                  <colgroup>
                    <col class="org-left" />

                    <col class="org-left" />

                    <col class="org-left" />

                    <col class="org-right" />
                  </colgroup>
                  <thead>
                    <tr>
                      <th scope="col" class="org-left">
                        LaTeX syntax highlighting backend
                      </th>
                      <th scope="col" class="org-left">Compile time</th>
                      <th scope="col" class="org-left">Overhead</th>
                      <th scope="col" class="org-right">Overhead ratio</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="org-left">verbatim</td>
                      <td class="org-left">12 s</td>
                      <td class="org-left">0</td>
                      <td class="org-right">0.0</td>
                    </tr>

                    <tr>
                      <td class="org-left">lstlistings</td>
                      <td class="org-left">15 s</td>
                      <td class="org-left">3 s</td>
                      <td class="org-right">0.2</td>
                    </tr>

                    <tr>
                      <td class="org-left">Engrave</td>
                      <td class="org-left">34 s</td>
                      <td class="org-left">22 s</td>
                      <td class="org-right">1.8</td>
                    </tr>

                    <tr>
                      <td class="org-left">Pygments (Minted)</td>
                      <td class="org-left">184 s</td>
                      <td class="org-left">172 s</td>
                      <td class="org-right">14.3</td>
                    </tr>
                  </tbody>
                </table>

                <p>
                  Treating the verbatim (no syntax highlighting) result as a
                  baseline; this rudimentary test suggest that
                  <code>engrave-faces</code> is around eight times faster than
                  <code>pygments</code>, and takes three times as long as no
                  syntax highlighting (verbatim).
                </p>
              </div>
            </div>
          </div>

          <div id="outline-container-orge407a3a" class="outline-4">
            <h4 id="orge407a3a">
              <span class="section-number-4">5.7.5.</span> Beamer Export
            </h4>
            <div class="outline-text-4" id="text-5-7-5">
              <p>It&rsquo;s nice to use a different theme by default</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-beamer-theme</span> <span style="color: #b5bd68;">"[progressbar=foot]metropolis"</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>
                And I think that it&rsquo;s natural to divide a presentation
                into sections, e.g. Introduction, Overview&#x2026; so
                let&rsquo;s set bump up the headline level that becomes a frame
                from <code>1</code> to <code>2</code>.
              </p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-beamer-frame-level</span> <span style="color: #de935f; font-weight: bold;">2</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
          <div id="outline-container-org927af9b" class="outline-4">
            <h4 id="org927af9b">
              <span class="section-number-4">5.7.6.</span> ASCII export
            </h4>
            <div class="outline-text-4" id="text-5-7-6">
              <p>To start with, why settle for ASCII when UTF-8 exists?</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-ascii-charset</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">utf-8</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>
                The ASCII export is generally fairly nice. I think the main
                aspect that could benefit from improvement is the appearance of
                LaTeX fragments. There&rsquo;s a nice utility we can use to
                create unicode representation, which are much nicer. It&rsquo;s
                called <code>latex2text</code>, and it&rsquo;s part of the
                <code>pylatexenc</code> package, and it&rsquo;s
                <a
                  href="https://repology.org/project/python:pylatexenc/versions"
                  >not really packaged</a
                >. So, we&rsquo;ll resort to installing it with
                <code>pip</code>.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-shell"
                ><span style="color: #81a2be; font-weight: bold;">sudo</span> python3 <span style="color: #de935f;">-m</span> pip install pylatexenc
</pre>
              </div>

              <p>
                With that installed, we can override the
                <code class="src src-elisp"
                  ><span style="color: #b294bb">(</span
                  ><span style="color: #de935f">org-ascii-latex-fragment</span
                  ><span style="color: #b294bb">)</span></code
                >
                and
                <code class="src src-elisp"
                  ><span style="color: #b294bb">(</span
                  ><span style="color: #de935f"
                    >org-ascii-latex-environment</span
                  ><span style="color: #b294bb">)</span></code
                >
                functions, which are conveniently very slim &#x2014; just
                extracting the content, and indenting. We&rsquo;ll only do
                something different when <code>utf-8</code> is set.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> ox-ascii
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defvar</span> <span style="color: #cc6666;">org-ascii-convert-latex</span> t
    <span style="color: #717171;">"Use latex2text to convert LaTeX elements to unicode."</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defadvice!</span> org-ascii-latex-environment-unicode-a <span style="color: #de935f;">(</span>latex-environment _contents info<span style="color: #de935f;">)</span>
    <span style="color: #717171;">"Transcode a LATEX-ENVIRONMENT element from Org to ASCII, converting to unicode.</span>
<span style="color: #717171;">CONTENTS is nil.  INFO is a plist holding contextual</span>
<span style="color: #717171;">information."</span>
    <span style="color: #81a2be;">:override</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-ascii-latex-environment</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:with-latex</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #de935f;">org-ascii--justify-element</span>
       <span style="color: #b294bb;">(</span><span style="color: #de935f;">org-remove-indentation</span>
        <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let*</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span>latex <span style="color: #b294bb;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:value</span> latex-environment<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span>
               <span style="color: #b5bd68;">(</span>unicode <span style="color: #b294bb;">(</span><span style="color: #b294bb;">and</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">eq</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:ascii-charset</span><span style="color: #de935f;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">utf-8</span><span style="color: #81a2be;">)</span>
                             <span style="color: #cc6666;">org-ascii-convert-latex</span>
                             <span style="color: #81a2be;">(</span><span style="color: #81a2be;">doom-call-process</span> <span style="color: #b5bd68;">"latex2text"</span> <span style="color: #b5bd68;">"-q"</span> <span style="color: #b5bd68;">"--code"</span> latex<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
          <span style="color: #de935f;">(</span><span style="color: #b294bb;">if</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">=</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">car</span> unicode<span style="color: #b294bb;">)</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #b5bd68;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">utf-8 set, and sucessfully ran latex2text</span>
              <span style="color: #b5bd68;">(</span><span style="color: #de935f;">cdr</span> unicode<span style="color: #b5bd68;">)</span> latex<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
       latex-environment info<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>

  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">defadvice!</span> org-ascii-latex-fragment-unicode-a <span style="color: #de935f;">(</span>latex-fragment _contents info<span style="color: #de935f;">)</span>
    <span style="color: #717171;">"Transcode a LATEX-FRAGMENT object from Org to ASCII, converting to unicode.</span>
<span style="color: #717171;">CONTENTS is nil.  INFO is a plist holding contextual</span>
<span style="color: #717171;">information."</span>
    <span style="color: #81a2be;">:override</span> <span style="color: #c5c8c6;">#'</span><span style="color: #f0c674;">org-ascii-latex-fragment</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">when</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:with-latex</span><span style="color: #b5bd68;">)</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">let*</span> <span style="color: #b294bb;">(</span><span style="color: #81a2be;">(</span>latex <span style="color: #de935f;">(</span><span style="color: #81a2be;">org-element-property</span> <span style="color: #81a2be;">:value</span> latex-fragment<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
             <span style="color: #81a2be;">(</span>unicode <span style="color: #de935f;">(</span><span style="color: #b294bb;">and</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">eq</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">plist-get</span> info <span style="color: #81a2be;">:ascii-charset</span><span style="color: #b294bb;">)</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">utf-8</span><span style="color: #b5bd68;">)</span>
                           <span style="color: #cc6666;">org-ascii-convert-latex</span>
                             <span style="color: #b5bd68;">(</span><span style="color: #81a2be;">doom-call-process</span> <span style="color: #b5bd68;">"latex2text"</span> <span style="color: #b5bd68;">"-q"</span> <span style="color: #b5bd68;">"--code"</span> latex<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
        <span style="color: #b294bb;">(</span><span style="color: #b294bb;">if</span> <span style="color: #81a2be;">(</span><span style="color: #b294bb;">and</span> unicode <span style="color: #de935f;">(</span><span style="color: #de935f;">=</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">car</span> unicode<span style="color: #b5bd68;">)</span> <span style="color: #de935f; font-weight: bold;">0</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span> <span style="color: #5a5b5a;">; </span><span style="color: #5a5b5a;">utf-8 set, and sucessfully ran latex2text</span>
            <span style="color: #81a2be;">(</span><span style="color: #de935f;">cdr</span> unicode<span style="color: #81a2be;">)</span> latex<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>

          <div id="outline-container-org62987a8" class="outline-4">
            <h4 id="org62987a8">
              <span class="section-number-4">5.7.7.</span> Reveal export
            </h4>
            <div class="outline-text-4" id="text-5-7-7">
              <p>
                By default reveal is rather nice, there are just a few tweaks
                that I consider a good idea.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">org-re-reveal-theme</span> <span style="color: #b5bd68;">"white"</span>
      <span style="color: #cc6666;">org-re-reveal-transition</span> <span style="color: #b5bd68;">"slide"</span>
      <span style="color: #cc6666;">org-re-reveal-plugins</span> <span style="color: #c5c8c6;">'</span><span style="color: #81a2be;">(</span>markdown notes math search zoom<span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>
        <div id="outline-container-org7bc8b15" class="outline-3">
          <h3 id="org7bc8b15">
            <span class="section-number-3">5.8.</span> Plaintext
          </h3>
          <div class="outline-text-3" id="text-5-8"></div>
          <div id="outline-container-org83b97b8" class="outline-4">
            <h4 id="org83b97b8">
              <span class="section-number-4">5.8.1.</span> Ansi colours
            </h4>
            <div class="outline-text-4" id="text-5-8-1">
              <p>
                It&rsquo;s nice to see ANSI colour codes displayed. However,
                until Emacs 28 it&rsquo;s not possible to do this without
                modifying the buffer, so let&rsquo;s condition this block on
                that.
              </p>

              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> text-mode
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">text-mode-hook</span>
    <span style="color: #de935f;">(</span><span style="color: #b294bb;">unless</span> <span style="color: #b5bd68;">(</span><span style="color: #de935f;">derived-mode-p</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #b5bd68;">)</span>
      <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Apply ANSI color codes</span>
      <span style="color: #b5bd68;">(</span><span style="color: #b294bb;">with-silent-modifications</span>
        <span style="color: #b294bb;">(</span><span style="color: #de935f;">ansi-color-apply-on-region</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">point-min</span><span style="color: #81a2be;">)</span> <span style="color: #81a2be;">(</span><span style="color: #de935f;">point-max</span><span style="color: #81a2be;">)</span> t<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>

              <p>It&rsquo;s nice to see ANSI colour codes displayed</p>
              <div class="org-src-container">
                <pre
                  class="src src-emacs-lisp"
                ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> text-mode
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">add-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">text-mode-hook</span>
             <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">Apply ANSI color codes</span>
             <span style="color: #de935f;">(</span><span style="color: #b294bb;">with-silent-modifications</span>
               <span style="color: #b5bd68;">(</span><span style="color: #de935f;">ansi-color-apply-on-region</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point-min</span><span style="color: #b294bb;">)</span> <span style="color: #b294bb;">(</span><span style="color: #de935f;">point-max</span><span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
              </div>
            </div>
          </div>
        </div>
        <div id="outline-container-org3fceeae" class="outline-3">
          <h3 id="org3fceeae">
            <span class="section-number-3">5.9.</span> Python
          </h3>
          <div class="outline-text-3" id="text-5-9">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">after!</span> lsp-python-ms
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">setq</span> <span style="color: #cc6666;">lsp-python-ms-executable</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">executable-find</span> <span style="color: #b5bd68;">"python-language-server"</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #81a2be;">set-lsp-priority!</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">mspyls</span> <span style="color: #de935f; font-weight: bold;">1</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org5464b82" class="outline-3">
          <h3 id="org5464b82">
            <span class="section-number-3">5.10.</span> Rust
          </h3>
          <div class="outline-text-3" id="text-5-10">
            <p>Set rust-analyzer as prefered lsp-server.</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq</span> rustic-lsp-server <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">rust-analyzer</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org5155ff9" class="outline-3">
          <h3 id="org5155ff9">
            <span class="section-number-3">5.11.</span> CSharp
          </h3>
          <div class="outline-text-3" id="text-5-11">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">use-package!</span> html-mode
  <span style="color: #81a2be;">:mode</span> <span style="color: #b5bd68;">"\\.cshtml\\'"</span>
  <span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-orgee917a7" class="outline-3">
          <h3 id="orgee917a7">
            <span class="section-number-3">5.12.</span> HTML
          </h3>
          <div class="outline-text-3" id="text-5-12">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">web-mode-hook</span> <span style="color: #cc6666;">+format-with-lsp</span> nil<span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">setq-hook!</span> <span style="color: #c5c8c6;">'</span><span style="color: #cc6666;">web-mode-hook</span> <span style="color: #cc6666;">+format-with</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">prettier</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-orgf82e89a" class="outline-2">
        <h2 id="orgf82e89a">
          <span class="section-number-2">6.</span> Functions
        </h2>
        <div class="outline-text-2" id="text-6"></div>
        <div id="outline-container-org5091255" class="outline-3">
          <h3 id="org5091255">
            <span class="section-number-3">6.1.</span> Org
          </h3>
          <div class="outline-text-3" id="text-6-1">
            <p>Export pdf asynchronously</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">leniviy/org-save-and-export-pdf</span> <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #de935f;">)</span>
      <span style="color: #de935f;">(</span><span style="color: #de935f;">org-latex-export-to-pdf</span> <span style="color: #81a2be;">:async</span> t<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>Export TeX</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">leniviy/org-save-and-export-latex</span> <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #de935f;">)</span>
      <span style="color: #de935f;">(</span><span style="color: #de935f;">org-latex-export-to-latex</span> <span style="color: #81a2be;">:async</span> t<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">leniviy/org-save-and-export-beamer</span> <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">if</span> <span style="color: #de935f;">(</span><span style="color: #de935f;">eq</span> <span style="color: #cc6666;">major-mode</span> <span style="color: #c5c8c6;">'</span><span style="color: #f0c674;">org-mode</span><span style="color: #de935f;">)</span>
      <span style="color: #de935f;">(</span><span style="color: #de935f;">org-beamer-export-to-latex</span> <span style="color: #81a2be;">:async</span> t<span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>

            <p>config tangling</p>
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">config-tangle</span> <span style="color: #81a2be;">()</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">shell-command</span>
   <span style="color: #b5bd68;">"emacs --batch --eval \"(require 'org)\" --eval '(org-babel-tangle-file \"~/.config/doom/config.org\")'"</span>
   <span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(concat "org-tangle " doom-private-dir "config.org" " &amp;")</span>
   <span style="color: #81a2be;">)</span>
  <span style="color: #b294bb;">)</span>

<span style="color: #b294bb;">()</span>
</pre>
            </div>
          </div>
        </div>
        <div id="outline-container-org715a587" class="outline-3">
          <h3 id="org715a587">
            <span class="section-number-3">6.2.</span> Files
          </h3>
          <div class="outline-text-3" id="text-6-2">
            <div class="org-src-container">
              <pre
                class="src src-emacs-lisp"
              ><span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">open-file-external</span> <span style="color: #81a2be;">(</span>file<span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span> <span style="color: #b5bd68;">"f"</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">let</span> <span style="color: #de935f;">(</span><span style="color: #b5bd68;">(</span><span style="color: #cc6666;">process-connection-type</span> nil<span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span>
    <span style="color: #de935f;">(</span><span style="color: #de935f;">start-process</span>
     <span style="color: #b5bd68;">""</span> nil <span style="color: #cc6666;">shell-file-name</span>
     <span style="color: #cc6666;">shell-command-switch</span>
     <span style="color: #b5bd68;">(</span><span style="color: #de935f;">format</span> <span style="color: #b5bd68;">"nohup 1&gt;/dev/null 2&gt;/dev/null xdg-open %s"</span>
             <span style="color: #b294bb;">(</span><span style="color: #de935f;">expand-file-name</span> file<span style="color: #b294bb;">)</span><span style="color: #b5bd68;">)</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>

<span style="color: #5a5b5a;">;; </span><span style="color: #5a5b5a;">(defun get-current-file-location ()</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">"Return the current file location."</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">(interactive)</span>
<span style="color: #5a5b5a;">;;   </span><span style="color: #5a5b5a;">(when buffer-file-name</span>
<span style="color: #5a5b5a;">;;     </span><span style="color: #5a5b5a;">(file-truename buffer-file-name)))</span>

<span style="color: #b294bb;">(</span><span style="color: #b294bb;">defun</span> <span style="color: #81a2be;">copy-file-location-to-clipboard</span> <span style="color: #81a2be;">()</span>
  <span style="color: #717171;">"Copy the current file location to the clipboard."</span>
  <span style="color: #81a2be;">(</span><span style="color: #b294bb;">interactive</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">kill-new</span> <span style="color: #de935f;">(</span><span style="color: #cc6666;">buffer-file-name</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span>
  <span style="color: #81a2be;">(</span><span style="color: #de935f;">message</span> <span style="color: #b5bd68;">"File location copied to clipboard: %s"</span> <span style="color: #de935f;">(</span><span style="color: #cc6666;">buffer-file-name</span><span style="color: #de935f;">)</span><span style="color: #81a2be;">)</span><span style="color: #b294bb;">)</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="postamble" class="status">
      <p class="author">Author: leniviy</p>
      <p class="date">Created: 2023-07-16 Sun 17:30</p>
    </div>
  </body>
</html>
