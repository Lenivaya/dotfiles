#!/usr/bin/env ksh
#
# You can call this script like this:
# $ ./brightnessControl.sh up
# $ ./brightnessControl.sh down

# Script inspired by these wonderful people:
# https://github.com/dastorm/volume-notification-dunst/blob/master/volume.sh
# https://gist.github.com/sebastiencs/5d7227f388d93374cebdf72e783fbd6a

ICON="preferences-system-brightness-lock"
NOTIFICATION_ID="5555"
INCREMENT="10%"

get_brightness() {
  brightnessctl get
}

send_notification() {
  local brightness="$1"
  local bar=$(seq -s "â”€" 0 $((brightness / 105)) | sed 's/[0-9]//g')
  dunstify -i "$ICON" -r "$NOTIFICATION_ID" -u normal "$bar"
}

increase_brightness() {
  brightnessctl set "+$INCREMENT"
}

decrease_brightness() {
  brightnessctl set "$INCREMENT-"
}

# Main
case $1 in
  up)
    increase_brightness
    ;;
  down)
    decrease_brightness
    ;;
  *)
    echo "Invalid argument. Usage: $0 [up|down]"
    exit 1
    ;;
esac

send_notification "$(get_brightness)"
